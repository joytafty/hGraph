/*! 
 * HGraph.js (Canvas Version)
 * Author:
 *     Danny Hadley <danny@goinvo.com>
 * License:
 *     Copyright 2013, Involution Studios <http://goinvo.com>
 *
 *     Licensed under the Apache License, Version 2.0 (the "License");
 *	   you may not use this file except in compliance with the License.
 * 	   You may obtain a copy of the License at
 *      
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 *     Unless required by applicable law or agreed to in writing, software
 *     distributed under the License is distributed on an "AS IS" BASIS,
 *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *     See the License for the specific language governing permissions and
 *     limitations under the License.
*/
(function(v){var bE={},aH=aH||{REVISION:"58"},bJ={},bU=false,n={},t=[];bJ.scale={};function ac(cs){var ct=cs[0],e=cs[cs.length-1];return ct<e?[ct,e]:[e,ct]}function bI(e){return e.rangeExtent?e.rangeExtent():ac(e.range())}bJ.range=function(cx,cv,cw){if(arguments.length<3){cw=1;if(arguments.length<2){cv=cx;cx=0}}if((cv-cx)/cw===Infinity){throw new Error("infinite range")}var cs=[],e=bB(Math.abs(cw)),cu=-1,ct;cx*=e,cv*=e,cw*=e;if(cw<0){while((ct=cx+cw*++cu)>cv){cs.push(ct/e)}}else{while((ct=cx+cw*++cu)<cv){cs.push(ct/e)}}return cs};function bB(e){var cs=1;while(e*cs%1){cs*=10}return cs}bJ.rebind=function(ct,cs){var e=1,cv=arguments.length,cu;while(++e<cv){ct[cu=arguments[e]]=X(ct,cs,cs[cu])}return ct};function X(cs,e,ct){return function(){var cu=ct.apply(e,arguments);return cu===e?cs:cu}}function ar(){}ar.prototype.toString=function(){return this.rgb()+""};function b9(cu,ct){try{for(var cs in ct){Object.defineProperty(cu.prototype,cs,{value:ct[cs],enumerable:false})}}catch(cv){cu.prototype=ct}}bJ.map=function(e){var ct=new bg;for(var cs in e){ct.set(cs,e[cs])}return ct};function bg(){}b9(bg,{has:function(e){return b4+e in this},get:function(e){return this[b4+e]},set:function(e,cs){return this[b4+e]=cs},remove:function(e){e=b4+e;return e in this&&delete this[e]},keys:function(){var e=[];this.forEach(function(cs){e.push(cs)});return e},values:function(){var e=[];this.forEach(function(cs,ct){e.push(ct)});return e},entries:function(){var e=[];this.forEach(function(cs,ct){e.push({key:cs,value:ct})});return e},forEach:function(cs){for(var e in this){if(e.charCodeAt(0)===av){cs.call(this,e.substring(1),this[e])}}}});var b4="\0",av=b4.charCodeAt(0);bJ.hsl=function(ct,cs,e){return arguments.length===1?(ct instanceof bv?aL(ct.h,ct.s,ct.l):ae(""+ct,a3,aL)):aL(+ct,+cs,+e)};function aL(ct,cs,e){return new bv(ct,cs,e)}function bv(ct,cs,e){this.h=ct;this.s=cs;this.l=e}var cm=bv.prototype=new ar;cm.brighter=function(e){e=Math.pow(0.7,arguments.length?e:1);return aL(this.h,this.s,this.l/e)};cm.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);return aL(this.h,this.s,e*this.l)};cm.rgb=function(){return b8(this.h,this.s,this.l)};function b8(cw,cv,e){var cu,ct;cw=isNaN(cw)?0:(cw%=360)<0?cw+360:cw;cv=isNaN(cv)?0:cv<0?0:cv>1?1:cv;e=e<0?0:e>1?1:e;ct=e<=0.5?e*(1+cv):e+cv-e*cv;cu=2*e-ct;function cs(cy){if(cy>360){cy-=360}else{if(cy<0){cy+=360}}if(cy<60){return cu+(ct-cu)*cy/60}if(cy<180){return ct}if(cy<240){return cu+(ct-cu)*(240-cy)/60}return cu}function cx(cy){return Math.round(cs(cy)*255)}return aw(cx(cw+120),cx(cw),cx(cw-120))}var a0=Math.PI,a7=0.000001,j=a7*a7,a4=a0/180,bq=180/a0;function bQ(e){return e>0?1:e<0?-1:0}function aI(e){return e>1?0:e<-1?a0:Math.acos(e)}function bF(e){return e>1?a0/2:e<-1?-a0/2:Math.asin(e)}function aC(e){return(Math.exp(e)-Math.exp(-e))/2}function aQ(e){return(Math.exp(e)+Math.exp(-e))/2}function E(e){return(e=Math.sin(e/2))*e}bJ.hcl=function(cs,ct,e){return arguments.length===1?(cs instanceof d?bw(cs.h,cs.c,cs.l):(cs instanceof G?aO(cs.l,cs.a,cs.b):aO((cs=cg((cs=bJ.rgb(cs)).r,cs.g,cs.b)).l,cs.a,cs.b))):bw(+cs,+ct,+e)};function bw(cs,ct,e){return new d(cs,ct,e)}function d(cs,ct,e){this.h=cs;this.c=ct;this.l=e}var bH=d.prototype=new ar;bH.brighter=function(e){return bw(this.h,this.c,Math.min(100,this.l+O*(arguments.length?e:1)))};bH.darker=function(e){return bw(this.h,this.c,Math.max(0,this.l-O*(arguments.length?e:1)))};bH.rgb=function(){return at(this.h,this.c,this.l).rgb()};function at(cs,ct,e){if(isNaN(cs)){cs=0}if(isNaN(ct)){ct=0}return b2(e,Math.cos(cs*=a4)*ct,Math.sin(cs)*ct)}bJ.lab=function(ct,cs,e){return arguments.length===1?(ct instanceof G?b2(ct.l,ct.a,ct.b):(ct instanceof d?at(ct.l,ct.c,ct.h):cg((ct=bJ.rgb(ct)).r,ct.g,ct.b))):b2(+ct,+cs,+e)};function b2(ct,cs,e){return new G(ct,cs,e)}function G(ct,cs,e){this.l=ct;this.a=cs;this.b=e}var O=18;var K=0.95047,J=1,I=1.08883;var M=G.prototype=new ar;M.brighter=function(e){return b2(Math.min(100,this.l+O*(arguments.length?e:1)),this.a,this.b)};M.darker=function(e){return b2(Math.max(0,this.l-O*(arguments.length?e:1)),this.a,this.b)};M.rgb=function(){return i(this.l,this.a,this.b)};function i(cu,ct,cs){var cw=(cu+16)/116,e=cw+ct/500,cv=cw-cs/200;e=aW(e)*K;cw=aW(cw)*J;cv=aW(cv)*I;return aw(z(3.2404542*e-1.5371385*cw-0.4985314*cv),z(-0.969266*e+1.8760108*cw+0.041556*cv),z(0.0556434*e-0.2040259*cw+1.0572252*cv))}function aO(ct,cs,e){return ct>0?bw(Math.atan2(e,cs)*bq,Math.sqrt(cs*cs+e*e),ct):bw(NaN,NaN,ct)}function aW(e){return e>0.206893034?e*e*e:(e-4/29)/7.787037}function bm(e){return e>0.008856?Math.pow(e,1/3):7.787037*e+4/29}function z(e){return Math.round(255*(e<=0.00304?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))}bJ.rgb=function(ct,cs,e){return arguments.length===1?(ct instanceof bh?aw(ct.r,ct.g,ct.b):ae(""+ct,aw,b8)):aw(~~ct,~~cs,~~e)};function aw(ct,cs,e){return new bh(ct,cs,e)}function bh(ct,cs,e){this.r=ct;this.g=cs;this.b=e}var o=bh.prototype=new ar;o.brighter=function(cs){cs=Math.pow(0.7,arguments.length?cs:1);var cv=this.r,cu=this.g,e=this.b,ct=30;if(!cv&&!cu&&!e){return aw(ct,ct,ct)}if(cv&&cv<ct){cv=ct}if(cu&&cu<ct){cu=ct}if(e&&e<ct){e=ct}return aw(Math.min(255,Math.floor(cv/cs)),Math.min(255,Math.floor(cu/cs)),Math.min(255,Math.floor(e/cs)))};o.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);return aw(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))};o.hsl=function(){return a3(this.r,this.g,this.b)};o.toString=function(){return"#"+bf(this.r)+bf(this.g)+bf(this.b)};function bf(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ae(cw,cu,cx){var e=0,ct=0,cv=0,cz,cy,cs;cz=/([a-z]+)\((.*)\)/i.exec(cw);if(cz){cy=cz[2].split(",");switch(cz[1]){case"hsl":return cx(parseFloat(cy[0]),parseFloat(cy[1])/100,parseFloat(cy[2])/100);case"rgb":return cu(aA(cy[0]),aA(cy[1]),aA(cy[2]))}}if(cs=aT.get(cw)){return cu(cs.r,cs.g,cs.b)}if(cw!=null&&cw.charAt(0)==="#"){if(cw.length===4){e=cw.charAt(1);e+=e;ct=cw.charAt(2);ct+=ct;cv=cw.charAt(3);cv+=cv}else{if(cw.length===7){e=cw.substring(1,3);ct=cw.substring(3,5);cv=cw.substring(5,7)}}e=parseInt(e,16);ct=parseInt(ct,16);cv=parseInt(cv,16)}return cu(e,ct,cv)}function a3(e,cv,cx){var ct=Math.min(e/=255,cv/=255,cx/=255),cy=Math.max(e,cv,cx),cw=cy-ct,cu,cz,cs=(cy+ct)/2;if(cw){cz=cs<0.5?cw/(cy+ct):cw/(2-cy-ct);if(e==cy){cu=(cv-cx)/cw+(cv<cx?6:0)}else{if(cv==cy){cu=(cx-e)/cw+2}else{cu=(e-cv)/cw+4}}cu*=60}else{cu=NaN;cz=cs>0&&cs<1?0:cu}return aL(cu,cz,cs)}function cg(cu,ct,cs){cu=bX(cu);ct=bX(ct);cs=bX(cs);var e=bm((0.4124564*cu+0.3575761*ct+0.1804375*cs)/K),cw=bm((0.2126729*cu+0.7151522*ct+0.072175*cs)/J),cv=bm((0.0193339*cu+0.119192*ct+0.9503041*cs)/I);return b2(116*cw-16,500*(e-cw),200*(cw-cv))}function bX(e){return(e/=255)<=0.04045?e/12.92:Math.pow((e+0.055)/1.055,2.4)}function aA(cs){var e=parseFloat(cs);return cs.charAt(cs.length-1)==="%"?Math.round(e*2.55):e}var aT=bJ.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});aT.forEach(function(e,cs){aT.set(e,ae(cs,aw,b8))});bJ.interpolateRgb=g;function g(cs,e){cs=bJ.rgb(cs);e=bJ.rgb(e);var cu=cs.r,ct=cs.g,cx=cs.b,cw=e.r-cu,cv=e.g-ct,cy=e.b-cx;return function(cz){return"#"+bf(Math.round(cu+cw*cz))+bf(Math.round(ct+cv*cz))+bf(Math.round(cx+cy*cz))}}var bR=document,cp=bR.documentElement,aM=window;var b3={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};bJ.ns={prefix:b3,qualify:function(e){var cs=e.indexOf(":"),ct=e;if(cs>=0){ct=e.substring(0,cs);e=e.substring(cs+1)}return b3.hasOwnProperty(ct)?{space:b3[ct],local:e}:e}};bJ.transform=function(e){var cs=bR.createElementNS(bJ.ns.prefix.svg,"g");return(bJ.transform=function(ct){if(ct!=null){cs.setAttribute("transform",ct);var cu=cs.transform.baseVal.consolidate()}return new ca(cu?cu.matrix:cf)})(e)};function ca(e){var cu=[e.a,e.b],cs=[e.c,e.d],cw=aK(cu),ct=ab(cu,cs),cv=aK(bl(cs,cu,-ct))||0;if(cu[0]*cs[1]<cs[0]*cu[1]){cu[0]*=-1;cu[1]*=-1;cw*=-1;ct*=-1}this.rotate=(cw?Math.atan2(cu[1],cu[0]):Math.atan2(-cs[0],cs[1]))*bq;this.translate=[e.e,e.f];this.scale=[cw,cv];this.skew=cv?Math.atan2(ct,cv)*bq:0}ca.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function ab(cs,e){return cs[0]*e[0]+cs[1]*e[1]}function aK(e){var cs=Math.sqrt(ab(e,e));if(cs){e[0]/=cs;e[1]/=cs}return cs}function bl(cs,e,ct){cs[0]+=ct*e[0];cs[1]+=ct*e[1];return cs}var cf={a:1,b:0,c:0,d:1,e:0,f:0};bJ.interpolateNumber=ax;function ax(cs,e){e-=cs=+cs;return function(ct){return cs+e*ct}}bJ.interpolateTransform=au;function au(cE,cD){var cF=[],cs=[],cw,cv=bJ.transform(cE),cu=bJ.transform(cD),cA=cv.translate,cz=cu.translate,ct=cv.rotate,e=cu.rotate,cy=cv.skew,cx=cu.skew,cC=cv.scale,cB=cu.scale;if(cA[0]!=cz[0]||cA[1]!=cz[1]){cF.push("translate(",null,",",null,")");cs.push({i:1,x:ax(cA[0],cz[0])},{i:3,x:ax(cA[1],cz[1])})}else{if(cz[0]||cz[1]){cF.push("translate("+cz+")")}else{cF.push("")}}if(ct!=e){if(ct-e>180){e+=360}else{if(e-ct>180){ct+=360}}cs.push({i:cF.push(cF.pop()+"rotate(",null,")")-2,x:ax(ct,e)})}else{if(e){cF.push(cF.pop()+"rotate("+e+")")}}if(cy!=cx){cs.push({i:cF.push(cF.pop()+"skewX(",null,")")-2,x:ax(cy,cx)})}else{if(cx){cF.push(cF.pop()+"skewX("+cx+")")}}if(cC[0]!=cB[0]||cC[1]!=cB[1]){cw=cF.push(cF.pop()+"scale(",null,",",null,")");cs.push({i:cw-4,x:ax(cC[0],cB[0])},{i:cw-2,x:ax(cC[1],cB[1])})}else{if(cB[0]!=1||cB[1]!=1){cF.push(cF.pop()+"scale("+cB+")")}}cw=cs.length;return function(cH){var cG=-1,cI;while(++cG<cw){cF[(cI=cs[cG]).i]=cI.x(cH)}return cF.join("")}}bJ.interpolateObject=cb;function cb(cs,e){var cu={},cv={},ct;for(ct in cs){if(ct in e){cu[ct]=ai(ct)(cs[ct],e[ct])}else{cv[ct]=cs[ct]}}for(ct in e){if(!(ct in cs)){cv[ct]=e[ct]}}return function(cw){for(ct in cu){cv[ct]=cu[ct](cw)}return cv}}bJ.interpolateArray=aN;function aN(cv,ct){var cs=[],cy=[],cu=cv.length,e=ct.length,cx=Math.min(cv.length,ct.length),cw;for(cw=0;cw<cx;++cw){cs.push(bM(cv[cw],ct[cw]))}for(;cw<cu;++cw){cy[cw]=cv[cw]}for(;cw<e;++cw){cy[cw]=ct[cw]}return function(cz){for(cw=0;cw<cx;++cw){cy[cw]=cs[cw](cz)}return cy}}bJ.interpolateString=by;function by(cy,cx){var cu,cw,cv,cA=0,cz=0,cB=[],e=[],ct,cs;cy=cy+"",cx=cx+"";k.lastIndex=0;for(cw=0;cu=k.exec(cx);++cw){if(cu.index){cB.push(cx.substring(cA,cz=cu.index))}e.push({i:cB.length,x:cu[0]});cB.push(null);cA=k.lastIndex}if(cA<cx.length){cB.push(cx.substring(cA))}for(cw=0,ct=e.length;(cu=k.exec(cy))&&cw<ct;++cw){cs=e[cw];if(cs.x==cu[0]){if(cs.i){if(cB[cs.i+1]==null){cB[cs.i-1]+=cs.x;cB.splice(cs.i,1);for(cv=cw+1;cv<ct;++cv){e[cv].i--}}else{cB[cs.i-1]+=cs.x+cB[cs.i+1];cB.splice(cs.i,2);for(cv=cw+1;cv<ct;++cv){e[cv].i-=2}}}else{if(cB[cs.i+1]==null){cB[cs.i]=cs.x}else{cB[cs.i]=cs.x+cB[cs.i+1];cB.splice(cs.i+1,1);for(cv=cw+1;cv<ct;++cv){e[cv].i--}}}e.splice(cw,1);ct--;cw--}else{cs.x=ax(parseFloat(cu[0]),parseFloat(cs.x))}}while(cw<ct){cs=e.pop();if(cB[cs.i+1]==null){cB[cs.i]=cs.x}else{cB[cs.i]=cs.x+cB[cs.i+1];cB.splice(cs.i+1,1)}ct--}if(cB.length===1){return cB[0]==null?(cs=e[0].x,function(cC){return cs(cC)+""}):function(){return cx}}return function(cC){for(cw=0;cw<ct;++cw){cB[(cs=e[cw]).i]=cs.x(cC)}return cB.join("")}}var k=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;bJ.interpolate=bM;function bM(cs,e){var ct=bJ.interpolators.length,cu;while(--ct>=0&&!(cu=bJ.interpolators[ct](cs,e))){}return cu}function ai(e){return e=="transform"?au:bM}bJ.interpolators=[function(cs,e){var ct=typeof e;return(ct==="string"?(aT.has(e)||/^(#|rgb\(|hsl\()/.test(e)?g:by):e instanceof ar?g:ct==="object"?(Array.isArray(e)?aN:cb):ax)(cs,e)}];bJ.interpolateRound=aU;function aU(cs,e){e-=cs;return function(ct){return Math.round(cs+e*ct)}}function L(cs,e){e=e-(cs=+cs)?1/(e-cs):0;return function(ct){return(ct-cs)*e}}function ag(cs,e){e=e-(cs=+cs)?1/(e-cs):0;return function(ct){return Math.max(0,Math.min(1,(ct-cs)*e))}}function p(e){return e}var bc=".",bD=",",bi=[3,3];var bn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(a6);bJ.formatPrefix=function(ct,e){var cs=0;if(ct){if(ct<0){ct*=-1}if(e){ct=bJ.round(ct,bt(ct,e))}cs=1+Math.floor(1e-12+Math.log(ct)/Math.LN10);cs=Math.max(-24,Math.min(24,Math.floor((cs<=0?cs+1:cs-1)/3)*3))}return bn[8+cs/3]};function a6(ct,cs){var e=Math.pow(10,Math.abs(8-cs)*3);return{scale:cs>8?function(cu){return cu/e}:function(cu){return cu*e},symbol:ct}}bJ.round=function(e,cs){return cs?Math.round(e*(cs=Math.pow(10,cs)))/cs:Math.round(e)};bJ.format=function(cC){var cz=B.exec(cC),cE=cz[1]||" ",cA=cz[2]||">",ct=cz[3]||"",e=cz[4]||"",cv=cz[5],cs=+cz[6],cF=cz[7],cy=cz[8],cB=cz[9],cu=1,cD="",cx=false;if(cy){cy=+cy.substring(1)}if(cv||cE==="0"&&cA==="="){cv=cE="0";cA="=";if(cF){cs-=Math.floor((cs-1)/4)}}switch(cB){case"n":cF=true;cB="g";break;case"%":cu=100;cD="%";cB="f";break;case"p":cu=100;cD="%";cB="r";break;case"b":case"o":case"x":case"X":if(e){e="0"+cB.toLowerCase()}case"c":case"d":cx=true;cy=0;break;case"s":cu=-1;cB="r";break}if(e==="#"){e=""}if(cB=="r"&&!cy){cB="g"}if(cy!=null){if(cB=="g"){cy=Math.max(1,Math.min(21,cy))}else{if(cB=="e"||cB=="f"){cy=Math.max(0,Math.min(20,cy))}}}cB=aJ.get(cB)||bV;var cw=cv&&cF;return function(cJ){if(cx&&(cJ%1)){return""}var cG=cJ<0||cJ===0&&1/cJ<0?(cJ=-cJ,"-"):ct;if(cu<0){var cI=bJ.formatPrefix(cJ,cy);cJ=cI.scale(cJ);cD=cI.symbol}else{cJ*=cu}cJ=cB(cJ,cy);if(!cv&&cF){cJ=bL(cJ)}var cH=e.length+cJ.length+(cw?0:cG.length),cK=cH<cs?new Array(cH=cs-cH+1).join(cE):"";if(cw){cJ=bL(cK+cJ)}if(bc){cJ.replace(".",bc)}cG+=e;return(cA==="<"?cG+cJ+cK:cA===">"?cK+cG+cJ:cA==="^"?cK.substring(0,cH>>=1)+cG+cJ+cK.substring(cH):cG+(cw?cJ:cK+cJ))+cD}};var B=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var aJ=bJ.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,cs){return e.toPrecision(cs)},e:function(e,cs){return e.toExponential(cs)},f:function(e,cs){return e.toFixed(cs)},r:function(e,cs){return(e=bJ.round(e,bt(e,cs))).toFixed(Math.max(0,Math.min(20,bt(e*(1+1e-15),cs))))}});function bt(e,cs){return cs-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function bV(e){return e+""}var bL=p;if(bi){var F=bi.length;bL=function(cw){var ct=cw.lastIndexOf("."),cv=ct>=0?"."+cw.substring(ct+1):(ct=cw.length,""),cs=[],e=0,cu=bi[0];while(ct>0&&cu>0){cs.push(cw.substring(ct-=cu,ct+cu));cu=bi[e=(e+1)%F]}return cs.reverse().join(bD||"")+cv}}function cj(cv,e,cw,ct){var cs=cw(cv[0],cv[1]),cu=ct(e[0],e[1]);return function(cx){return cu(cs(cx))}}function bP(cx,cv){var cw=0,cu=cx.length-1,ct=cx[cw],cs=cx[cu],e;if(cs<ct){e=cw,cw=cu,cu=e;e=ct,ct=cs,cs=e}cx[cw]=cv.floor(ct);cx[cu]=cv.ceil(cs);return cx}function a9(e){return e?{floor:function(cs){return Math.floor(cs/e)*e},ceil:function(cs){return Math.ceil(cs/e)*e}}:ao}var ao={floor:p,ceil:p};bJ.bisector=function(e){return{left:function(ct,cs,cw,cv){if(arguments.length<3){cw=0}if(arguments.length<4){cv=ct.length}while(cw<cv){var cu=cw+cv>>>1;if(e.call(ct,ct[cu],cu)<cs){cw=cu+1}else{cv=cu}}return cw},right:function(ct,cs,cw,cv){if(arguments.length<3){cw=0}if(arguments.length<4){cv=ct.length}while(cw<cv){var cu=cw+cv>>>1;if(cs<e.call(ct,ct[cu],cu)){cv=cu}else{cw=cu+1}}return cw}}};var u=bJ.bisector(function(e){return e});bJ.bisectLeft=u.left;bJ.bisect=bJ.bisectRight=u.right;function r(cx,cs,cy,cv){var cu=[],cw=[],ct=0,e=Math.min(cx.length,cs.length)-1;if(cx[e]<cx[0]){cx=cx.slice().reverse();cs=cs.slice().reverse()}while(++ct<=e){cu.push(cy(cx[ct-1],cx[ct]));cw.push(cv(cs[ct-1],cs[ct]))}return function(cz){var cA=bJ.bisect(cx,cz,1,e)-1;return cw[cA](cu[cA](cz))}}bJ.scale.linear=function(){return al([0,1],[0,1],bM,false)};function al(cw,cu,cv,cy){var ct,cs;function e(){var cz=Math.min(cw.length,cu.length)>2?r:cj,cA=cy?ag:L;ct=cz(cw,cu,cA,cv);cs=cz(cu,cw,cA,bM);return cx}function cx(cz){return ct(cz)}cx.invert=function(cz){return cs(cz)};cx.domain=function(cz){if(!arguments.length){return cw}cw=cz.map(Number);return e()};cx.range=function(cz){if(!arguments.length){return cu}cu=cz;return e()};cx.rangeRound=function(cz){return cx.range(cz).interpolate(aU)};cx.clamp=function(cz){if(!arguments.length){return cy}cy=cz;return e()};cx.interpolate=function(cz){if(!arguments.length){return cv}cv=cz;return e()};cx.ticks=function(cz){return H(cw,cz)};cx.tickFormat=function(cz,cA){return a(cw,cz,cA)};cx.nice=function(cz){aj(cw,cz);return e()};cx.copy=function(){return al(cw,cu,cv,cy)};return e()}function bN(cs,e){return bJ.rebind(cs,e,"range","rangeRound","interpolate","clamp")}function aj(cs,e){return bP(cs,a9(e?S(cs,e)[2]:bs(cs)))}function bs(ct){var cs=ac(ct),e=cs[1]-cs[0];return Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1)}function S(cw,e){var ct=ac(cw),cs=ct[1]-ct[0],cv=Math.pow(10,Math.floor(Math.log(cs/e)/Math.LN10)),cu=e/cs*cv;if(cu<=0.15){cv*=10}else{if(cu<=0.35){cv*=5}else{if(cu<=0.75){cv*=2}}}ct[0]=Math.ceil(ct[0]/cv)*cv;ct[1]=Math.floor(ct[1]/cv)*cv+cv*0.5;ct[2]=cv;return ct}function H(cs,e){return bJ.range.apply(bJ,S(cs,e))}function a(ct,e,cu){var cs=-Math.floor(Math.log(S(ct,e)[2])/Math.LN10+0.01);return bJ.format(cu?cu.replace(B,function(cE,cD,cC,cB,cA,cz,cy,cx,cw,cv){return[cD,cC,cB,cA,cz,cy,cx,cw||"."+(cs-(cv==="%")*2),cv].join("")}):",."+cs+"f")}bJ.scale.log=function(){return b0(bJ.scale.linear().domain([0,Math.LN10]),10,cd,a5,[1,10])};function b0(e,cv,cs,ct,cu){function cw(cx){return e(cs(cx))}cw.invert=function(cx){return ct(e.invert(cx))};cw.domain=function(cx){if(!arguments.length){return cu}if(cx[0]<0){cs=ce,ct=a8}else{cs=cd,ct=a5}e.domain((cu=cx.map(Number)).map(cs));return cw};cw.base=function(cx){if(!arguments.length){return cv}cv=+cx;return cw};cw.nice=function(){function cy(cz){return Math.pow(cv,Math.floor(Math.log(cz)/Math.log(cv)))}function cx(cz){return Math.pow(cv,Math.ceil(Math.log(cz)/Math.log(cv)))}e.domain(bP(cu,cs===cd?{floor:cy,ceil:cx}:{floor:function(cz){return -cx(-cz)},ceil:function(cz){return -cy(-cz)}}).map(cs));return cw};cw.ticks=function(){var cF=ac(e.domain()),cC=[];if(cF.every(isFinite)){var cB=Math.log(cv),cA=Math.floor(cF[0]/cB),cz=Math.ceil(cF[1]/cB),cE=ct(cF[0]),cD=ct(cF[1]),cx=cv%1?2:cv;if(cs===ce){cC.push(-Math.pow(cv,-cA));for(;cA++<cz;){for(var cy=cx-1;cy>0;cy--){cC.push(-Math.pow(cv,-cA)*cy)}}}else{for(;cA<cz;cA++){for(var cy=1;cy<cx;cy++){cC.push(Math.pow(cv,cA)*cy)}}cC.push(Math.pow(cv,cA))}for(cA=0;cC[cA]<cE;cA++){}for(cz=cC.length;cC[cz-1]>cD;cz--){}cC=cC.slice(cA,cz)}return cC};cw.tickFormat=function(cC,cB){if(!arguments.length){return ci}if(arguments.length<2){cB=ci}else{if(typeof cB!=="function"){cB=bJ.format(cB)}}var cx=Math.log(cv),cy=Math.max(0.1,cC/cw.ticks().length),cz=cs===ce?(cA=-1e-12,Math.floor):(cA=1e-12,Math.ceil),cA;return function(cD){return cD/ct(cx*cz(cs(cD)/cx+cA))<=cy?cB(cD):""}};cw.copy=function(){return b0(e.copy(),cv,cs,ct,cu)};return bN(cw,e)}var ci=bJ.format(".0e");function cd(e){return Math.log(e<0?0:e)}function a5(e){return Math.exp(e)}function ce(e){return -Math.log(e>0?0:-e)}function a8(e){return -Math.exp(-e)}bJ.scale.pow=function(){return bG(bJ.scale.linear(),1,[0,1])};function bG(e,cu,ct){var cs=C(cu),cv=C(1/cu);function cw(cx){return e(cs(cx))}cw.invert=function(cx){return cv(e.invert(cx))};cw.domain=function(cx){if(!arguments.length){return ct}e.domain((ct=cx.map(Number)).map(cs));return cw};cw.ticks=function(cx){return H(ct,cx)};cw.tickFormat=function(cx,cy){return a(ct,cx,cy)};cw.nice=function(cx){return cw.domain(aj(ct,cx))};cw.exponent=function(cx){if(!arguments.length){return cu}cs=C(cu=cx);cv=C(1/cu);e.domain(ct.map(cs));return cw};cw.copy=function(){return bG(e.copy(),cu,ct)};return bN(cw,e)}function C(cs){return function(e){return e<0?-Math.pow(-e,cs):Math.pow(e,cs)}}bJ.scale.sqrt=function(){return bJ.scale.pow().exponent(0.5)};bJ.scale.ordinal=function(){return m([],{t:"range",a:[[]]})};function m(cw,ct){var cv,cs,cu;function cx(cy){return cs[((cv.get(cy)||cv.set(cy,cw.push(cy)))-1)%cs.length]}function e(cz,cy){return bJ.range(cw.length).map(function(cA){return cz+cy*cA})}cx.domain=function(cy){if(!arguments.length){return cw}cw=[];cv=new bg;var cA=-1,cB=cy.length,cz;while(++cA<cB){if(!cv.has(cz=cy[cA])){cv.set(cz,cw.push(cz))}}return cx[ct.t].apply(cx,ct.a)};cx.range=function(cy){if(!arguments.length){return cs}cs=cy;cu=0;ct={t:"range",a:arguments};return cx};cx.rangePoints=function(cy,cB){if(arguments.length<2){cB=0}var cC=cy[0],cz=cy[1],cA=(cz-cC)/(Math.max(1,cw.length-1)+cB);cs=e(cw.length<2?(cC+cz)/2:cC+cA*cB/2,cA);cu=0;ct={t:"rangePoints",a:arguments};return cx};cx.rangeBands=function(cz,cD,cy){if(arguments.length<2){cD=0}if(arguments.length<3){cy=cD}var cA=cz[1]<cz[0],cE=cz[cA-0],cB=cz[1-cA],cC=(cB-cE)/(cw.length-cD+2*cy);cs=e(cE+cC*cy,cC);if(cA){cs.reverse()}cu=cC*(1-cD);ct={t:"rangeBands",a:arguments};return cx};cx.rangeRoundBands=function(cz,cE,cy){if(arguments.length<2){cE=0}if(arguments.length<3){cy=cE}var cB=cz[1]<cz[0],cF=cz[cB-0],cC=cz[1-cB],cD=Math.floor((cC-cF)/(cw.length-cE+2*cy)),cA=cC-cF-(cw.length-cE)*cD;cs=e(cF+Math.round(cA/2),cD);if(cB){cs.reverse()}cu=Math.round(cD*(1-cE));ct={t:"rangeRoundBands",a:arguments};return cx};cx.rangeBand=function(){return cu};cx.rangeExtent=function(){return ac(ct.a[0])};cx.copy=function(){return m(cw,ct)};return cx.domain(cw)}bJ.scale.category10=function(){return bJ.scale.ordinal().range(am)};bJ.scale.category20=function(){return bJ.scale.ordinal().range(U)};bJ.scale.category20b=function(){return bJ.scale.ordinal().range(a1)};bJ.scale.category20c=function(){return bJ.scale.ordinal().range(aZ)};var am=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];var U=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];var a1=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"];var aZ=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];bJ.ascending=function(cs,e){return cs<e?-1:cs>e?1:cs>=e?0:NaN};bJ.quantile=function(ct,cx){var cu=(ct.length-1)*cx+1,cv=Math.floor(cu),cs=+ct[cv-1],cw=cu-cv;return cw?cs+cw*(ct[cv]-cs):cs};bJ.scale.quantile=function(){return aD([],[])};function aD(ct,cs){var cu;function e(){var cw=0,cx=cs.length;cu=[];while(++cw<cx){cu[cw-1]=bJ.quantile(ct,cw/cx)}return cv}function cv(cw){if(isNaN(cw=+cw)){return NaN}return cs[bJ.bisect(cu,cw)]}cv.domain=function(cw){if(!arguments.length){return ct}ct=cw.filter(function(cx){return !isNaN(cx)}).sort(bJ.ascending);return e()};cv.range=function(cw){if(!arguments.length){return cs}cs=cw;return e()};cv.quantiles=function(){return cu};cv.copy=function(){return aD(ct,cs)};return e()}bJ.scale.quantize=function(){return W(0,1,[0,1])};function W(cv,ct,cs){var cw,cu;function cx(cy){return cs[Math.max(0,Math.min(cu,Math.floor(cw*(cy-cv))))]}function e(){cw=cs.length/(ct-cv);cu=cs.length-1;return cx}cx.domain=function(cy){if(!arguments.length){return[cv,ct]}cv=+cy[0];ct=+cy[cy.length-1];return e()};cx.range=function(cy){if(!arguments.length){return cs}cs=cy;return e()};cx.copy=function(){return W(cv,ct,cs)};cx.invertExtent=function(cy){cy=cs.indexOf(cy);cy=cy<0?NaN:cy/cw+cv;return[cy,cy+1/cw]};return e()}bJ.scale.threshold=function(){return q([0.5],[0,1])};function q(cs,e){function ct(cu){return e[bJ.bisect(cs,cu)]}ct.domain=function(cu){if(!arguments.length){return cs}cs=cu;return ct};ct.range=function(cu){if(!arguments.length){return e}e=cu;return ct};ct.invertExtent=function(cu){cu=e.indexOf(cu);return[cs[cu-1],cs[cu]]};ct.copy=function(){return q(cs,e)};return ct}bJ.scale.identity=function(){return bj([0,1])};function bj(cs){function e(ct){return +ct}e.invert=e;e.domain=e.range=function(ct){if(!arguments.length){return cs}cs=ct.map(e);return e};e.ticks=function(ct){return H(cs,ct)};e.tickFormat=function(ct,cu){return a(cs,ct,cu)};e.copy=function(){return bj(cs)};return e}var bd=ap;function cc(cs){var e=-1,cu=cs.length,ct=[];while(++e<cu){ct.push(cs[e])}return ct}function ap(e){return Array.prototype.slice.call(e)}try{bd(cp.childNodes)[0].nodeType}catch(bC){bd=cc}var aX=[].__proto__?function(cs,e){cs.__proto__=e}:function(ct,e){for(var cs in e){ct[cs]=e[cs]}};function R(ct,cs){if(cs in ct){return cs}cs=cs.charAt(0).toUpperCase()+cs.substring(1);for(var cu=0,cv=b7.length;cu<cv;++cu){var e=b7[cu]+cs;if(e in ct){return e}}}var b7=["webkit","ms","moz","Moz","o","O"];function f(e){aX(e,an);return e}var bb=function(e,cs){return cs.querySelector(e)},bk=function(e,cs){return cs.querySelectorAll(e)},cn=cp[R(cp,"matchesSelector")],cl=function(cs,e){return cn.call(cs,e)};if(typeof Sizzle==="function"){bb=function(e,cs){return Sizzle(e,cs)[0]||null};bk=function(e,cs){return Sizzle.uniqueSort(Sizzle(e,cs))};cl=Sizzle.matchesSelector}bJ.selection=function(){return ba};var an=bJ.selection.prototype=[];an.select=function(cw){var ct=[],cA,e,cz,cu;if(typeof cw!=="function"){cw=aF(cw)}for(var cx=-1,cv=this.length;++cx<cv;){ct.push(cA=[]);cA.parentNode=(cz=this[cx]).parentNode;for(var cy=-1,cs=cz.length;++cy<cs;){if(cu=cz[cy]){cA.push(e=cw.call(cu,cu.__data__,cy));if(e&&"__data__" in cu){e.__data__=cu.__data__}}else{cA.push(null)}}}return f(ct)};function aF(e){return function(){return bb(e,this)}}an.selectAll=function(cv){var cs=[],cz,ct;if(typeof cv!=="function"){cv=w(cv)}for(var cw=-1,cu=this.length;++cw<cu;){for(var cy=this[cw],cx=-1,e=cy.length;++cx<e;){if(ct=cy[cx]){cs.push(cz=bd(cv.call(ct,ct.__data__,cx)));cz.parentNode=ct}}}return f(cs)};function w(e){return function(){return bk(e,this)}}an.attr=function(e,ct){if(arguments.length<2){if(typeof e==="string"){var cs=this.node();e=bJ.ns.qualify(e);return e.local?cs.getAttributeNS(e.space,e.local):cs.getAttribute(e)}for(ct in e){this.each(az(ct,e[ct]))}return this}return this.each(az(e,ct))};function az(ct,cx){ct=bJ.ns.qualify(ct);function cs(){this.removeAttribute(ct)}function cy(){this.removeAttributeNS(ct.space,ct.local)}function cw(){this.setAttribute(ct,cx)}function cv(){this.setAttributeNS(ct.space,ct.local,cx)}function e(){var cz=cx.apply(this,arguments);if(cz==null){this.removeAttribute(ct)}else{this.setAttribute(ct,cz)}}function cu(){var cz=cx.apply(this,arguments);if(cz==null){this.removeAttributeNS(ct.space,ct.local)}else{this.setAttributeNS(ct.space,ct.local,cz)}}return cx==null?(ct.local?cy:cs):(typeof cx==="function"?(ct.local?cu:e):(ct.local?cv:cw))}function bS(e){return e.trim().replace(/\s+/g," ")}bJ.requote=function(e){return e.replace(aV,"\\$&")};var aV=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;an.classed=function(e,cu){if(arguments.length<2){if(typeof e==="string"){var ct=this.node(),cv=(e=e.trim().split(/^|\s+/g)).length,cs=-1;if(cu=ct.classList){while(++cs<cv){if(!cu.contains(e[cs])){return false}}}else{cu=ct.getAttribute("class");while(++cs<cv){if(!bK(e[cs]).test(cu)){return false}}}return true}for(cu in e){this.each(aq(cu,e[cu]))}return this}return this.each(aq(e,cu))};function bK(e){return new RegExp("(?:^|\\s+)"+bJ.requote(e)+"(?:\\s+|$)","g")}function aq(cs,cu){cs=cs.trim().split(/\s+/).map(cr);var cv=cs.length;function e(){var cw=-1;while(++cw<cv){cs[cw](this,cu)}}function ct(){var cx=-1,cw=cu.apply(this,arguments);while(++cx<cv){cs[cx](this,cw)}}return typeof cu==="function"?ct:e}function cr(e){var cs=bK(e);return function(ct,cu){if(cv=ct.classList){return cu?cv.add(e):cv.remove(e)}var cv=ct.getAttribute("class")||"";if(cu){cs.lastIndex=0;if(!cs.test(cv)){ct.setAttribute("class",bS(cv+" "+e))}}else{ct.setAttribute("class",bS(cv.replace(cs," ")))}}}an.style=function(e,ct,cs){var cu=arguments.length;if(cu<3){if(typeof e!=="string"){if(cu<2){ct=""}for(cs in e){this.each(co(cs,e[cs],ct))}return this}if(cu<2){return aM.getComputedStyle(this.node(),null).getPropertyValue(e)}cs=""}return this.each(co(e,ct,cs))};function co(ct,cw,cu){function cs(){this.style.removeProperty(ct)}function cv(){this.style.setProperty(ct,cw,cu)}function e(){var cx=cw.apply(this,arguments);if(cx==null){this.style.removeProperty(ct)}else{this.style.setProperty(ct,cx,cu)}}return cw==null?cs:(typeof cw==="function"?e:cv)}an.property=function(e,cs){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]}for(cs in e){this.each(b6(cs,e[cs]))}return this}return this.each(b6(e,cs))};function b6(cs,cu){function e(){delete this[cs]}function ct(){this[cs]=cu}function cv(){var cw=cu.apply(this,arguments);if(cw==null){delete this[cs]}else{this[cs]=cw}}return cu==null?e:(typeof cu==="function"?cv:ct)}an.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var cs=e.apply(this,arguments);this.textContent=cs==null?"":cs}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};an.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var cs=e.apply(this,arguments);this.innerHTML=cs==null?"":cs}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};an.append=function(cs){cs=bJ.ns.qualify(cs);function e(){return this.appendChild(bR.createElementNS(this.namespaceURI,cs))}function ct(){return this.appendChild(bR.createElementNS(cs.space,cs.local))}return this.select(cs.local?ct:e)};an.insert=function(e,ct){e=bJ.ns.qualify(e);if(typeof ct!=="function"){ct=aF(ct)}function cs(cw,cv){return this.insertBefore(bR.createElementNS(this.namespaceURI,e),ct.call(this,cw,cv))}function cu(cw,cv){return this.insertBefore(bR.createElementNS(e.space,e.local),ct.call(this,cw,cv))}return this.select(e.local?cu:cs)};an.remove=function(){return this.each(function(){var e=this.parentNode;if(e){e.removeChild(this)}})};an.data=function(cy,cA){var cv=-1,cs=this.length,cz,ct;if(!arguments.length){cy=new Array(cs=(cz=this[0]).length);while(++cv<cs){if(ct=cz[cv]){cy[cv]=ct.__data__}}return cy}function cw(cK,cF){var cH,cC=cK.length,cE=cF.length,cJ=Math.min(cC,cE),cO=new Array(cE),cL=new Array(cE),cI=new Array(cC),cD,cB;if(cA){var cP=new bg,cM=new bg,cN=[],cG;for(cH=-1;++cH<cC;){cG=cA.call(cD=cK[cH],cD.__data__,cH);if(cP.has(cG)){cI[cH]=cD}else{cP.set(cG,cD)}cN.push(cG)}for(cH=-1;++cH<cE;){cG=cA.call(cF,cB=cF[cH],cH);if(cD=cP.get(cG)){cO[cH]=cD;cD.__data__=cB}else{if(!cM.has(cG)){cL[cH]=s(cB)}}cM.set(cG,cB);cP.remove(cG)}for(cH=-1;++cH<cC;){if(cP.has(cN[cH])){cI[cH]=cK[cH]}}}else{for(cH=-1;++cH<cJ;){cD=cK[cH];cB=cF[cH];if(cD){cD.__data__=cB;cO[cH]=cD}else{cL[cH]=s(cB)}}for(;cH<cE;++cH){cL[cH]=s(cF[cH])}for(;cH<cC;++cH){cI[cH]=cK[cH]}}cL.update=cO;cL.parentNode=cO.parentNode=cI.parentNode=cK.parentNode;cx.push(cL);cu.push(cO);e.push(cI)}var cx=bu([]),cu=f([]),e=f([]);if(typeof cy==="function"){while(++cv<cs){cw(cz=this[cv],cy.call(cz,cz.parentNode.__data__,cv))}}else{while(++cv<cs){cw(cz=this[cv],cy)}}cu.enter=function(){return cx};cu.exit=function(){return e};return cu};function s(e){return{__data__:e}}an.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};an.filter=function(e){var ct=[],cz,cy,cu;if(typeof e!=="function"){e=bO(e)}for(var cw=0,cv=this.length;cw<cv;cw++){ct.push(cz=[]);cz.parentNode=(cy=this[cw]).parentNode;for(var cx=0,cs=cy.length;cx<cs;cx++){if((cu=cy[cx])&&e.call(cu,cu.__data__,cx)){cz.push(cu)}}}return f(ct)};function bO(e){return function(){return cl(this,e)}}an.order=function(){for(var cs=-1,e=this.length;++cs<e;){for(var cw=this[cs],ct=cw.length-1,cu=cw[ct],cv;--ct>=0;){if(cv=cw[ct]){if(cu&&cu!==cv.nextSibling){cu.parentNode.insertBefore(cv,cu)}cu=cv}}}return this};an.sort=function(cs){cs=h.apply(this,arguments);for(var ct=-1,e=this.length;++ct<e;){this[ct].sort(cs)}return this.order()};function h(e){if(!arguments.length){e=bJ.ascending}return function(ct,cs){return(!ct-!cs)||e(ct.__data__,cs.__data__)}}function A(){}bJ.dispatch=function(){var e=new Q,cs=-1,ct=arguments.length;while(++cs<ct){e[arguments[cs]]=ch(e)}return e};function Q(){}Q.prototype.on=function(ct,cu){var cs=ct.indexOf("."),e="";if(cs>=0){e=ct.substring(cs+1);ct=ct.substring(0,cs)}if(ct){return arguments.length<2?this[ct].on(e):this[ct].on(e,cu)}if(arguments.length===2){if(cu==null){for(ct in this){if(this.hasOwnProperty(ct)){this[ct].on(e,null)}}}return this}};function ch(e){var ct=[],cs=new bg;function cu(){var cx=ct,cw=-1,cy=cx.length,cv;while(++cw<cy){if(cv=cx[cw].on){cv.apply(this,arguments)}}return e}cu.on=function(cw,cy){var cv=cs.get(cw),cx;if(arguments.length<2){return cv&&cv.on}if(cv){cv.on=null;ct=ct.slice(0,cx=ct.indexOf(cv)).concat(ct.slice(cx+1));cs.remove(cw)}if(cy){ct.push(cs.set(cw,{on:cy}))}return e};return cu}bJ.event=null;function b(){bJ.event.stopPropagation();bJ.event.preventDefault()}function ad(){var ct=bJ.event,cs;while(cs=ct.sourceEvent){ct=cs}return ct}function y(cs,e){function ct(){cs.on(e,null)}cs.on(e,function(){b();ct()},true);setTimeout(ct,0)}function bA(ct){var e=new Q,cs=0,cu=arguments.length;while(++cs<cu){e[arguments[cs]]=ch(e)}e.of=function(cw,cv){return function(cx){try{var cy=cx.sourceEvent=bJ.event;cx.target=ct;bJ.event=cx;e[cx.type].apply(cw,cv)}finally{bJ.event=cy}}};return e}an.on=function(cs,ct,e){var cu=arguments.length;if(cu<3){if(typeof cs!=="string"){if(cu<2){ct=false}for(e in cs){this.each(bp(e,cs[e],ct))}return this}if(cu<2){return(cu=this.node()["__on"+cs])&&cu._}e=false}return this.each(bp(cs,ct,e))};function bp(cz,cu,cA){var e="__on"+cz,cw=cz.indexOf("."),cs=be;if(cw>0){cz=cz.substring(0,cw)}var ct=aP.get(cz);if(ct){cz=ct,cs=bW}function cv(){var cB=this[e];if(cB){this.removeEventListener(cz,cB,cB.$);delete this[e]}}function cy(){var cB=cs(cu,bd(arguments));cv.call(this);this.addEventListener(cz,this[e]=cB,cB.$=cA);cB._=cu}function cx(){var cE=new RegExp("^__on([^.]+)"+bJ.requote(cz)+"$"),cD;for(var cC in this){if(cD=cC.match(cE)){var cB=this[cC];this.removeEventListener(cD[1],cB,cB.$);delete this[cC]}}}return cw?cu?cy:cv:cu?A:cx}var aP=bJ.map({mouseenter:"mouseover",mouseleave:"mouseout"});aP.forEach(function(e){if("on"+e in bR){aP.remove(e)}});function be(cs,e){return function(ct){var cu=bJ.event;bJ.event=ct;e[0]=this.__data__;try{cs.apply(this,e)}finally{bJ.event=cu}}}function bW(ct,e){var cs=be(ct,e);return function(cw){var cv=this,cu=cw.relatedTarget;if(!cu||(cu!==cv&&!(cu.compareDocumentPosition(cv)&8))){cs.call(cv,cw)}}}an.each=function(e){return ak(this,function(cu,ct,cs){e.call(cu,cu.__data__,ct,cs)})};function ak(cs,cy){for(var ct=0,e=cs.length;ct<e;ct++){for(var cw=cs[ct],cu=0,cx=cw.length,cv;cu<cx;cu++){if(cv=cw[cu]){cy(cv,cu,ct)}}}return cs}an.call=function(cs){var e=bd(arguments);cs.apply(e[0]=this,e);return this};an.empty=function(){return !this.node()};an.node=function(){for(var cs=0,e=this.length;cs<e;cs++){for(var cv=this[cs],ct=0,cw=cv.length;ct<cw;ct++){var cu=cv[ct];if(cu){return cu}}}return null};an.size=function(){var e=0;this.each(function(){++e});return e};function bu(e){aX(e,bo);return e}var bo=[];bJ.selection.enter=bu;bJ.selection.enter.prototype=bo;bo.append=an.append;bo.insert=an.insert;bo.empty=an.empty;bo.node=an.node;bo.call=an.call;bo.size=an.size;bo.select=function(cw){var ct=[],cB,e,cz,cA,cv;for(var cx=-1,cu=this.length;++cx<cu;){cz=(cA=this[cx]).update;ct.push(cB=[]);cB.parentNode=cA.parentNode;for(var cy=-1,cs=cA.length;++cy<cs;){if(cv=cA[cy]){cB.push(cz[cy]=e=cw.call(cA.parentNode,cv.__data__,cy));e.__data__=cv.__data__}else{cB.push(null)}}}return f(ct)};an.transition=function(){var e=d3_transitionInheritId||++d3_transitionId,ct=[],cA,cu,cy=Object.create(d3_transitionInherit);cy.time=Date.now();for(var cw=-1,cv=this.length;++cw<cv;){ct.push(cA=[]);for(var cz=this[cw],cx=-1,cs=cz.length;++cx<cs;){if(cu=cz[cx]){d3_transitionNode(cu,cx,e,cy)}cA.push(cu)}}return d3_transition(ct,e)};bJ.select=function(e){var cs=[typeof e==="string"?bb(e,bR):e];cs.parentNode=cp;return f([cs])};bJ.selectAll=function(e){var cs=bd(typeof e==="string"?bk(e,bR):e);cs.parentNode=cp;return f([cs])};var ba=bJ.select(cp);var aH=aH||{REVISION:"58"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};self.Int32Array=self.Int32Array||Array;self.Float32Array=self.Float32Array||Array;String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};aH.extend=function(cw,cv){if(Object.keys){var cu=Object.keys(cv);for(var ct=0,cs=cu.length;ct<cs;ct++){var cx=cu[ct];Object.defineProperty(cw,cx,Object.getOwnPropertyDescriptor(cv,cx))}}else{var e={}.hasOwnProperty;for(var cx in cv){if(e.call(cv,cx)){cw[cx]=cv[cx]}}}return cw};(function(){var cs=0;var ct=["ms","moz","webkit","o"];for(var e=0;e<ct.length&&!window.requestAnimationFrame;++e){window.requestAnimationFrame=window[ct[e]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[ct[e]+"CancelAnimationFrame"]||window[ct[e]+"CancelRequestAnimationFrame"]}if(window.requestAnimationFrame===undefined){window.requestAnimationFrame=function(cx){var cu=Date.now(),cv=Math.max(0,16-(cu-cs));var cw=window.setTimeout(function(){cx(cu+cv)},cv);cs=cu+cv;return cw}}window.cancelAnimationFrame=window.cancelAnimationFrame||function(cu){window.clearTimeout(cu)}}());aH.CullFaceNone=0;aH.CullFaceBack=1;aH.CullFaceFront=2;aH.CullFaceFrontBack=3;aH.FrontFaceDirectionCW=0;aH.FrontFaceDirectionCCW=1;aH.BasicShadowMap=0;aH.PCFShadowMap=1;aH.PCFSoftShadowMap=2;aH.FrontSide=0;aH.BackSide=1;aH.DoubleSide=2;aH.NoShading=0;aH.FlatShading=1;aH.SmoothShading=2;aH.NoColors=0;aH.FaceColors=1;aH.VertexColors=2;aH.NoBlending=0;aH.NormalBlending=1;aH.AdditiveBlending=2;aH.SubtractiveBlending=3;aH.MultiplyBlending=4;aH.CustomBlending=5;aH.AddEquation=100;aH.SubtractEquation=101;aH.ReverseSubtractEquation=102;aH.ZeroFactor=200;aH.OneFactor=201;aH.SrcColorFactor=202;aH.OneMinusSrcColorFactor=203;aH.SrcAlphaFactor=204;aH.OneMinusSrcAlphaFactor=205;aH.DstAlphaFactor=206;aH.OneMinusDstAlphaFactor=207;aH.DstColorFactor=208;aH.OneMinusDstColorFactor=209;aH.SrcAlphaSaturateFactor=210;aH.MultiplyOperation=0;aH.MixOperation=1;aH.AddOperation=2;aH.UVMapping=function(){};aH.CubeReflectionMapping=function(){};aH.CubeRefractionMapping=function(){};aH.SphericalReflectionMapping=function(){};aH.SphericalRefractionMapping=function(){};aH.RepeatWrapping=1000;aH.ClampToEdgeWrapping=1001;aH.MirroredRepeatWrapping=1002;aH.NearestFilter=1003;aH.NearestMipMapNearestFilter=1004;aH.NearestMipMapLinearFilter=1005;aH.LinearFilter=1006;aH.LinearMipMapNearestFilter=1007;aH.LinearMipMapLinearFilter=1008;aH.UnsignedByteType=1009;aH.ByteType=1010;aH.ShortType=1011;aH.UnsignedShortType=1012;aH.IntType=1013;aH.UnsignedIntType=1014;aH.FloatType=1015;aH.UnsignedShort4444Type=1016;aH.UnsignedShort5551Type=1017;aH.UnsignedShort565Type=1018;aH.AlphaFormat=1019;aH.RGBFormat=1020;aH.RGBAFormat=1021;aH.LuminanceFormat=1022;aH.LuminanceAlphaFormat=1023;aH.RGB_S3TC_DXT1_Format=2001;aH.RGBA_S3TC_DXT1_Format=2002;aH.RGBA_S3TC_DXT3_Format=2003;aH.RGBA_S3TC_DXT5_Format=2004;aH.Color=function(e){if(e!==undefined){this.set(e)}return this};aH.Color.prototype={constructor:aH.Color,r:1,g:1,b:1,set:function(e){if(e instanceof aH.Color){this.copy(e)}else{if(typeof e==="number"){this.setHex(e)}else{if(typeof e==="string"){this.setStyle(e)}}}return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(ct,cs,e){this.r=ct;this.g=cs;this.b=e;return this},setHSL:function(cu,ct,cs){if(ct===0){this.r=this.g=this.b=cs}else{var e=function(cz,cy,cx){if(cx<0){cx+=1}if(cx>1){cx-=1}if(cx<1/6){return cz+(cy-cz)*6*cx}if(cx<1/2){return cy}if(cx<2/3){return cz+(cy-cz)*6*(2/3-cx)}return cz};var cw=cs<=0.5?cs*(1+ct):cs+ct-(cs*ct);var cv=(2*cs)-cw;this.r=e(cv,cw,cu+1/3);this.g=e(cv,cw,cu);this.b=e(cv,cw,cu-1/3)}return this},setStyle:function(cs){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(cs)){var e=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(cs);this.r=Math.min(255,parseInt(e[1],10))/255;this.g=Math.min(255,parseInt(e[2],10))/255;this.b=Math.min(255,parseInt(e[3],10))/255;return this}if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(cs)){var e=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(cs);this.r=Math.min(100,parseInt(e[1],10))/100;this.g=Math.min(100,parseInt(e[2],10))/100;this.b=Math.min(100,parseInt(e[3],10))/100;return this}if(/^\#([0-9a-f]{6})$/i.test(cs)){var e=/^\#([0-9a-f]{6})$/i.exec(cs);this.setHex(parseInt(e[1],16));return this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(cs)){var e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(cs);this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16));return this}if(/^(\w+)$/i.test(cs)){this.setHex(aH.ColorKeywords[cs]);return this}},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e){this.r=e.r*e.r;this.g=e.g*e.g;this.b=e.b*e.b;return this},copyLinearToGamma:function(e){this.r=Math.sqrt(e.r);this.g=Math.sqrt(e.g);this.b=Math.sqrt(e.b);return this},convertGammaToLinear:function(){var ct=this.r,cs=this.g,e=this.b;this.r=ct*ct;this.g=cs*cs;this.b=e*e;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return(this.r*255)<<16^(this.g*255)<<8^(this.b*255)<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(){var e={h:0,s:0,l:0};return function(){var cs=this.r,cv=this.g,cx=this.b;var cy=Math.max(cs,cv,cx);var ct=Math.min(cs,cv,cx);var cw,cu;var cA=(ct+cy)/2;if(ct===cy){cw=0;cu=0}else{var cz=cy-ct;cu=cA<=0.5?cz/(cy+ct):cz/(2-cy-ct);switch(cy){case cs:cw=(cv-cx)/cz+(cv<cx?6:0);break;case cv:cw=(cx-cs)/cz+2;break;case cx:cw=(cs-cv)/cz+4;break}cw/=6}e.h=cw;e.s=cu;e.l=cA;return e}}(),getStyle:function(){return"rgb("+((this.r*255)|0)+","+((this.g*255)|0)+","+((this.b*255)|0)+")"},offsetHSL:function(cu,ct,e){var cs=this.getHSL();cs.h+=cu;cs.s+=ct;cs.l+=e;this.setHSL(cs.h,cs.s,cs.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(cs,e){this.r=cs.r+e.r;this.g=cs.g+e.g;this.b=cs.b+e.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,cs){this.r+=(e.r-this.r)*cs;this.g+=(e.g-this.g)*cs;this.b+=(e.b-this.b)*cs;return this},equals:function(e){return(e.r===this.r)&&(e.g===this.g)&&(e.b===this.b)},clone:function(){return new aH.Color().setRGB(this.r,this.g,this.b)}};aH.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aH.Quaternion=function(e,cu,ct,cs){this.x=e||0;this.y=cu||0;this.z=ct||0;this.w=(cs!==undefined)?cs:1};aH.Quaternion.prototype={constructor:aH.Quaternion,set:function(e,cu,ct,cs){this.x=e;this.y=cu;this.z=ct;this.w=cs;return this},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w;return this},setFromEuler:function(ct,e){var cy=Math.cos(ct.x/2);var cx=Math.cos(ct.y/2);var cv=Math.cos(ct.z/2);var cw=Math.sin(ct.x/2);var cu=Math.sin(ct.y/2);var cs=Math.sin(ct.z/2);if(e===undefined||e==="XYZ"){this.x=cw*cx*cv+cy*cu*cs;this.y=cy*cu*cv-cw*cx*cs;this.z=cy*cx*cs+cw*cu*cv;this.w=cy*cx*cv-cw*cu*cs}else{if(e==="YXZ"){this.x=cw*cx*cv+cy*cu*cs;this.y=cy*cu*cv-cw*cx*cs;this.z=cy*cx*cs-cw*cu*cv;this.w=cy*cx*cv+cw*cu*cs}else{if(e==="ZXY"){this.x=cw*cx*cv-cy*cu*cs;this.y=cy*cu*cv+cw*cx*cs;this.z=cy*cx*cs+cw*cu*cv;this.w=cy*cx*cv-cw*cu*cs}else{if(e==="ZYX"){this.x=cw*cx*cv-cy*cu*cs;this.y=cy*cu*cv+cw*cx*cs;this.z=cy*cx*cs-cw*cu*cv;this.w=cy*cx*cv+cw*cu*cs}else{if(e==="YZX"){this.x=cw*cx*cv+cy*cu*cs;this.y=cy*cu*cv+cw*cx*cs;this.z=cy*cx*cs-cw*cu*cv;this.w=cy*cx*cv-cw*cu*cs}else{if(e==="XZY"){this.x=cw*cx*cv-cy*cu*cs;this.y=cy*cu*cv-cw*cx*cs;this.z=cy*cx*cs+cw*cu*cv;this.w=cy*cx*cv+cw*cu*cs}}}}}}return this},setFromAxisAngle:function(ct,cu){var e=cu/2,cs=Math.sin(e);this.x=ct.x*cs;this.y=ct.y*cs;this.z=ct.z*cs;this.w=Math.cos(e);return this},setFromRotationMatrix:function(cv){var cu=cv.elements,cz=cu[0],cy=cu[4],cx=cu[8],ct=cu[1],cs=cu[5],e=cu[9],cC=cu[2],cB=cu[6],cA=cu[10],cw=cz+cs+cA,cD;if(cw>0){cD=0.5/Math.sqrt(cw+1);this.w=0.25/cD;this.x=(cB-e)*cD;this.y=(cx-cC)*cD;this.z=(ct-cy)*cD}else{if(cz>cs&&cz>cA){cD=2*Math.sqrt(1+cz-cs-cA);this.w=(cB-e)/cD;this.x=0.25*cD;this.y=(cy+ct)/cD;this.z=(cx+cC)/cD}else{if(cs>cA){cD=2*Math.sqrt(1+cs-cz-cA);this.w=(cx-cC)/cD;this.x=(cy+ct)/cD;this.y=0.25*cD;this.z=(e+cB)/cD}else{cD=2*Math.sqrt(1+cA-cz-cs);this.w=(ct-cy)/cD;this.x=(cx+cC)/cD;this.y=(e+cB)/cD;this.z=0.25*cD}}}return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=this.length();if(e===0){this.x=0;this.y=0;this.z=0;this.w=1}else{e=1/e;this.x=this.x*e;this.y=this.y*e;this.z=this.z*e;this.w=this.w*e}return this},multiply:function(e,cs){if(cs!==undefined){console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,cs)}return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(cA,cz){var cx=cA.x,cw=cA.y,cv=cA.z,cy=cA.w;var ct=cz.x,cs=cz.y,e=cz.z,cu=cz.w;this.x=cx*cu+cy*ct+cw*e-cv*cs;this.y=cw*cu+cy*cs+cv*ct-cx*e;this.z=cv*cu+cy*e+cx*cs-cw*ct;this.w=cy*cu-cx*ct-cw*cs-cv*e;return this},multiplyVector3:function(e){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)},slerp:function(ct,cB){var cz=this.x,cy=this.y,cx=this.z,cA=this.w;var cs=cA*ct.w+cz*ct.x+cy*ct.y+cx*ct.z;if(cs<0){this.w=-ct.w;this.x=-ct.x;this.y=-ct.y;this.z=-ct.z;cs=-cs}else{this.copy(ct)}if(cs>=1){this.w=cA;this.x=cz;this.y=cy;this.z=cx;return this}var cu=Math.acos(cs);var e=Math.sqrt(1-cs*cs);if(Math.abs(e)<0.001){this.w=0.5*(cA+this.w);this.x=0.5*(cz+this.x);this.y=0.5*(cy+this.y);this.z=0.5*(cx+this.z);return this}var cw=Math.sin((1-cB)*cu)/e,cv=Math.sin(cB*cu)/e;this.w=(cA*cw+this.w*cv);this.x=(cz*cw+this.x*cv);this.y=(cy*cw+this.y*cv);this.z=(cx*cw+this.z*cv);return this},equals:function(e){return((e.x===this.x)&&(e.y===this.y)&&(e.z===this.z)&&(e.w===this.w))},fromArray:function(e){this.x=e[0];this.y=e[1];this.z=e[2];this.w=e[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new aH.Quaternion(this.x,this.y,this.z,this.w)}};aH.Quaternion.slerp=function(cu,ct,cs,e){return cs.copy(cu).slerp(ct,e)};aH.Vector2=function(e,cs){this.x=e||0;this.y=cs||0};aH.Vector2.prototype={constructor:aH.Vector2,set:function(e,cs){this.x=e;this.y=cs;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,cs){switch(e){case 0:this.x=cs;break;case 1:this.y=cs;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(cs,e)}this.x+=cs.x;this.y+=cs.y;return this},addVectors:function(cs,e){this.x=cs.x+e.x;this.y=cs.y+e.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},sub:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(cs,e)}this.x-=cs.x;this.y-=cs.y;return this},subVectors:function(cs,e){this.x=cs.x-e.x;this.y=cs.y-e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divideScalar:function(e){if(e!==0){this.x/=e;this.y/=e}else{this.set(0,0)}return this},min:function(e){if(this.x>e.x){this.x=e.x}if(this.y>e.y){this.y=e.y}return this},max:function(e){if(this.x<e.x){this.x=e.x}if(this.y<e.y){this.y=e.y}return this},clamp:function(cs,e){if(this.x<cs.x){this.x=cs.x}else{if(this.x>e.x){this.x=e.x}}if(this.y<cs.y){this.y=cs.y}else{if(this.y>e.y){this.y=e.y}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(ct){var cs=this.x-ct.x,e=this.y-ct.y;return cs*cs+e*e},setLength:function(e){var cs=this.length();if(cs!==0&&e!==cs){this.multiplyScalar(e/cs)}return this},lerp:function(e,cs){this.x+=(e.x-this.x)*cs;this.y+=(e.y-this.y)*cs;return this},equals:function(e){return((e.x===this.x)&&(e.y===this.y))},fromArray:function(e){this.x=e[0];this.y=e[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new aH.Vector2(this.x,this.y)}};aH.Vector3=function(e,ct,cs){this.x=e||0;this.y=ct||0;this.z=cs||0};aH.Vector3.prototype={constructor:aH.Vector3,set:function(e,ct,cs){this.x=e;this.y=ct;this.z=cs;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,cs){switch(e){case 0:this.x=cs;break;case 1:this.y=cs;break;case 2:this.z=cs;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(cs,e)}this.x+=cs.x;this.y+=cs.y;this.z+=cs.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(cs,e){this.x=cs.x+e.x;this.y=cs.y+e.y;this.z=cs.z+e.z;return this},sub:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(cs,e)}this.x-=cs.x;this.y-=cs.y;this.z-=cs.z;return this},subVectors:function(cs,e){this.x=cs.x-e.x;this.y=cs.y-e.y;this.z=cs.z-e.z;return this},multiply:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(cs,e)}this.x*=cs.x;this.y*=cs.y;this.z*=cs.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(cs,e){this.x=cs.x*e.x;this.y=cs.y*e.y;this.z=cs.z*e.z;return this},applyMatrix3:function(ct){var cs=this.x;var cw=this.y;var cv=this.z;var cu=ct.elements;this.x=cu[0]*cs+cu[3]*cw+cu[6]*cv;this.y=cu[1]*cs+cu[4]*cw+cu[7]*cv;this.z=cu[2]*cs+cu[5]*cw+cu[8]*cv;return this},applyMatrix4:function(ct){var cs=this.x,cw=this.y,cv=this.z;var cu=ct.elements;this.x=cu[0]*cs+cu[4]*cw+cu[8]*cv+cu[12];this.y=cu[1]*cs+cu[5]*cw+cu[9]*cv+cu[13];this.z=cu[2]*cs+cu[6]*cw+cu[10]*cv+cu[14];return this},applyProjection:function(ct){var cs=this.x,cx=this.y,cw=this.z;var cu=ct.elements;var cv=1/(cu[3]*cs+cu[7]*cx+cu[11]*cw+cu[15]);this.x=(cu[0]*cs+cu[4]*cx+cu[8]*cw+cu[12])*cv;this.y=(cu[1]*cs+cu[5]*cx+cu[9]*cw+cu[13])*cv;this.z=(cu[2]*cs+cu[6]*cx+cu[10]*cw+cu[14])*cv;return this},applyQuaternion:function(e){var cC=this.x;var cB=this.y;var cA=this.z;var cy=e.x;var cx=e.y;var cw=e.z;var cz=e.w;var cu=cz*cC+cx*cA-cw*cB;var ct=cz*cB+cw*cC-cy*cA;var cs=cz*cA+cy*cB-cx*cC;var cv=-cy*cC-cx*cB-cw*cA;this.x=cu*cz+cv*-cy+ct*-cw-cs*-cx;this.y=ct*cz+cv*-cx+cs*-cy-cu*-cw;this.z=cs*cz+cv*-cw+cu*-cx-ct*-cy;return this},transformDirection:function(ct){var cs=this.x,cw=this.y,cv=this.z;var cu=ct.elements;this.x=cu[0]*cs+cu[4]*cw+cu[8]*cv;this.y=cu[1]*cs+cu[5]*cw+cu[9]*cv;this.z=cu[2]*cs+cu[6]*cw+cu[10]*cv;this.normalize();return this},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){if(e!==0){this.x/=e;this.y/=e;this.z/=e}else{this.x=0;this.y=0;this.z=0}return this},min:function(e){if(this.x>e.x){this.x=e.x}if(this.y>e.y){this.y=e.y}if(this.z>e.z){this.z=e.z}return this},max:function(e){if(this.x<e.x){this.x=e.x}if(this.y<e.y){this.y=e.y}if(this.z<e.z){this.z=e.z}return this},clamp:function(cs,e){if(this.x<cs.x){this.x=cs.x}else{if(this.x>e.x){this.x=e.x}}if(this.y<cs.y){this.y=cs.y}else{if(this.y>e.y){this.y=e.y}}if(this.z<cs.z){this.z=cs.z}else{if(this.z>e.z){this.z=e.z}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var cs=this.length();if(cs!==0&&e!==cs){this.multiplyScalar(e/cs)}return this},lerp:function(e,cs){this.x+=(e.x-this.x)*cs;this.y+=(e.y-this.y)*cs;this.z+=(e.z-this.z)*cs;return this},cross:function(ct,cs){if(cs!==undefined){console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(ct,cs)}var e=this.x,cv=this.y,cu=this.z;this.x=cv*ct.z-cu*ct.y;this.y=cu*ct.x-e*ct.z;this.z=e*ct.y-cv*ct.x;return this},crossVectors:function(cs,e){this.x=cs.y*e.z-cs.z*e.y;this.y=cs.z*e.x-cs.x*e.z;this.z=cs.x*e.y-cs.y*e.x;return this},angleTo:function(e){var cs=this.dot(e)/(this.length()*e.length());return Math.acos(aH.Math.clamp(cs,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(cu){var ct=this.x-cu.x;var cs=this.y-cu.y;var e=this.z-cu.z;return ct*ct+cs*cs+e*e},setEulerFromRotationMatrix:function(cv,cw){function cz(cE){return Math.min(Math.max(cE,-1),1)}var cu=cv.elements;var cA=cu[0],cy=cu[4],cx=cu[8];var ct=cu[1],cs=cu[5],e=cu[9];var cD=cu[2],cC=cu[6],cB=cu[10];if(cw===undefined||cw==="XYZ"){this.y=Math.asin(cz(cx));if(Math.abs(cx)<0.99999){this.x=Math.atan2(-e,cB);this.z=Math.atan2(-cy,cA)}else{this.x=Math.atan2(cC,cs);this.z=0}}else{if(cw==="YXZ"){this.x=Math.asin(-cz(e));if(Math.abs(e)<0.99999){this.y=Math.atan2(cx,cB);this.z=Math.atan2(ct,cs)}else{this.y=Math.atan2(-cD,cA);this.z=0}}else{if(cw==="ZXY"){this.x=Math.asin(cz(cC));if(Math.abs(cC)<0.99999){this.y=Math.atan2(-cD,cB);this.z=Math.atan2(-cy,cs)}else{this.y=0;this.z=Math.atan2(ct,cA)}}else{if(cw==="ZYX"){this.y=Math.asin(-cz(cD));if(Math.abs(cD)<0.99999){this.x=Math.atan2(cC,cB);this.z=Math.atan2(ct,cA)}else{this.x=0;this.z=Math.atan2(-cy,cs)}}else{if(cw==="YZX"){this.z=Math.asin(cz(ct));if(Math.abs(ct)<0.99999){this.x=Math.atan2(-e,cs);this.y=Math.atan2(-cD,cA)}else{this.x=0;this.y=Math.atan2(cx,cB)}}else{if(cw==="XZY"){this.z=Math.asin(-cz(cy));if(Math.abs(cy)<0.99999){this.x=Math.atan2(cC,cs);this.y=Math.atan2(cx,cA)}else{this.x=Math.atan2(-e,cB);this.y=0}}}}}}}return this},setEulerFromQuaternion:function(cu,e){function cx(cy){return Math.min(Math.max(cy,-1),1)}var cv=cu.x*cu.x;var ct=cu.y*cu.y;var cs=cu.z*cu.z;var cw=cu.w*cu.w;if(e===undefined||e==="XYZ"){this.x=Math.atan2(2*(cu.x*cu.w-cu.y*cu.z),(cw-cv-ct+cs));this.y=Math.asin(cx(2*(cu.x*cu.z+cu.y*cu.w)));this.z=Math.atan2(2*(cu.z*cu.w-cu.x*cu.y),(cw+cv-ct-cs))}else{if(e==="YXZ"){this.x=Math.asin(cx(2*(cu.x*cu.w-cu.y*cu.z)));this.y=Math.atan2(2*(cu.x*cu.z+cu.y*cu.w),(cw-cv-ct+cs));this.z=Math.atan2(2*(cu.x*cu.y+cu.z*cu.w),(cw-cv+ct-cs))}else{if(e==="ZXY"){this.x=Math.asin(cx(2*(cu.x*cu.w+cu.y*cu.z)));this.y=Math.atan2(2*(cu.y*cu.w-cu.z*cu.x),(cw-cv-ct+cs));this.z=Math.atan2(2*(cu.z*cu.w-cu.x*cu.y),(cw-cv+ct-cs))}else{if(e==="ZYX"){this.x=Math.atan2(2*(cu.x*cu.w+cu.z*cu.y),(cw-cv-ct+cs));this.y=Math.asin(cx(2*(cu.y*cu.w-cu.x*cu.z)));this.z=Math.atan2(2*(cu.x*cu.y+cu.z*cu.w),(cw+cv-ct-cs))}else{if(e==="YZX"){this.x=Math.atan2(2*(cu.x*cu.w-cu.z*cu.y),(cw-cv+ct-cs));this.y=Math.atan2(2*(cu.y*cu.w-cu.x*cu.z),(cw+cv-ct-cs));this.z=Math.asin(cx(2*(cu.x*cu.y+cu.z*cu.w)))}else{if(e==="XZY"){this.x=Math.atan2(2*(cu.x*cu.w+cu.y*cu.z),(cw-cv+ct-cs));this.y=Math.atan2(2*(cu.x*cu.z+cu.y*cu.w),(cw+cv-ct-cs));this.z=Math.asin(cx(2*(cu.z*cu.w-cu.x*cu.y)))}}}}}}return this},getPositionFromMatrix:function(e){this.x=e.elements[12];this.y=e.elements[13];this.z=e.elements[14];return this},getScaleFromMatrix:function(e){var cu=this.set(e.elements[0],e.elements[1],e.elements[2]).length();var ct=this.set(e.elements[4],e.elements[5],e.elements[6]).length();var cs=this.set(e.elements[8],e.elements[9],e.elements[10]).length();this.x=cu;this.y=ct;this.z=cs;return this},getColumnFromMatrix:function(cs,e){var cu=cs*4;var ct=e.elements;this.x=ct[cu];this.y=ct[cu+1];this.z=ct[cu+2];return this},equals:function(e){return((e.x===this.x)&&(e.y===this.y)&&(e.z===this.z))},fromArray:function(e){this.x=e[0];this.y=e[1];this.z=e[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new aH.Vector3(this.x,this.y,this.z)}};aH.extend(aH.Vector3.prototype,{applyEuler:function(){var e=new aH.Quaternion();return function(cs,cu){var ct=e.setFromEuler(cs,cu);this.applyQuaternion(ct);return this}}(),applyAxisAngle:function(){var e=new aH.Quaternion();return function(cs,cu){var ct=e.setFromAxisAngle(cs,cu);this.applyQuaternion(ct);return this}}(),projectOnVector:function(){var e=new aH.Vector3();return function(cs){e.copy(cs).normalize();var ct=this.dot(e);return this.copy(e).multiplyScalar(ct)}}(),projectOnPlane:function(){var e=new aH.Vector3();return function(cs){e.copy(this).projectOnVector(cs);return this.sub(e)}}(),reflect:function(){var e=new aH.Vector3();return function(cs){e.copy(this).projectOnVector(cs).multiplyScalar(2);return this.subVectors(e,this)}}()});aH.Vector4=function(e,cu,ct,cs){this.x=e||0;this.y=cu||0;this.z=ct||0;this.w=(cs!==undefined)?cs:1};aH.Vector4.prototype={constructor:aH.Vector4,set:function(e,cu,ct,cs){this.x=e;this.y=cu;this.z=ct;this.w=cs;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,cs){switch(e){case 0:this.x=cs;break;case 1:this.y=cs;break;case 2:this.z=cs;break;case 3:this.w=cs;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=(e.w!==undefined)?e.w:1;return this},add:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(cs,e)}this.x+=cs.x;this.y+=cs.y;this.z+=cs.z;this.w+=cs.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(cs,e){this.x=cs.x+e.x;this.y=cs.y+e.y;this.z=cs.z+e.z;this.w=cs.w+e.w;return this},sub:function(cs,e){if(e!==undefined){console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(cs,e)}this.x-=cs.x;this.y-=cs.y;this.z-=cs.z;this.w-=cs.w;return this},subVectors:function(cs,e){this.x=cs.x-e.x;this.y=cs.y-e.y;this.z=cs.z-e.z;this.w=cs.w-e.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(ct){var cs=this.x;var cx=this.y;var cw=this.z;var cu=this.w;var cv=ct.elements;this.x=cv[0]*cs+cv[4]*cx+cv[8]*cw+cv[12]*cu;this.y=cv[1]*cs+cv[5]*cx+cv[9]*cw+cv[13]*cu;this.z=cv[2]*cs+cv[6]*cx+cv[10]*cw+cv[14]*cu;this.w=cv[3]*cs+cv[7]*cx+cv[11]*cw+cv[15]*cu;return this},divideScalar:function(e){if(e!==0){this.x/=e;this.y/=e;this.z/=e;this.w/=e}else{this.x=0;this.y=0;this.z=0;this.w=1}return this},setAxisAngleFromQuaternion:function(cs){this.w=2*Math.acos(cs.w);var e=Math.sqrt(1-cs.w*cs.w);if(e<0.0001){this.x=1;this.y=0;this.z=0}else{this.x=cs.x/e;this.y=cs.y/e;this.z=cs.z/e}return this},setAxisAngleFromRotationMatrix:function(cI){var cJ,cA,cz,cy,cO=0.01,cB=0.1,cx=cI.elements,cN=cx[0],cL=cx[4],cK=cx[8],cv=cx[1],ct=cx[5],e=cx[9],cH=cx[2],cF=cx[6],cD=cx[10];if((Math.abs(cL-cv)<cO)&&(Math.abs(cK-cH)<cO)&&(Math.abs(e-cF)<cO)){if((Math.abs(cL+cv)<cB)&&(Math.abs(cK+cH)<cB)&&(Math.abs(e+cF)<cB)&&(Math.abs(cN+ct+cD-3)<cB)){this.set(1,0,0,0);return this}cJ=Math.PI;var cw=(cN+1)/2;var cG=(ct+1)/2;var cM=(cD+1)/2;var cu=(cL+cv)/4;var cs=(cK+cH)/4;var cE=(e+cF)/4;if((cw>cG)&&(cw>cM)){if(cw<cO){cA=0;cz=0.707106781;cy=0.707106781}else{cA=Math.sqrt(cw);cz=cu/cA;cy=cs/cA}}else{if(cG>cM){if(cG<cO){cA=0.707106781;cz=0;cy=0.707106781}else{cz=Math.sqrt(cG);cA=cu/cz;cy=cE/cz}}else{if(cM<cO){cA=0.707106781;cz=0.707106781;cy=0}else{cy=Math.sqrt(cM);cA=cs/cy;cz=cE/cy}}}this.set(cA,cz,cy,cJ);return this}var cC=Math.sqrt((cF-e)*(cF-e)+(cK-cH)*(cK-cH)+(cv-cL)*(cv-cL));if(Math.abs(cC)<0.001){cC=1}this.x=(cF-e)/cC;this.y=(cK-cH)/cC;this.z=(cv-cL)/cC;this.w=Math.acos((cN+ct+cD-1)/2);return this},min:function(e){if(this.x>e.x){this.x=e.x}if(this.y>e.y){this.y=e.y}if(this.z>e.z){this.z=e.z}if(this.w>e.w){this.w=e.w}return this},max:function(e){if(this.x<e.x){this.x=e.x}if(this.y<e.y){this.y=e.y}if(this.z<e.z){this.z=e.z}if(this.w<e.w){this.w=e.w}return this},clamp:function(cs,e){if(this.x<cs.x){this.x=cs.x}else{if(this.x>e.x){this.x=e.x}}if(this.y<cs.y){this.y=cs.y}else{if(this.y>e.y){this.y=e.y}}if(this.z<cs.z){this.z=cs.z}else{if(this.z>e.z){this.z=e.z}}if(this.w<cs.w){this.w=cs.w}else{if(this.w>e.w){this.w=e.w}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var cs=this.length();if(cs!==0&&e!==cs){this.multiplyScalar(e/cs)}return this},lerp:function(e,cs){this.x+=(e.x-this.x)*cs;this.y+=(e.y-this.y)*cs;this.z+=(e.z-this.z)*cs;this.w+=(e.w-this.w)*cs;return this},equals:function(e){return((e.x===this.x)&&(e.y===this.y)&&(e.z===this.z)&&(e.w===this.w))},fromArray:function(e){this.x=e[0];this.y=e[1];this.z=e[2];this.w=e[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new aH.Vector4(this.x,this.y,this.z,this.w)}};aH.Line3=function(cs,e){this.start=(cs!==undefined)?cs:new aH.Vector3();this.end=(e!==undefined)?e:new aH.Vector3()};aH.Line3.prototype={constructor:aH.Line3,set:function(cs,e){this.start.copy(cs);this.end.copy(e);return this},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},center:function(cs){var e=cs||new aH.Vector3();return e.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(cs){var e=cs||new aH.Vector3();return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(ct,cs){var e=cs||new aH.Vector3();return this.delta(e).multiplyScalar(ct).add(this.start)},closestPointToPointParameter:function(){var cs=new aH.Vector3();var e=new aH.Vector3();return function(ct,cx){cs.subVectors(ct,this.start);e.subVectors(this.end,this.start);var cw=e.dot(e);var cv=e.dot(cs);var cu=cv/cw;if(cx){cu=aH.Math.clamp(cu,0,1)}return cu}}(),closestPointToPoint:function(cs,cv,cu){var ct=this.closestPointToPointParameter(cs,cv);var e=cu||new aH.Vector3();return this.delta(e).multiplyScalar(ct).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return new aH.Line3().copy(this)}};aH.Box2=function(cs,e){this.min=(cs!==undefined)?cs:new aH.Vector2(Infinity,Infinity);this.max=(e!==undefined)?e:new aH.Vector2(-Infinity,-Infinity)};aH.Box2.prototype={constructor:aH.Box2,set:function(cs,e){this.min.copy(cs);this.max.copy(e);return this},setFromPoints:function(cu){if(cu.length>0){var e=cu[0];this.min.copy(e);this.max.copy(e);for(var ct=1,cs=cu.length;ct<cs;ct++){e=cu[ct];if(e.x<this.min.x){this.min.x=e.x}else{if(e.x>this.max.x){this.max.x=e.x}}if(e.y<this.min.y){this.min.y=e.y}else{if(e.y>this.max.y){this.max.y=e.y}}}}else{this.makeEmpty()}return this},setFromCenterAndSize:function(){var e=new aH.Vector2();return function(cs,cu){var ct=e.copy(cu).multiplyScalar(0.5);this.min.copy(cs).sub(ct);this.max.copy(cs).add(ct);return this}}(),copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)},center:function(cs){var e=cs||new aH.Vector2();return e.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(cs){var e=cs||new aH.Vector2();return e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){if(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y){return false}return true},containsBox:function(e){if((this.min.x<=e.min.x)&&(e.max.x<=this.max.x)&&(this.min.y<=e.min.y)&&(e.max.y<=this.max.y)){return true}return false},getParameter:function(e){return new aH.Vector2((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){if(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y){return false}return true},clampPoint:function(cs,ct){var e=ct||new aH.Vector2();return e.copy(cs).clamp(this.min,this.max)},distanceToPoint:function(){var e=new aH.Vector2();return function(cs){var ct=e.copy(cs).clamp(this.min,this.max);return ct.sub(cs).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return new aH.Box2().copy(this)}};aH.Box3=function(cs,e){this.min=(cs!==undefined)?cs:new aH.Vector3(Infinity,Infinity,Infinity);this.max=(e!==undefined)?e:new aH.Vector3(-Infinity,-Infinity,-Infinity)};aH.Box3.prototype={constructor:aH.Box3,set:function(cs,e){this.min.copy(cs);this.max.copy(e);return this},setFromPoints:function(cu){if(cu.length>0){var e=cu[0];this.min.copy(e);this.max.copy(e);for(var ct=1,cs=cu.length;ct<cs;ct++){e=cu[ct];if(e.x<this.min.x){this.min.x=e.x}else{if(e.x>this.max.x){this.max.x=e.x}}if(e.y<this.min.y){this.min.y=e.y}else{if(e.y>this.max.y){this.max.y=e.y}}if(e.z<this.min.z){this.min.z=e.z}else{if(e.z>this.max.z){this.max.z=e.z}}}}else{this.makeEmpty()}return this},setFromCenterAndSize:function(){var e=new aH.Vector3();return function(cs,cu){var ct=e.copy(cu).multiplyScalar(0.5);this.min.copy(cs).sub(ct);this.max.copy(cs).add(ct);return this}}(),copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)||(this.max.z<this.min.z)},center:function(cs){var e=cs||new aH.Vector3();return e.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(cs){var e=cs||new aH.Vector3();return e.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){if(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z){return false}return true},containsBox:function(e){if((this.min.x<=e.min.x)&&(e.max.x<=this.max.x)&&(this.min.y<=e.min.y)&&(e.max.y<=this.max.y)&&(this.min.z<=e.min.z)&&(e.max.z<=this.max.z)){return true}return false},getParameter:function(e){return new aH.Vector3((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){if(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z){return false}return true},clampPoint:function(cs,ct){var e=ct||new aH.Vector3();return e.copy(cs).clamp(this.min,this.max)},distanceToPoint:function(){var e=new aH.Vector3();return function(cs){var ct=e.copy(cs).clamp(this.min,this.max);return ct.sub(cs).length()}}(),getBoundingSphere:function(){var e=new aH.Vector3();return function(ct){var cs=ct||new aH.Sphere();cs.center=this.center();cs.radius=this.size(e).length()*0.5;return cs}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3()];return function(cs){e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(cs);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(cs);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(cs);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(cs);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(cs);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(cs);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(cs);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(cs);this.makeEmpty();this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return new aH.Box3().copy(this)}};aH.Matrix3=function(cx,cw,cv,cu,ct,cs,e,cz,cy){this.elements=new Float32Array(9);this.set((cx!==undefined)?cx:1,cw||0,cv||0,cu||0,(ct!==undefined)?ct:1,cs||0,e||0,cz||0,(cy!==undefined)?cy:1)};aH.Matrix3.prototype={constructor:aH.Matrix3,set:function(cy,cx,cw,cv,cu,ct,e,cA,cz){var cs=this.elements;cs[0]=cy;cs[3]=cx;cs[6]=cw;cs[1]=cv;cs[4]=cu;cs[7]=ct;cs[2]=e;cs[5]=cA;cs[8]=cz;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(e){var cs=e.elements;this.set(cs[0],cs[3],cs[6],cs[1],cs[4],cs[7],cs[2],cs[5],cs[8]);return this},multiplyVector3:function(e){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(){var e=new aH.Vector3();return function(cs){for(var cu=0,ct=cs.length;cu<ct;cu+=3){e.x=cs[cu];e.y=cs[cu+1];e.z=cs[cu+2];e.applyMatrix3(this);cs[cu]=e.x;cs[cu+1]=e.y;cs[cu+2]=e.z}return cs}}(),multiplyScalar:function(e){var cs=this.elements;cs[0]*=e;cs[3]*=e;cs[6]*=e;cs[1]*=e;cs[4]*=e;cs[7]*=e;cs[2]*=e;cs[5]*=e;cs[8]*=e;return this},determinant:function(){var cs=this.elements;var cB=cs[0],cA=cs[1],cz=cs[2],cy=cs[3],cx=cs[4],cw=cs[5],cv=cs[6],cu=cs[7],ct=cs[8];return cB*cx*ct-cB*cw*cu-cA*cy*ct+cA*cw*cv+cz*cy*cu-cz*cx*cv},getInverse:function(cs,e){var cu=cs.elements;var cw=this.elements;cw[0]=cu[10]*cu[5]-cu[6]*cu[9];cw[1]=-cu[10]*cu[1]+cu[2]*cu[9];cw[2]=cu[6]*cu[1]-cu[2]*cu[5];cw[3]=-cu[10]*cu[4]+cu[6]*cu[8];cw[4]=cu[10]*cu[0]-cu[2]*cu[8];cw[5]=-cu[6]*cu[0]+cu[2]*cu[4];cw[6]=cu[9]*cu[4]-cu[5]*cu[8];cw[7]=-cu[9]*cu[0]+cu[1]*cu[8];cw[8]=cu[5]*cu[0]-cu[1]*cu[4];var ct=cu[0]*cw[0]+cu[1]*cw[3]+cu[2]*cw[6];if(ct===0){var cv="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e||false){throw new Error(cv)}else{console.warn(cv)}this.identity();return this}this.multiplyScalar(1/ct);return this},transpose:function(){var cs,e=this.elements;cs=e[1];e[1]=e[3];e[3]=cs;cs=e[2];e[2]=e[6];e[6]=cs;cs=e[5];e[5]=e[7];e[7]=cs;return this},getNormalMatrix:function(e){this.getInverse(e).transpose();return this},transposeIntoArray:function(cs){var e=this.elements;cs[0]=e[0];cs[1]=e[3];cs[2]=e[6];cs[3]=e[1];cs[4]=e[4];cs[5]=e[7];cs[6]=e[2];cs[7]=e[5];cs[8]=e[8];return this},clone:function(){var e=this.elements;return new aH.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}};aH.Matrix4=function(cE,cD,cB,cz,cw,cv,cu,ct,e,cH,cG,cF,cC,cA,cy,cx){var cs=this.elements=new Float32Array(16);cs[0]=(cE!==undefined)?cE:1;cs[4]=cD||0;cs[8]=cB||0;cs[12]=cz||0;cs[1]=cw||0;cs[5]=(cv!==undefined)?cv:1;cs[9]=cu||0;cs[13]=ct||0;cs[2]=e||0;cs[6]=cH||0;cs[10]=(cG!==undefined)?cG:1;cs[14]=cF||0;cs[3]=cC||0;cs[7]=cA||0;cs[11]=cy||0;cs[15]=(cx!==undefined)?cx:1};aH.Matrix4.prototype={constructor:aH.Matrix4,set:function(cE,cD,cB,cz,cw,cv,cu,ct,e,cH,cG,cF,cC,cA,cy,cx){var cs=this.elements;cs[0]=cE;cs[4]=cD;cs[8]=cB;cs[12]=cz;cs[1]=cw;cs[5]=cv;cs[9]=cu;cs[13]=ct;cs[2]=e;cs[6]=cH;cs[10]=cG;cs[14]=cF;cs[3]=cC;cs[7]=cA;cs[11]=cy;cs[15]=cx;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(e){var cs=e.elements;this.set(cs[0],cs[4],cs[8],cs[12],cs[1],cs[5],cs[9],cs[13],cs[2],cs[6],cs[10],cs[14],cs[3],cs[7],cs[11],cs[15]);return this},extractPosition:function(e){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},copyPosition:function(e){var ct=this.elements;var cs=e.elements;ct[12]=cs[12];ct[13]=cs[13];ct[14]=cs[14];return this},extractRotation:function(){var e=new aH.Vector3();return function(cs){var cx=this.elements;var cw=cs.elements;var cv=1/e.set(cw[0],cw[1],cw[2]).length();var cu=1/e.set(cw[4],cw[5],cw[6]).length();var ct=1/e.set(cw[8],cw[9],cw[10]).length();cx[0]=cw[0]*cv;cx[1]=cw[1]*cv;cx[2]=cw[2]*cv;cx[4]=cw[4]*cu;cx[5]=cw[5]*cu;cx[6]=cw[6]*cu;cx[8]=cw[8]*ct;cx[9]=cw[9]*ct;cx[10]=cw[10]*ct;return this}}(),setRotationFromEuler:function(cs,e){console.warn("DEPRECATED: Matrix4's .setRotationFromEuler() has been deprecated in favor of makeRotationFromEuler.  Please update your code.");return this.makeRotationFromEuler(cs,e)},makeRotationFromEuler:function(cA,cD){var cw=this.elements;var cz=cA.x,cy=cA.y,cx=cA.z;var cP=Math.cos(cz),cO=Math.sin(cz);var cM=Math.cos(cy),cJ=Math.sin(cy);var cG=Math.cos(cx),cE=Math.sin(cx);if(cD===undefined||cD==="XYZ"){var cI=cP*cG,cF=cP*cE,ct=cO*cG,cs=cO*cE;cw[0]=cM*cG;cw[4]=-cM*cE;cw[8]=cJ;cw[1]=cF+ct*cJ;cw[5]=cI-cs*cJ;cw[9]=-cO*cM;cw[2]=cs-cI*cJ;cw[6]=ct+cF*cJ;cw[10]=cP*cM}else{if(cD==="YXZ"){var cC=cM*cG,cB=cM*cE,cL=cJ*cG,cH=cJ*cE;cw[0]=cC+cH*cO;cw[4]=cL*cO-cB;cw[8]=cP*cJ;cw[1]=cP*cE;cw[5]=cP*cG;cw[9]=-cO;cw[2]=cB*cO-cL;cw[6]=cH+cC*cO;cw[10]=cP*cM}else{if(cD==="ZXY"){var cC=cM*cG,cB=cM*cE,cL=cJ*cG,cH=cJ*cE;cw[0]=cC-cH*cO;cw[4]=-cP*cE;cw[8]=cL+cB*cO;cw[1]=cB+cL*cO;cw[5]=cP*cG;cw[9]=cH-cC*cO;cw[2]=-cP*cJ;cw[6]=cO;cw[10]=cP*cM}else{if(cD==="ZYX"){var cI=cP*cG,cF=cP*cE,ct=cO*cG,cs=cO*cE;cw[0]=cM*cG;cw[4]=ct*cJ-cF;cw[8]=cI*cJ+cs;cw[1]=cM*cE;cw[5]=cs*cJ+cI;cw[9]=cF*cJ-ct;cw[2]=-cJ;cw[6]=cO*cM;cw[10]=cP*cM}else{if(cD==="YZX"){var cN=cP*cM,cK=cP*cJ,cv=cO*cM,cu=cO*cJ;cw[0]=cM*cG;cw[4]=cu-cN*cE;cw[8]=cv*cE+cK;cw[1]=cE;cw[5]=cP*cG;cw[9]=-cO*cG;cw[2]=-cJ*cG;cw[6]=cK*cE+cv;cw[10]=cN-cu*cE}else{if(cD==="XZY"){var cN=cP*cM,cK=cP*cJ,cv=cO*cM,cu=cO*cJ;cw[0]=cM*cG;cw[4]=-cE;cw[8]=cJ*cG;cw[1]=cN*cE+cu;cw[5]=cP*cG;cw[9]=cK*cE-cv;cw[2]=cv*cE-cK;cw[6]=cO*cG;cw[10]=cu*cE+cN}}}}}}cw[3]=0;cw[7]=0;cw[11]=0;cw[12]=0;cw[13]=0;cw[14]=0;cw[15]=1;return this},setRotationFromQuaternion:function(e){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(cC){var cv=this.elements;var cy=cC.x,cx=cC.y,cw=cC.z,cz=cC.w;var cE=cy+cy,e=cx+cx,cA=cw+cw;var cu=cy*cE,ct=cy*e,cs=cy*cA;var cD=cx*e,cB=cx*cA,cH=cw*cA;var cI=cz*cE,cG=cz*e,cF=cz*cA;cv[0]=1-(cD+cH);cv[4]=ct-cF;cv[8]=cs+cG;cv[1]=ct+cF;cv[5]=1-(cu+cH);cv[9]=cB-cI;cv[2]=cs-cG;cv[6]=cB+cI;cv[10]=1-(cu+cD);cv[3]=0;cv[7]=0;cv[11]=0;cv[12]=0;cv[13]=0;cv[14]=0;cv[15]=1;return this},lookAt:function(){var e=new aH.Vector3();var ct=new aH.Vector3();var cs=new aH.Vector3();return function(cv,cw,cu){var cx=this.elements;cs.subVectors(cv,cw).normalize();if(cs.length()===0){cs.z=1}e.crossVectors(cu,cs).normalize();if(e.length()===0){cs.x+=0.0001;e.crossVectors(cu,cs).normalize()}ct.crossVectors(cs,e);cx[0]=e.x;cx[4]=ct.x;cx[8]=cs.x;cx[1]=e.y;cx[5]=ct.y;cx[9]=cs.y;cx[2]=e.z;cx[6]=ct.z;cx[10]=cs.z;return this}}(),multiply:function(e,cs){if(cs!==undefined){console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,cs)}return this.multiplyMatrices(this,e)},multiplyMatrices:function(c1,c0){var cH=c1.elements;var cZ=c0.elements;var e=this.elements;var cE=cH[0],cC=cH[4],cB=cH[8],cA=cH[12];var cY=cH[1],cX=cH[5],cW=cH[9],cV=cH[13];var cQ=cH[2],cP=cH[6],cO=cH[10],cN=cH[14];var cI=cH[3],cG=cH[7],cF=cH[11],cD=cH[15];var cx=cZ[0],cv=cZ[4],ct=cZ[8],cs=cZ[12];var cU=cZ[1],cT=cZ[5],cS=cZ[9],cR=cZ[13];var cM=cZ[2],cL=cZ[6],cK=cZ[10],cJ=cZ[14];var cz=cZ[3],cy=cZ[7],cw=cZ[11],cu=cZ[15];e[0]=cE*cx+cC*cU+cB*cM+cA*cz;e[4]=cE*cv+cC*cT+cB*cL+cA*cy;e[8]=cE*ct+cC*cS+cB*cK+cA*cw;e[12]=cE*cs+cC*cR+cB*cJ+cA*cu;e[1]=cY*cx+cX*cU+cW*cM+cV*cz;e[5]=cY*cv+cX*cT+cW*cL+cV*cy;e[9]=cY*ct+cX*cS+cW*cK+cV*cw;e[13]=cY*cs+cX*cR+cW*cJ+cV*cu;e[2]=cQ*cx+cP*cU+cO*cM+cN*cz;e[6]=cQ*cv+cP*cT+cO*cL+cN*cy;e[10]=cQ*ct+cP*cS+cO*cK+cN*cw;e[14]=cQ*cs+cP*cR+cO*cJ+cN*cu;e[3]=cI*cx+cG*cU+cF*cM+cD*cz;e[7]=cI*cv+cG*cT+cF*cL+cD*cy;e[11]=cI*ct+cG*cS+cF*cK+cD*cw;e[15]=cI*cs+cG*cR+cF*cJ+cD*cu;return this},multiplyToArray:function(cs,e,ct){var cu=this.elements;this.multiplyMatrices(cs,e);ct[0]=cu[0];ct[1]=cu[1];ct[2]=cu[2];ct[3]=cu[3];ct[4]=cu[4];ct[5]=cu[5];ct[6]=cu[6];ct[7]=cu[7];ct[8]=cu[8];ct[9]=cu[9];ct[10]=cu[10];ct[11]=cu[11];ct[12]=cu[12];ct[13]=cu[13];ct[14]=cu[14];ct[15]=cu[15];return this},multiplyScalar:function(e){var cs=this.elements;cs[0]*=e;cs[4]*=e;cs[8]*=e;cs[12]*=e;cs[1]*=e;cs[5]*=e;cs[9]*=e;cs[13]*=e;cs[2]*=e;cs[6]*=e;cs[10]*=e;cs[14]*=e;cs[3]*=e;cs[7]*=e;cs[11]*=e;cs[15]*=e;return this},multiplyVector3:function(e){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return e.applyProjection(this)},multiplyVector4:function(e){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(){var e=new aH.Vector3();return function(cs){for(var cu=0,ct=cs.length;cu<ct;cu+=3){e.x=cs[cu];e.y=cs[cu+1];e.z=cs[cu+2];e.applyProjection(this);cs[cu]=e.x;cs[cu+1]=e.y;cs[cu+2]=e.z}return cs}}(),rotateAxis:function(e){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},determinant:function(){var ct=this.elements;var cE=ct[0],cD=ct[4],cB=ct[8],cz=ct[12];var cw=ct[1],cv=ct[5],cu=ct[9],cs=ct[13];var e=ct[2],cH=ct[6],cG=ct[10],cF=ct[14];var cC=ct[3],cA=ct[7],cy=ct[11],cx=ct[15];return(cC*(+cz*cu*cH-cB*cs*cH-cz*cv*cG+cD*cs*cG+cB*cv*cF-cD*cu*cF)+cA*(+cE*cu*cF-cE*cs*cG+cz*cw*cG-cB*cw*cF+cB*cs*e-cz*cu*e)+cy*(+cE*cs*cH-cE*cv*cF-cz*cw*cH+cD*cw*cF+cz*cv*e-cD*cs*e)+cx*(-cB*cv*e-cE*cu*cH+cE*cv*cG+cB*cw*cH-cD*cw*cG+cD*cu*e))},transpose:function(){var cs=this.elements;var e;e=cs[1];cs[1]=cs[4];cs[4]=e;e=cs[2];cs[2]=cs[8];cs[8]=e;e=cs[6];cs[6]=cs[9];cs[9]=e;e=cs[3];cs[3]=cs[12];cs[12]=e;e=cs[7];cs[7]=cs[13];cs[13]=e;e=cs[11];cs[11]=cs[14];cs[14]=e;return this},flattenToArray:function(cs){var e=this.elements;cs[0]=e[0];cs[1]=e[1];cs[2]=e[2];cs[3]=e[3];cs[4]=e[4];cs[5]=e[5];cs[6]=e[6];cs[7]=e[7];cs[8]=e[8];cs[9]=e[9];cs[10]=e[10];cs[11]=e[11];cs[12]=e[12];cs[13]=e[13];cs[14]=e[14];cs[15]=e[15];return cs},flattenToArrayOffset:function(ct,cs){var e=this.elements;ct[cs]=e[0];ct[cs+1]=e[1];ct[cs+2]=e[2];ct[cs+3]=e[3];ct[cs+4]=e[4];ct[cs+5]=e[5];ct[cs+6]=e[6];ct[cs+7]=e[7];ct[cs+8]=e[8];ct[cs+9]=e[9];ct[cs+10]=e[10];ct[cs+11]=e[11];ct[cs+12]=e[12];ct[cs+13]=e[13];ct[cs+14]=e[14];ct[cs+15]=e[15];return ct},getPosition:function(){var e=new aH.Vector3();return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var cs=this.elements;return e.set(cs[12],cs[13],cs[14])}}(),setPosition:function(e){var cs=this.elements;cs[12]=e.x;cs[13]=e.y;cs[14]=e.z;return this},getInverse:function(cH,cy){var cx=this.elements;var cM=cH.elements;var cF=cM[0],cD=cM[4],cB=cM[8],cz=cM[12];var cL=cM[1],cK=cM[5],cJ=cM[9],cI=cM[13];var cu=cM[2],ct=cM[6],cs=cM[10],e=cM[14];var cG=cM[3],cE=cM[7],cC=cM[11],cA=cM[15];cx[0]=cJ*e*cE-cI*cs*cE+cI*ct*cC-cK*e*cC-cJ*ct*cA+cK*cs*cA;cx[4]=cz*cs*cE-cB*e*cE-cz*ct*cC+cD*e*cC+cB*ct*cA-cD*cs*cA;cx[8]=cB*cI*cE-cz*cJ*cE+cz*cK*cC-cD*cI*cC-cB*cK*cA+cD*cJ*cA;cx[12]=cz*cJ*ct-cB*cI*ct-cz*cK*cs+cD*cI*cs+cB*cK*e-cD*cJ*e;cx[1]=cI*cs*cG-cJ*e*cG-cI*cu*cC+cL*e*cC+cJ*cu*cA-cL*cs*cA;cx[5]=cB*e*cG-cz*cs*cG+cz*cu*cC-cF*e*cC-cB*cu*cA+cF*cs*cA;cx[9]=cz*cJ*cG-cB*cI*cG-cz*cL*cC+cF*cI*cC+cB*cL*cA-cF*cJ*cA;cx[13]=cB*cI*cu-cz*cJ*cu+cz*cL*cs-cF*cI*cs-cB*cL*e+cF*cJ*e;cx[2]=cK*e*cG-cI*ct*cG+cI*cu*cE-cL*e*cE-cK*cu*cA+cL*ct*cA;cx[6]=cz*ct*cG-cD*e*cG-cz*cu*cE+cF*e*cE+cD*cu*cA-cF*ct*cA;cx[10]=cD*cI*cG-cz*cK*cG+cz*cL*cE-cF*cI*cE-cD*cL*cA+cF*cK*cA;cx[14]=cz*cK*cu-cD*cI*cu-cz*cL*ct+cF*cI*ct+cD*cL*e-cF*cK*e;cx[3]=cJ*ct*cG-cK*cs*cG-cJ*cu*cE+cL*cs*cE+cK*cu*cC-cL*ct*cC;cx[7]=cD*cs*cG-cB*ct*cG+cB*cu*cE-cF*cs*cE-cD*cu*cC+cF*ct*cC;cx[11]=cB*cK*cG-cD*cJ*cG-cB*cL*cE+cF*cJ*cE+cD*cL*cC-cF*cK*cC;cx[15]=cD*cJ*cu-cB*cK*cu+cB*cL*ct-cF*cJ*ct-cD*cL*cs+cF*cK*cs;var cv=cM[0]*cx[0]+cM[1]*cx[4]+cM[2]*cx[8]+cM[3]*cx[12];if(cv==0){var cw="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(cy||false){throw new Error(cw)}else{console.warn(cw)}this.identity();return this}this.multiplyScalar(1/cv);return this},translate:function(e){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(e){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(e){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(e){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(e,cs){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(cs){var cu=this.elements;var e=cs.x,cv=cs.y,ct=cs.z;cu[0]*=e;cu[4]*=cv;cu[8]*=ct;cu[1]*=e;cu[5]*=cv;cu[9]*=ct;cu[2]*=e;cu[6]*=cv;cu[10]*=ct;cu[3]*=e;cu[7]*=cv;cu[11]*=ct;return this},getMaxScaleOnAxis:function(){var ct=this.elements;var cu=ct[0]*ct[0]+ct[1]*ct[1]+ct[2]*ct[2];var cs=ct[4]*ct[4]+ct[5]*ct[5]+ct[6]*ct[6];var e=ct[8]*ct[8]+ct[9]*ct[9]+ct[10]*ct[10];return Math.sqrt(Math.max(cu,Math.max(cs,e)))},makeTranslation:function(e,ct,cs){this.set(1,0,0,e,0,1,0,ct,0,0,1,cs,0,0,0,1);return this},makeRotationX:function(e){var ct=Math.cos(e),cs=Math.sin(e);this.set(1,0,0,0,0,ct,-cs,0,0,cs,ct,0,0,0,0,1);return this},makeRotationY:function(e){var ct=Math.cos(e),cs=Math.sin(e);this.set(ct,0,cs,0,0,1,0,0,-cs,0,ct,0,0,0,0,1);return this},makeRotationZ:function(e){var ct=Math.cos(e),cs=Math.sin(e);this.set(ct,-cs,0,0,cs,ct,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,cs){var cv=Math.cos(cs);var cA=Math.sin(cs);var cz=1-cv;var cy=e.x,cx=e.y,cw=e.z;var cu=cz*cy,ct=cz*cx;this.set(cu*cy+cv,cu*cx-cA*cw,cu*cw+cA*cx,0,cu*cx+cA*cw,ct*cx+cv,ct*cw-cA*cy,0,cu*cw-cA*cx,ct*cw+cA*cy,cz*cw*cw+cv,0,0,0,0,1);return this},makeScale:function(e,ct,cs){this.set(e,0,0,0,0,ct,0,0,0,0,cs,0,0,0,0,1);return this},compose:function(e,cs,ct){console.warn("DEPRECATED: Matrix4's .compose() has been deprecated in favor of makeFromPositionQuaternionScale. Please update your code.");return this.makeFromPositionQuaternionScale(e,cs,ct)},makeFromPositionQuaternionScale:function(e,cs,ct){this.makeRotationFromQuaternion(cs);this.scale(ct);this.setPosition(e);return this},makeFromPositionEulerScale:function(e,cs,cu,ct){this.makeRotationFromEuler(cs,cu);this.scale(ct);this.setPosition(e);return this},makeFrustum:function(ct,cD,e,cA,cv,cu){var cs=this.elements;var cC=2*cv/(cD-ct);var cz=2*cv/(cA-e);var cB=(cD+ct)/(cD-ct);var cy=(cA+e)/(cA-e);var cx=-(cu+cv)/(cu-cv);var cw=-2*cu*cv/(cu-cv);cs[0]=cC;cs[4]=0;cs[8]=cB;cs[12]=0;cs[1]=0;cs[5]=cz;cs[9]=cy;cs[13]=0;cs[2]=0;cs[6]=0;cs[10]=cx;cs[14]=cw;cs[3]=0;cs[7]=0;cs[11]=-1;cs[15]=0;return this},makePerspective:function(cv,ct,cx,cs){var e=cx*Math.tan(aH.Math.degToRad(cv*0.5));var cw=-e;var cy=cw*ct;var cu=e*ct;return this.makeFrustum(cy,cu,cw,e,cx,cs)},makeOrthographic:function(cu,cD,cA,e,cx,cw){var ct=this.elements;var cC=cD-cu;var cv=cA-e;var cs=cw-cx;var cB=(cD+cu)/cC;var cz=(cA+e)/cv;var cy=(cw+cx)/cs;ct[0]=2/cC;ct[4]=0;ct[8]=0;ct[12]=-cB;ct[1]=0;ct[5]=2/cv;ct[9]=0;ct[13]=-cz;ct[2]=0;ct[6]=0;ct[10]=-2/cs;ct[14]=-cy;ct[3]=0;ct[7]=0;ct[11]=0;ct[15]=1;return this},clone:function(){var e=this.elements;return new aH.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}};aH.extend(aH.Matrix4.prototype,{decompose:function(){var e=new aH.Vector3();var cu=new aH.Vector3();var ct=new aH.Vector3();var cs=new aH.Matrix4();return function(cv,cw,cy){var cx=this.elements;e.set(cx[0],cx[1],cx[2]);cu.set(cx[4],cx[5],cx[6]);ct.set(cx[8],cx[9],cx[10]);cv=(cv instanceof aH.Vector3)?cv:new aH.Vector3();cw=(cw instanceof aH.Quaternion)?cw:new aH.Quaternion();cy=(cy instanceof aH.Vector3)?cy:new aH.Vector3();cy.x=e.length();cy.y=cu.length();cy.z=ct.length();cv.x=cx[12];cv.y=cx[13];cv.z=cx[14];cs.copy(this);cs.elements[0]/=cy.x;cs.elements[1]/=cy.x;cs.elements[2]/=cy.x;cs.elements[4]/=cy.y;cs.elements[5]/=cy.y;cs.elements[6]/=cy.y;cs.elements[8]/=cy.z;cs.elements[9]/=cy.z;cs.elements[10]/=cy.z;cw.setFromRotationMatrix(cs);return[cv,cw,cy]}}()});aH.Ray=function(e,cs){this.origin=(e!==undefined)?e:new aH.Vector3();this.direction=(cs!==undefined)?cs:new aH.Vector3()};aH.Ray.prototype={constructor:aH.Ray,set:function(e,cs){this.origin.copy(e);this.direction.copy(cs);return this},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(ct,cs){var e=cs||new aH.Vector3();return e.copy(this.direction).multiplyScalar(ct).add(this.origin)},recast:function(){var e=new aH.Vector3();return function(cs){this.origin.copy(this.at(cs,e));return this}}(),closestPointToPoint:function(cs,ct){var e=ct||new aH.Vector3();e.subVectors(cs,this.origin);var cu=e.dot(this.direction);return e.copy(this.direction).multiplyScalar(cu).add(this.origin)},distanceToPoint:function(){var e=new aH.Vector3();return function(cs){var ct=e.subVectors(cs,this.origin).dot(this.direction);e.copy(this.direction).multiplyScalar(ct).add(this.origin);return e.distanceTo(cs)}}(),isIntersectionSphere:function(e){return(this.distanceToPoint(e.center)<=e.radius)},isIntersectionPlane:function(e){var cs=e.normal.dot(this.direction);if(cs!=0){return true}if(e.distanceToPoint(this.origin)==0){return true}return false},distanceToPlane:function(e){var ct=e.normal.dot(this.direction);if(ct==0){if(e.distanceToPoint(this.origin)==0){return 0}return undefined}var cs=-(this.origin.dot(e.normal)+e.constant)/ct;return cs},intersectPlane:function(e,ct){var cs=this.distanceToPlane(e);if(cs===undefined){return undefined}return this.at(cs,ct)},applyMatrix4:function(e){this.direction.add(this.origin).applyMatrix4(e);this.origin.applyMatrix4(e);this.direction.sub(this.origin);return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return new aH.Ray().copy(this)}};aH.Sphere=function(cs,e){this.center=(cs!==undefined)?cs:new aH.Vector3();this.radius=(e!==undefined)?e:0};aH.Sphere.prototype={constructor:aH.Sphere,set:function(cs,e){this.center.copy(cs);this.radius=e;return this},setFromCenterAndPoints:function(e,cw){var cs=0;for(var cv=0,ct=cw.length;cv<ct;cv++){var cu=e.distanceToSquared(cw[cv]);cs=Math.max(cs,cu)}this.center=e;this.radius=Math.sqrt(cs);return this},copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return(this.radius<=0)},containsPoint:function(e){return(e.distanceToSquared(this.center)<=(this.radius*this.radius))},distanceToPoint:function(e){return(e.distanceTo(this.center)-this.radius)},intersectsSphere:function(e){var cs=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=(cs*cs)},clampPoint:function(cs,cu){var ct=this.center.distanceToSquared(cs);var e=cu||new aH.Vector3();e.copy(cs);if(ct>(this.radius*this.radius)){e.sub(this.center).normalize();e.multiplyScalar(this.radius).add(this.center)}return e},getBoundingBox:function(e){var cs=e||new aH.Box3();cs.set(this.center,this.center);cs.expandByScalar(this.radius);return cs},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&(e.radius===this.radius)},clone:function(){return new aH.Sphere().copy(this)}};aH.Frustum=function(cw,cv,cu,ct,cs,e){this.planes=[(cw!==undefined)?cw:new aH.Plane(),(cv!==undefined)?cv:new aH.Plane(),(cu!==undefined)?cu:new aH.Plane(),(ct!==undefined)?ct:new aH.Plane(),(cs!==undefined)?cs:new aH.Plane(),(e!==undefined)?e:new aH.Plane()]};aH.Frustum.prototype={constructor:aH.Frustum,set:function(cx,cw,cv,cu,ct,cs){var e=this.planes;e[0].copy(cx);e[1].copy(cw);e[2].copy(cv);e[3].copy(cu);e[4].copy(ct);e[5].copy(cs);return this},copy:function(ct){var e=this.planes;for(var cs=0;cs<6;cs++){e[cs].copy(ct.planes[cs])}return this},setFromMatrix:function(cE){var cy=this.planes;var cJ=cE.elements;var cC=cJ[0],cA=cJ[1],cz=cJ[2],cx=cJ[3];var cw=cJ[4],cv=cJ[5],cu=cJ[6],ct=cJ[7];var cs=cJ[8],e=cJ[9],cI=cJ[10],cH=cJ[11];var cG=cJ[12],cF=cJ[13],cD=cJ[14],cB=cJ[15];cy[0].setComponents(cx-cC,ct-cw,cH-cs,cB-cG).normalize();cy[1].setComponents(cx+cC,ct+cw,cH+cs,cB+cG).normalize();cy[2].setComponents(cx+cA,ct+cv,cH+e,cB+cF).normalize();cy[3].setComponents(cx-cA,ct-cv,cH-e,cB-cF).normalize();cy[4].setComponents(cx-cz,ct-cu,cH-cI,cB-cD).normalize();cy[5].setComponents(cx+cz,ct+cu,cH+cI,cB+cD).normalize();return this},intersectsObject:function(){var e=new aH.Vector3();return function(cv){var ct=cv.matrixWorld;var cu=this.planes;var cs=-cv.geometry.boundingSphere.radius*ct.getMaxScaleOnAxis();e.getPositionFromMatrix(ct);for(var cw=0;cw<6;cw++){var cx=cu[cw].distanceToPoint(e);if(cx<cs){return false}}return true}}(),intersectsSphere:function(ct){var cu=this.planes;var e=ct.center;var cs=-ct.radius;for(var cv=0;cv<6;cv++){var cw=cu[cv].distanceToPoint(e);if(cw<cs){return false}}return true},containsPoint:function(e){var cs=this.planes;for(var ct=0;ct<6;ct++){if(cs[ct].distanceToPoint(e)<0){return false}}return true},clone:function(){return new aH.Frustum().copy(this)}};aH.Plane=function(cs,e){this.normal=(cs!==undefined)?cs:new aH.Vector3(1,0,0);this.constant=(e!==undefined)?e:0};aH.Plane.prototype={constructor:aH.Plane,set:function(cs,e){this.normal.copy(cs);this.constant=e;return this},setComponents:function(e,cu,ct,cs){this.normal.set(e,cu,ct);this.constant=cs;return this},setFromNormalAndCoplanarPoint:function(cs,e){this.normal.copy(cs);this.constant=-e.dot(this.normal);return this},setFromCoplanarPoints:function(){var cs=new aH.Vector3();var e=new aH.Vector3();return function(cu,ct,cw){var cv=cs.subVectors(cw,ct).cross(e.subVectors(cu,ct)).normalize();this.setFromNormalAndCoplanarPoint(cv,cu);return this}}(),copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,cs){return this.orthoPoint(e,cs).sub(e).negate()},orthoPoint:function(cs,cu){var ct=this.distanceToPoint(cs);var e=cu||new aH.Vector3();return e.copy(this.normal).multiplyScalar(ct)},isIntersectionLine:function(e){var ct=this.distanceToPoint(e.start);var cs=this.distanceToPoint(e.end);return(ct<0&&cs>0)||(cs<0&&ct>0)},intersectLine:function(){var e=new aH.Vector3();return function(ct,cv){var cs=cv||new aH.Vector3();var cw=ct.delta(e);var cx=this.normal.dot(cw);if(cx==0){if(this.distanceToPoint(ct.start)==0){return cs.copy(ct.start)}return undefined}var cu=-(ct.start.dot(this.normal)+this.constant)/cx;if(cu<0||cu>1){return undefined}return cs.copy(cw).multiplyScalar(cu).add(ct.start)}}(),coplanarPoint:function(cs){var e=cs||new aH.Vector3();return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var cs=new aH.Vector3();var e=new aH.Vector3();return function(cu,cv){cv=cv||new aH.Matrix3().getNormalMatrix(cu);var cw=cs.copy(this.normal).applyMatrix3(cv);var ct=this.coplanarPoint(e);ct.applyMatrix4(cu);this.setFromNormalAndCoplanarPoint(cw,ct);return this}}(),translate:function(e){this.constant=this.constant-e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&(e.constant==this.constant)},clone:function(){return new aH.Plane().copy(this)}};aH.Math={clamp:function(cs,ct,e){return(cs<ct)?ct:((cs>e)?e:cs)},clampBottom:function(e,cs){return e<cs?cs:e},mapLinear:function(cs,ct,e,cv,cu){return cv+(cs-ct)*(cu-cv)/(e-ct)},smoothstep:function(cs,ct,e){if(cs<=ct){return 0}if(cs>=e){return 1}cs=(cs-ct)/(e-ct);return cs*cs*(3-2*cs)},smootherstep:function(cs,ct,e){if(cs<=ct){return 0}if(cs>=e){return 1}cs=(cs-ct)/(e-ct);return cs*cs*cs*(cs*(cs*6-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,cs){return e+Math.floor(Math.random()*(cs-e+1))},randFloat:function(e,cs){return e+Math.random()*(cs-e)},randFloatSpread:function(e){return e*(0.5-Math.random())},sign:function(e){return(e<0)?-1:((e>0)?1:0)},degToRad:function(){var e=Math.PI/180;return function(cs){return cs*e}}(),radToDeg:function(){var e=180/Math.PI;return function(cs){return cs*e}}()};aH.Spline=function(cD){this.points=cD;var cx=[],cz={x:0,y:0,z:0},cC,e,cu,ct,cs,cB,cA,cy,cw;this.initFromArray=function(cE){this.points=[];for(var cF=0;cF<cE.length;cF++){this.points[cF]={x:cE[cF][0],y:cE[cF][1],z:cE[cF][2]}}};this.getPoint=function(cE){cC=(this.points.length-1)*cE;e=Math.floor(cC);cu=cC-e;cx[0]=e===0?e:e-1;cx[1]=e;cx[2]=e>this.points.length-2?this.points.length-1:e+1;cx[3]=e>this.points.length-3?this.points.length-1:e+2;cB=this.points[cx[0]];cA=this.points[cx[1]];cy=this.points[cx[2]];cw=this.points[cx[3]];ct=cu*cu;cs=cu*ct;cz.x=cv(cB.x,cA.x,cy.x,cw.x,cu,ct,cs);cz.y=cv(cB.y,cA.y,cy.y,cw.y,cu,ct,cs);cz.z=cv(cB.z,cA.z,cy.z,cw.z,cu,ct,cs);return cz};this.getControlPointsArray=function(){var cF,cH,cE=this.points.length,cG=[];for(cF=0;cF<cE;cF++){cH=this.points[cF];cG[cF]=[cH.x,cH.y,cH.z]}return cG};this.getLength=function(cG){var cI,cK,cL,cJ,cO=0,cE=0,cH=0,cN=new aH.Vector3(),cF=new aH.Vector3(),cM=[],cP=0;cM[0]=0;if(!cG){cG=100}cL=this.points.length*cG;cN.copy(this.points[0]);for(cI=1;cI<cL;cI++){cK=cI/cL;cJ=this.getPoint(cK);cF.copy(cJ);cP+=cF.distanceTo(cN);cN.copy(cJ);cO=(this.points.length-1)*cK;cE=Math.floor(cO);if(cE!=cH){cM[cE]=cP;cH=cE}}cM[cM.length]=cP;return{chunks:cM,total:cP}};this.reparametrizeByArcLength=function(cG){var cK,cJ,cN,cO,cH,cF,cP,cM,cL,cQ=[],cE=new aH.Vector3(),cI=this.getLength();cQ.push(cE.copy(this.points[0]).clone());for(cK=1;cK<this.points.length;cK++){cP=cI.chunks[cK]-cI.chunks[cK-1];cM=Math.ceil(cG*cP/cI.total);cO=(cK-1)/(this.points.length-1);cH=cK/(this.points.length-1);for(cJ=1;cJ<cM-1;cJ++){cN=cO+cJ*(1/cM)*(cH-cO);cL=this.getPoint(cN);cQ.push(cE.copy(cL).clone())}cQ.push(cE.copy(this.points[cK]).clone())}this.points=cQ};function cv(cL,cK,cI,cH,cM,cF,cE){var cJ=(cI-cL)*0.5,cG=(cH-cK)*0.5;return(2*(cK-cI)+cJ+cG)*cE+(-3*(cK-cI)-2*cJ-cG)*cF+cJ*cM+cK}};aH.Triangle=function(cs,e,ct){this.a=(cs!==undefined)?cs:new aH.Vector3();this.b=(e!==undefined)?e:new aH.Vector3();this.c=(ct!==undefined)?ct:new aH.Vector3()};aH.Triangle.normal=function(){var e=new aH.Vector3();return function(cv,ct,cx,cw){var cs=cw||new aH.Vector3();cs.subVectors(cx,ct);e.subVectors(cv,ct);cs.cross(e);var cu=cs.lengthSq();if(cu>0){return cs.multiplyScalar(1/Math.sqrt(cu))}return cs.set(0,0,0)}}();aH.Triangle.barycoordFromPoint=function(){var e=new aH.Vector3();var ct=new aH.Vector3();var cs=new aH.Vector3();return function(cE,cD,cB,cy,cI){e.subVectors(cy,cD);ct.subVectors(cB,cD);cs.subVectors(cE,cD);var cC=e.dot(e);var cA=e.dot(ct);var cz=e.dot(cs);var cw=ct.dot(ct);var cu=ct.dot(cs);var cx=(cC*cw-cA*cA);var cH=cI||new aH.Vector3();if(cx==0){return cH.set(-2,-1,-1)}var cv=1/cx;var cG=(cw*cz-cA*cu)*cv;var cF=(cC*cu-cA*cz)*cv;return cH.set(1-cG-cF,cF,cG)}}();aH.Triangle.containsPoint=function(){var e=new aH.Vector3();return function(cu,cv,ct,cw){var cs=aH.Triangle.barycoordFromPoint(cu,cv,ct,cw,e);return(cs.x>=0)&&(cs.y>=0)&&((cs.x+cs.y)<=1)}}();aH.Triangle.prototype={constructor:aH.Triangle,set:function(cs,e,ct){this.a.copy(cs);this.b.copy(e);this.c.copy(ct);return this},setFromPointsAndIndices:function(cs,cu,ct,e){this.a.copy(cs[cu]);this.b.copy(cs[ct]);this.c.copy(cs[e]);return this},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},area:function(){var e=new aH.Vector3();var cs=new aH.Vector3();return function(){e.subVectors(this.c,this.b);cs.subVectors(this.a,this.b);return e.cross(cs).length()*0.5}}(),midpoint:function(cs){var e=cs||new aH.Vector3();return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return aH.Triangle.normal(this.a,this.b,this.c,e)},plane:function(cs){var e=cs||new aH.Plane();return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,cs){return aH.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,cs)},containsPoint:function(e){return aH.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return new aH.Triangle().copy(this)}};aH.Vertex=function(e){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return e};aH.UV=function(cs,e){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new aH.Vector2(cs,e)};aH.EventDispatcher=function(){};aH.EventDispatcher.prototype={constructor:aH.EventDispatcher,addEventListener:function(cs,ct){if(this._listeners===undefined){this._listeners={}}var e=this._listeners;if(e[cs]===undefined){e[cs]=[]}if(e[cs].indexOf(ct)===-1){e[cs].push(ct)}},hasEventListener:function(cs,ct){if(this._listeners===undefined){return false}var e=this._listeners;if(e[cs]!==undefined&&e[cs].indexOf(ct)!==-1){return true}return false},removeEventListener:function(ct,cu){if(this._listeners===undefined){return}var cs=this._listeners;var e=cs[ct].indexOf(cu);if(e!==-1){cs[ct].splice(e,1)}},dispatchEvent:function(cv){if(this._listeners===undefined){return}var cu=this._listeners;var e=cu[cv.type];if(e!==undefined){cv.target=this;for(var ct=0,cs=e.length;ct<cs;ct++){e[ct].call(this,cv)}}}};aH.Object3D=function(){this.id=aH.Object3DIdCount++;this.name="";this.parent=undefined;this.children=[];this.up=new aH.Vector3(0,1,0);this.position=new aH.Vector3();this.rotation=new aH.Vector3();this.eulerOrder=aH.Object3D.defaultEulerOrder;this.scale=new aH.Vector3(1,1,1);this.renderDepth=null;this.rotationAutoUpdate=true;this.matrix=new aH.Matrix4();this.matrixWorld=new aH.Matrix4();this.matrixAutoUpdate=true;this.matrixWorldNeedsUpdate=true;this.quaternion=new aH.Quaternion();this.useQuaternion=false;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.userData={}};aH.Object3D.prototype={constructor:aH.Object3D,applyMatrix:function(){var e=new aH.Matrix4();return function(cs){this.matrix.multiplyMatrices(cs,this.matrix);this.position.getPositionFromMatrix(this.matrix);this.scale.getScaleFromMatrix(this.matrix);e.extractRotation(this.matrix);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(e)}else{this.rotation.setEulerFromRotationMatrix(e,this.eulerOrder)}}}(),rotateOnAxis:function(){var e=new aH.Quaternion();var cs=new aH.Quaternion();return function(ct,cu){e.setFromAxisAngle(ct,cu);if(this.useQuaternion===true){this.quaternion.multiply(e)}else{cs.setFromEuler(this.rotation,this.eulerOrder);cs.multiply(e);this.rotation.setEulerFromQuaternion(cs,this.eulerOrder)}return this}}(),translateOnAxis:function(){var e=new aH.Vector3();return function(cs,ct){e.copy(cs);if(this.useQuaternion===true){e.applyQuaternion(this.quaternion)}else{e.applyEuler(this.rotation,this.eulerOrder)}this.position.add(e.multiplyScalar(ct));return this}}(),translate:function(cs,e){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");return this.translateOnAxis(e,cs)},translateX:function(){var e=new aH.Vector3(1,0,0);return function(cs){return this.translateOnAxis(e,cs)}}(),translateY:function(){var e=new aH.Vector3(0,1,0);return function(cs){return this.translateOnAxis(e,cs)}}(),translateZ:function(){var e=new aH.Vector3(0,0,1);return function(cs){return this.translateOnAxis(e,cs)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new aH.Matrix4();return function(cs){return cs.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new aH.Matrix4();return function(cs){e.lookAt(cs,this.position,this.up);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(e)}else{this.rotation.setEulerFromRotationMatrix(e,this.eulerOrder)}}}(),add:function(e){if(e===this){console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");return}if(e instanceof aH.Object3D){if(e.parent!==undefined){e.parent.remove(e)}e.parent=this;this.children.push(e);var cs=this;while(cs.parent!==undefined){cs=cs.parent}if(cs!==undefined&&cs instanceof aH.Scene){cs.__addObject(e)}}},remove:function(cs){var e=this.children.indexOf(cs);if(e!==-1){cs.parent=undefined;this.children.splice(e,1);var ct=this;while(ct.parent!==undefined){ct=ct.parent}if(ct!==undefined&&ct instanceof aH.Scene){ct.__removeObject(cs)}}},traverse:function(ct){ct(this);for(var cs=0,e=this.children.length;cs<e;cs++){this.children[cs].traverse(ct)}},getObjectById:function(cv,cs){for(var ct=0,e=this.children.length;ct<e;ct++){var cu=this.children[ct];if(cu.id===cv){return cu}if(cs===true){cu=cu.getObjectById(cv,cs);if(cu!==undefined){return cu}}}return undefined},getObjectByName:function(ct,cs){for(var cu=0,e=this.children.length;cu<e;cu++){var cv=this.children[cu];if(cv.name===ct){return cv}if(cs===true){cv=cv.getObjectByName(ct,cs);if(cv!==undefined){return cv}}}return undefined},getChildByName:function(cs,e){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(cs,e)},getDescendants:function(ct){if(ct===undefined){ct=[]}Array.prototype.push.apply(ct,this.children);for(var cs=0,e=this.children.length;cs<e;cs++){this.children[cs].getDescendants(ct)}return ct},updateMatrix:function(){if(this.useQuaternion===false){this.matrix.makeFromPositionEulerScale(this.position,this.rotation,this.eulerOrder,this.scale)}else{this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale)}this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(ct){if(this.matrixAutoUpdate===true){this.updateMatrix()}if(this.matrixWorldNeedsUpdate===true||ct===true){if(this.parent===undefined){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;ct=true}for(var cs=0,e=this.children.length;cs<e;cs++){this.children[cs].updateMatrixWorld(ct)}},clone:function(e){if(e===undefined){e=new aH.Object3D()}e.name=this.name;e.up.copy(this.up);e.position.copy(this.position);if(e.rotation instanceof aH.Vector3){e.rotation.copy(this.rotation)}e.eulerOrder=this.eulerOrder;e.scale.copy(this.scale);e.renderDepth=this.renderDepth;e.rotationAutoUpdate=this.rotationAutoUpdate;e.matrix.copy(this.matrix);e.matrixWorld.copy(this.matrixWorld);e.matrixAutoUpdate=this.matrixAutoUpdate;e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;e.quaternion.copy(this.quaternion);e.useQuaternion=this.useQuaternion;e.visible=this.visible;e.castShadow=this.castShadow;e.receiveShadow=this.receiveShadow;e.frustumCulled=this.frustumCulled;e.userData=JSON.parse(JSON.stringify(this.userData));for(var cs=0;cs<this.children.length;cs++){var ct=this.children[cs];e.add(ct.clone())}return e}};aH.Object3D.defaultEulerOrder="XYZ",aH.Object3DIdCount=0;aH.Projector=function(){var db,cV,c2=[],cE=0,cP,ct,cv=[],cs=0,cA,c4,c1=[],cz=0,cH,cK=[],cR=0,cy,c8,da=[],cN=0,c5,cG,cM=[],c0=0,cY={objects:[],sprites:[],lights:[],elements:[]},cZ=new aH.Vector3(),cX=new aH.Vector4(),cJ=new aH.Box3(new aH.Vector3(-1,-1,-1),new aH.Vector3(1,1,1)),dc=new aH.Box3(),c7=new Array(3),c6=new Array(4),e=new aH.Matrix4(),cw=new aH.Matrix4(),cS,cU=new aH.Matrix4(),cI=new aH.Matrix3(),cF=new aH.Matrix3(),cu=new aH.Vector3(),c9=new aH.Frustum(),cL=new aH.Vector4(),cx=new aH.Vector4();var c3=function(dd,de){cV=0;cY.objects.length=0;cY.sprites.length=0;cY.lights.length=0;var df=function(di){for(var dj=0,dg=di.children.length;dj<dg;dj++){var dh=di.children[dj];if(dh.visible===false){continue}db=cD();db.object=dh;cY.objects.push(db);df(dh)}};df(dd);return cY};this.projectScene=function(dI,dE,dH,dM){var dl=false,dB,dw,dv,dJ,dG,dt,dC,dm,dK,ds,dz,dA,dL,dp,dq,dg,dr,dy,dF,du,dj,di,df,de,dn,dD;c4=0;cH=0;c8=0;cG=0;cY.elements.length=0;if(dI.autoUpdate===true){dI.updateMatrixWorld()}if(dE.parent===undefined){dE.updateMatrixWorld()}e=dE.matrixWorldInverse.getInverse(dE.matrixWorld);cw.multiplyMatrices(dE.projectionMatrix,e);c9.setFromMatrix(cw);cY=c3(dI,dH);for(dB=0,dw=cY.objects.length;dB<dw;dB++){dL=cY.objects[dB].object;cS=dL.matrixWorld;ct=0;dp=dL.geometry;dq=dp.vertices;dg=dp.faces;dF=dp.faceVertexUvs;cI.getNormalMatrix(cS);for(dv=0,dJ=dq.length;dv<dJ;dv++){cP=cO();cP.positionWorld.x=dq[dv].x;cP.positionWorld.y=dq[dv].y;cP.positionWorld.z=dq[dv].z;cP.positionWorld.applyMatrix4(cS);cP.positionScreen.x=cP.positionWorld.x;cP.positionScreen.y=cP.positionWorld.y;cP.positionScreen.z=cP.positionWorld.z;cP.positionScreen.applyMatrix4(cw);cP.positionScreen.x/=cP.positionScreen.w;cP.positionScreen.y/=cP.positionScreen.w;cP.positionScreen.z/=cP.positionScreen.w;cP.visible=!(cP.positionScreen.x<-1||cP.positionScreen.x>1||cP.positionScreen.y<-1||cP.positionScreen.y>1||cP.positionScreen.z<-1||cP.positionScreen.z>1)}for(dG=0,dt=dg.length;dG<dt;dG++){dr=dg[dG];var dx=dn===true?dD.materials[dr.materialIndex]:dL.material;if(dx===undefined){continue}var dh=dx.side;if(dr instanceof aH.Face3){dj=cv[dr.a];di=cv[dr.b];df=cv[dr.c];c7[0]=dj.positionScreen;c7[1]=di.positionScreen;c7[2]=df.positionScreen;if(dj.visible===true||di.visible===true||df.visible===true||cJ.isIntersectionBox(dc.setFromPoints(c7))){dl=true;if(dh===aH.DoubleSide||dl===(dh===aH.FrontSide)){cA=cC();var dk=[{dest:cA.v1,source:dj},{dest:cA.v2,source:di},{dest:cA.v3,source:df}];var dd;while(dd=dk.pop()){dd.dest.positionWorld.x=dd.source.positionWorld.x;dd.dest.positionWorld.y=dd.source.positionWorld.y;dd.dest.positionWorld.z=dd.source.positionWorld.z;dd.dest.positionScreen.x=dd.source.positionScreen.x;dd.dest.positionScreen.y=dd.source.positionScreen.y;dd.dest.positionScreen.z=dd.source.positionScreen.z}}else{continue}}else{continue}}cA.color=dr.color;cA.material=dx;cY.elements.push(cA)}}return cY};function cD(){if(cV===cE){var dd=new aH.RenderableObject();c2.push(dd);cE++;cV++;return dd}return c2[cV++]}function cO(){if(ct===cs){var dd=new aH.RenderableVertex();cv.push(dd);cs++;ct++;return dd}return cv[ct++]}function cC(){if(c4===cz){var dd=new aH.RenderableFace3();c1.push(dd);cz++;c4++;return dd}return c1[c4++]}function cB(){if(cH===cR){var dd=new aH.RenderableFace4();cK.push(dd);cR++;cH++;return dd}return cK[cH++]}function cW(){if(c8===cN){var dd=new aH.RenderableLine();da.push(dd);cN++;c8++;return dd}return da[c8++]}function cT(){if(cG===c0){var dd=new aH.RenderableParticle();cM.push(dd);c0++;cG++;return dd}return cM[cG++]}function cQ(dh,dg){var df=0,dk=1,di=dh.z+dh.w,de=dg.z+dg.w,dd=-dh.z+dh.w,dj=-dg.z+dg.w;if(di>=0&&de>=0&&dd>=0&&dj>=0){return true}else{if((di<0&&de<0)||(dd<0&&dj<0)){return false}else{if(di<0){df=Math.max(df,di/(di-de))}else{if(de<0){dk=Math.min(dk,di/(di-de))}}if(dd<0){df=Math.max(df,dd/(dd-dj))}else{if(dj<0){dk=Math.min(dk,dd/(dd-dj))}}if(dk<df){return false}else{dh.lerp(dg,df);dg.lerp(dh,1-dk);return true}}}}};aH.Face3=function(ct,cs,cw,cv,cu,e){this.a=ct;this.b=cs;this.c=cw;this.normal=cv instanceof aH.Vector3?cv:new aH.Vector3();this.vertexNormals=cv instanceof Array?cv:[];this.color=cu instanceof aH.Color?cu:new aH.Color();this.vertexColors=cu instanceof Array?cu:[];this.vertexTangents=[];this.materialIndex=e!==undefined?e:0;this.centroid=new aH.Vector3()};aH.Face3.prototype={constructor:aH.Face3,clone:function(){var ct=new aH.Face3(this.a,this.b,this.c);ct.normal.copy(this.normal);ct.color.copy(this.color);ct.centroid.copy(this.centroid);ct.materialIndex=this.materialIndex;var cs,e;for(cs=0,e=this.vertexNormals.length;cs<e;cs++){ct.vertexNormals[cs]=this.vertexNormals[cs].clone()}for(cs=0,e=this.vertexColors.length;cs<e;cs++){ct.vertexColors[cs]=this.vertexColors[cs].clone()}for(cs=0,e=this.vertexTangents.length;cs<e;cs++){ct.vertexTangents[cs]=this.vertexTangents[cs].clone()}return ct}};aH.Geometry=function(){this.id=aH.GeometryIdCount++;this.name="";this.vertices=[];this.colors=[];this.normals=[];this.faces=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.dynamic=true;this.verticesNeedUpdate=false;this.elementsNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.tangentsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.buffersNeedUpdate=false};aH.Geometry.prototype={constructor:aH.Geometry,addEventListener:aH.EventDispatcher.prototype.addEventListener,hasEventListener:aH.EventDispatcher.prototype.hasEventListener,removeEventListener:aH.EventDispatcher.prototype.removeEventListener,dispatchEvent:aH.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(cs){var cy=new aH.Matrix3().getNormalMatrix(cs);for(var cv=0,e=this.vertices.length;cv<e;cv++){var cx=this.vertices[cv];cx.applyMatrix4(cs)}for(var cv=0,e=this.faces.length;cv<e;cv++){var cw=this.faces[cv];cw.normal.applyMatrix3(cy).normalize();for(var ct=0,cu=cw.vertexNormals.length;ct<cu;ct++){cw.vertexNormals[ct].applyMatrix3(cy).normalize()}cw.centroid.applyMatrix4(cs)}},computeCentroids:function(){var ct,cs,e;for(ct=0,cs=this.faces.length;ct<cs;ct++){e=this.faces[ct];e.centroid.set(0,0,0);if(e instanceof aH.Face3){e.centroid.add(this.vertices[e.a]);e.centroid.add(this.vertices[e.b]);e.centroid.add(this.vertices[e.c]);e.centroid.divideScalar(3)}else{if(e instanceof aH.Face4){e.centroid.add(this.vertices[e.a]);e.centroid.add(this.vertices[e.b]);e.centroid.add(this.vertices[e.c]);e.centroid.add(this.vertices[e.d]);e.centroid.divideScalar(4)}}}},computeFaceNormals:function(){var e=new aH.Vector3(),cy=new aH.Vector3();for(var cx=0,cw=this.faces.length;cx<cw;cx++){var cv=this.faces[cx];var cu=this.vertices[cv.a];var ct=this.vertices[cv.b];var cs=this.vertices[cv.c];e.subVectors(cs,ct);cy.subVectors(cu,ct);e.cross(cy);e.normalize();cv.normal.copy(e)}},computeVertexNormals:function(cw){var cC,cu,cx,cB,cA,cz;if(this.__tmpVertices===undefined){this.__tmpVertices=new Array(this.vertices.length);cz=this.__tmpVertices;for(cC=0,cu=this.vertices.length;cC<cu;cC++){cz[cC]=new aH.Vector3()}for(cx=0,cB=this.faces.length;cx<cB;cx++){cA=this.faces[cx];if(cA instanceof aH.Face3){cA.vertexNormals=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3()]}else{if(cA instanceof aH.Face4){cA.vertexNormals=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3()]}}}}else{cz=this.__tmpVertices;for(cC=0,cu=this.vertices.length;cC<cu;cC++){cz[cC].set(0,0,0)}}if(cw){var ct,cs,e,cG;var cv=new aH.Vector3(),cF=new aH.Vector3(),cE=new aH.Vector3(),cD=new aH.Vector3(),cy=new aH.Vector3();for(cx=0,cB=this.faces.length;cx<cB;cx++){cA=this.faces[cx];if(cA instanceof aH.Face3){ct=this.vertices[cA.a];cs=this.vertices[cA.b];e=this.vertices[cA.c];cv.subVectors(e,cs);cF.subVectors(ct,cs);cv.cross(cF);cz[cA.a].add(cv);cz[cA.b].add(cv);cz[cA.c].add(cv)}else{if(cA instanceof aH.Face4){ct=this.vertices[cA.a];cs=this.vertices[cA.b];e=this.vertices[cA.c];cG=this.vertices[cA.d];cE.subVectors(cG,cs);cF.subVectors(ct,cs);cE.cross(cF);cz[cA.a].add(cE);cz[cA.b].add(cE);cz[cA.d].add(cE);cD.subVectors(cG,e);cy.subVectors(cs,e);cD.cross(cy);cz[cA.b].add(cD);cz[cA.c].add(cD);cz[cA.d].add(cD)}}}}else{for(cx=0,cB=this.faces.length;cx<cB;cx++){cA=this.faces[cx];if(cA instanceof aH.Face3){cz[cA.a].add(cA.normal);cz[cA.b].add(cA.normal);cz[cA.c].add(cA.normal)}else{if(cA instanceof aH.Face4){cz[cA.a].add(cA.normal);cz[cA.b].add(cA.normal);cz[cA.c].add(cA.normal);cz[cA.d].add(cA.normal)}}}}for(cC=0,cu=this.vertices.length;cC<cu;cC++){cz[cC].normalize()}for(cx=0,cB=this.faces.length;cx<cB;cx++){cA=this.faces[cx];if(cA instanceof aH.Face3){cA.vertexNormals[0].copy(cz[cA.a]);cA.vertexNormals[1].copy(cz[cA.b]);cA.vertexNormals[2].copy(cz[cA.c])}else{if(cA instanceof aH.Face4){cA.vertexNormals[0].copy(cz[cA.a]);cA.vertexNormals[1].copy(cz[cA.b]);cA.vertexNormals[2].copy(cz[cA.c]);cA.vertexNormals[3].copy(cz[cA.d])}}}},computeMorphNormals:function(){var cv,cA,cw,cB,cx;for(cw=0,cB=this.faces.length;cw<cB;cw++){cx=this.faces[cw];if(!cx.__originalFaceNormal){cx.__originalFaceNormal=cx.normal.clone()}else{cx.__originalFaceNormal.copy(cx.normal)}if(!cx.__originalVertexNormals){cx.__originalVertexNormals=[]}for(cv=0,cA=cx.vertexNormals.length;cv<cA;cv++){if(!cx.__originalVertexNormals[cv]){cx.__originalVertexNormals[cv]=cx.vertexNormals[cv].clone()}else{cx.__originalVertexNormals[cv].copy(cx.vertexNormals[cv])}}}var ct=new aH.Geometry();ct.faces=this.faces;for(cv=0,cA=this.morphTargets.length;cv<cA;cv++){if(!this.morphNormals[cv]){this.morphNormals[cv]={};this.morphNormals[cv].faceNormals=[];this.morphNormals[cv].vertexNormals=[];var cu=this.morphNormals[cv].faceNormals;var e=this.morphNormals[cv].vertexNormals;var cz,cs;for(cw=0,cB=this.faces.length;cw<cB;cw++){cx=this.faces[cw];cz=new aH.Vector3();if(cx instanceof aH.Face3){cs={a:new aH.Vector3(),b:new aH.Vector3(),c:new aH.Vector3()}}else{cs={a:new aH.Vector3(),b:new aH.Vector3(),c:new aH.Vector3(),d:new aH.Vector3()}}cu.push(cz);e.push(cs)}}var cy=this.morphNormals[cv];ct.vertices=this.morphTargets[cv].vertices;ct.computeFaceNormals();ct.computeVertexNormals();var cz,cs;for(cw=0,cB=this.faces.length;cw<cB;cw++){cx=this.faces[cw];cz=cy.faceNormals[cw];cs=cy.vertexNormals[cw];cz.copy(cx.normal);if(cx instanceof aH.Face3){cs.a.copy(cx.vertexNormals[0]);cs.b.copy(cx.vertexNormals[1]);cs.c.copy(cx.vertexNormals[2])}else{cs.a.copy(cx.vertexNormals[0]);cs.b.copy(cx.vertexNormals[1]);cs.c.copy(cx.vertexNormals[2]);cs.d.copy(cx.vertexNormals[3])}}}for(cw=0,cB=this.faces.length;cw<cB;cw++){cx=this.faces[cw];cx.normal=cx.__originalFaceNormal;cx.vertexNormals=cx.__originalVertexNormals}},computeTangents:function(){var cV,cB,cL,cz,cU,cD,cJ,cw,cC,cR,cO,cN,cv,cu,ct,cy,cx,c2,c1,cH,cG,cY,cX,cF,cE,cP,cM,cs,c0=[],cZ=[],e=new aH.Vector3(),cA=new aH.Vector3(),cS=new aH.Vector3(),cW=new aH.Vector3(),cT=new aH.Vector3(),cK;for(cL=0,cz=this.vertices.length;cL<cz;cL++){c0[cL]=new aH.Vector3();cZ[cL]=new aH.Vector3()}function cI(c8,c4,c3,c9,c7,c6,c5){cR=c8.vertices[c4];cO=c8.vertices[c3];cN=c8.vertices[c9];cv=cC[c7];cu=cC[c6];ct=cC[c5];cy=cO.x-cR.x;cx=cN.x-cR.x;c2=cO.y-cR.y;c1=cN.y-cR.y;cH=cO.z-cR.z;cG=cN.z-cR.z;cY=cu.x-cv.x;cX=ct.x-cv.x;cF=cu.y-cv.y;cE=ct.y-cv.y;cP=1/(cY*cE-cX*cF);e.set((cE*cy-cF*cx)*cP,(cE*c2-cF*c1)*cP,(cE*cH-cF*cG)*cP);cA.set((cY*cx-cX*cy)*cP,(cY*c1-cX*c2)*cP,(cY*cG-cX*cH)*cP);c0[c4].add(e);c0[c3].add(e);c0[c9].add(e);cZ[c4].add(cA);cZ[c3].add(cA);cZ[c9].add(cA)}for(cV=0,cB=this.faces.length;cV<cB;cV++){cw=this.faces[cV];cC=this.faceVertexUvs[0][cV];if(cw instanceof aH.Face3){cI(this,cw.a,cw.b,cw.c,0,1,2)}else{if(cw instanceof aH.Face4){cI(this,cw.a,cw.b,cw.d,0,1,3);cI(this,cw.b,cw.c,cw.d,1,2,3)}}}var cQ=["a","b","c","d"];for(cV=0,cB=this.faces.length;cV<cB;cV++){cw=this.faces[cV];for(cU=0;cU<cw.vertexNormals.length;cU++){cT.copy(cw.vertexNormals[cU]);cJ=cw[cQ[cU]];cM=c0[cJ];cS.copy(cM);cS.sub(cT.multiplyScalar(cT.dot(cM))).normalize();cW.crossVectors(cw.vertexNormals[cU],cM);cs=cW.dot(cZ[cJ]);cK=(cs<0)?-1:1;cw.vertexTangents[cU]=new aH.Vector4(cS.x,cS.y,cS.z,cK)}}this.hasTangents=true},computeLineDistances:function(){var cu=0;var cs=this.vertices;for(var ct=0,e=cs.length;ct<e;ct++){if(ct>0){cu+=cs[ct].distanceTo(cs[ct-1])}this.lineDistances[ct]=cu}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new aH.Box3()}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new aH.Sphere()}this.boundingSphere.setFromCenterAndPoints(this.boundingSphere.center,this.vertices)},mergeVertices:function(){var cs={};var e=[],cJ=[];var cw,cK;var cy=4;var cH=Math.pow(10,cy);var cF,cv,cu;var ct,cD,cE,cG,cx;this.__tmpVertices=undefined;for(cF=0,cv=this.vertices.length;cF<cv;cF++){cw=this.vertices[cF];cK=[Math.round(cw.x*cH),Math.round(cw.y*cH),Math.round(cw.z*cH)].join("_");if(cs[cK]===undefined){cs[cK]=cF;e.push(this.vertices[cF]);cJ[cF]=e.length-1}else{cJ[cF]=cJ[cs[cK]]}}var cA=[];for(cF=0,cv=this.faces.length;cF<cv;cF++){cu=this.faces[cF];if(cu instanceof aH.Face3){cu.a=cJ[cu.a];cu.b=cJ[cu.b];cu.c=cJ[cu.c];ct=[cu.a,cu.b,cu.c];var cC=-1;for(var cB=0;cB<3;cB++){if(ct[cB]==ct[(cB+1)%3]){cC=cB;cA.push(cF);break}}}else{if(cu instanceof aH.Face4){cu.a=cJ[cu.a];cu.b=cJ[cu.b];cu.c=cJ[cu.c];cu.d=cJ[cu.d];ct=[cu.a,cu.b,cu.c,cu.d];var cC=-1;for(var cB=0;cB<4;cB++){if(ct[cB]==ct[(cB+1)%4]){if(cC>=0){cA.push(cF)}cC=cB}}if(cC>=0){ct.splice(cC,1);var cI=new aH.Face3(ct[0],ct[1],ct[2],cu.normal,cu.color,cu.materialIndex);for(cE=0,cG=this.faceVertexUvs.length;cE<cG;cE++){cx=this.faceVertexUvs[cE][cF];if(cx){cx.splice(cC,1)}}if(cu.vertexNormals&&cu.vertexNormals.length>0){cI.vertexNormals=cu.vertexNormals;cI.vertexNormals.splice(cC,1)}if(cu.vertexColors&&cu.vertexColors.length>0){cI.vertexColors=cu.vertexColors;cI.vertexColors.splice(cC,1)}this.faces[cF]=cI}}}}for(cF=cA.length-1;cF>=0;cF--){this.faces.splice(cF,1);for(cE=0,cG=this.faceVertexUvs.length;cE<cG;cE++){this.faceVertexUvs[cE].splice(cF,1)}}var cz=this.vertices.length-e.length;this.vertices=e;return cz},clone:function(){var cz=new aH.Geometry();var cy=this.vertices;for(var cx=0,cA=cy.length;cx<cA;cx++){cz.vertices.push(cy[cx].clone())}var ct=this.faces;for(var cx=0,cA=ct.length;cx<cA;cx++){cz.faces.push(ct[cx].clone())}var cv=this.faceVertexUvs[0];for(var cx=0,cA=cv.length;cx<cA;cx++){var cs=cv[cx],e=[];for(var cu=0,cw=cs.length;cu<cw;cu++){e.push(new aH.Vector2(cs[cu].x,cs[cu].y))}cz.faceVertexUvs[0].push(e)}return cz},dispose:function(){this.dispatchEvent({type:"dispose"})}};aH.GeometryIdCount=0;aH.BufferGeometry=function(){this.id=aH.GeometryIdCount++;this.attributes={};this.dynamic=false;this.offsets=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.morphTargets=[]};aH.BufferGeometry.prototype={constructor:aH.BufferGeometry,addEventListener:aH.EventDispatcher.prototype.addEventListener,hasEventListener:aH.EventDispatcher.prototype.hasEventListener,removeEventListener:aH.EventDispatcher.prototype.removeEventListener,dispatchEvent:aH.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(cs){var e;var ct;if(this.attributes.position){e=this.attributes.position.array}if(this.attributes.normal){ct=this.attributes.normal.array}if(e!==undefined){cs.multiplyVector3Array(e);this.verticesNeedUpdate=true}if(ct!==undefined){var cu=new aH.Matrix3().getNormalMatrix(cs);cu.multiplyVector3Array(ct);this.normalizeNormals();this.normalsNeedUpdate=true}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new aH.Box3()}var cs=this.attributes.position.array;if(cs){var cw=this.boundingBox;var e,cx,cv;if(cs.length>=3){cw.min.x=cw.max.x=cs[0];cw.min.y=cw.max.y=cs[1];cw.min.z=cw.max.z=cs[2]}for(var cu=3,ct=cs.length;cu<ct;cu+=3){e=cs[cu];cx=cs[cu+1];cv=cs[cu+2];if(e<cw.min.x){cw.min.x=e}else{if(e>cw.max.x){cw.max.x=e}}if(cx<cw.min.y){cw.min.y=cx}else{if(cx>cw.max.y){cw.max.y=cx}}if(cv<cw.min.z){cw.min.z=cv}else{if(cv>cw.max.z){cw.max.z=cv}}}}if(cs===undefined||cs.length===0){this.boundingBox.min.set(0,0,0);this.boundingBox.max.set(0,0,0)}},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new aH.Sphere()}var ct=this.attributes.position.array;if(ct){var cv,cs=0;var e,cy,cx;for(var cw=0,cu=ct.length;cw<cu;cw+=3){e=ct[cw];cy=ct[cw+1];cx=ct[cw+2];cv=e*e+cy*cy+cx*cx;if(cv>cs){cs=cv}}this.boundingSphere.radius=Math.sqrt(cs)}},computeVertexNormals:function(){if(this.attributes.position){var cI,cz;var cF,cK;var cM=this.attributes.position.array.length;if(this.attributes.normal===undefined){this.attributes.normal={itemSize:3,array:new Float32Array(cM),numItems:cM}}else{for(cI=0,cz=this.attributes.normal.array.length;cI<cz;cI++){this.attributes.normal.array[cI]=0}}var cw=this.attributes.position.array;var cB=this.attributes.normal.array;var cL,cJ,cH,cA,cy,cx,cG=new aH.Vector3(),cE=new aH.Vector3(),cD=new aH.Vector3(),cC=new aH.Vector3(),cN=new aH.Vector3();if(this.attributes.index){var ct=this.attributes.index.array;var cs=this.offsets;for(cF=0,cK=cs.length;cF<cK;++cF){var e=cs[cF].start;var cv=cs[cF].count;var cu=cs[cF].index;for(cI=e,cz=e+cv;cI<cz;cI+=3){cL=cu+ct[cI];cJ=cu+ct[cI+1];cH=cu+ct[cI+2];cA=cw[cL*3];cy=cw[cL*3+1];cx=cw[cL*3+2];cG.set(cA,cy,cx);cA=cw[cJ*3];cy=cw[cJ*3+1];cx=cw[cJ*3+2];cE.set(cA,cy,cx);cA=cw[cH*3];cy=cw[cH*3+1];cx=cw[cH*3+2];cD.set(cA,cy,cx);cC.subVectors(cD,cE);cN.subVectors(cG,cE);cC.cross(cN);cB[cL*3]+=cC.x;cB[cL*3+1]+=cC.y;cB[cL*3+2]+=cC.z;cB[cJ*3]+=cC.x;cB[cJ*3+1]+=cC.y;cB[cJ*3+2]+=cC.z;cB[cH*3]+=cC.x;cB[cH*3+1]+=cC.y;cB[cH*3+2]+=cC.z}}}else{for(cI=0,cz=cw.length;cI<cz;cI+=9){cA=cw[cI];cy=cw[cI+1];cx=cw[cI+2];cG.set(cA,cy,cx);cA=cw[cI+3];cy=cw[cI+4];cx=cw[cI+5];cE.set(cA,cy,cx);cA=cw[cI+6];cy=cw[cI+7];cx=cw[cI+8];cD.set(cA,cy,cx);cC.subVectors(cD,cE);cN.subVectors(cG,cE);cC.cross(cN);cB[cI]=cC.x;cB[cI+1]=cC.y;cB[cI+2]=cC.z;cB[cI+3]=cC.x;cB[cI+4]=cC.y;cB[cI+5]=cC.z;cB[cI+6]=cC.x;cB[cI+7]=cC.y;cB[cI+8]=cC.z}}this.normalizeNormals();this.normalsNeedUpdate=true}},normalizeNormals:function(){var cu=this.attributes.normal.array;var e,cx,cv,cw;for(var ct=0,cs=cu.length;ct<cs;ct+=3){e=cu[ct];cx=cu[ct+1];cv=cu[ct+2];cw=1/Math.sqrt(e*e+cx*cx+cv*cv);cu[ct]*=cw;cu[ct+1]*=cw;cu[ct+2]*=cw}},computeTangents:function(){if(this.attributes.index===undefined||this.attributes.position===undefined||this.attributes.normal===undefined||this.attributes.uv===undefined){console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var cw=this.attributes.index.array;var cE=this.attributes.position.array;var cI=this.attributes.normal.array;var c0=this.attributes.uv.array;var cH=cE.length/3;if(this.attributes.tangent===undefined){var cJ=4*cH;this.attributes.tangent={itemSize:4,array:new Float32Array(cJ),numItems:cJ}}var cQ=this.attributes.tangent.array;var dk=[],dj=[];for(var dd=0;dd<cH;dd++){dk[dd]=new aH.Vector3();dj[dd]=new aH.Vector3()}var cA,db,cP,cz,da,cO,cy,c8,cM,cx,c7,cv,c5,cu,c3,cG,cF,dm,dl,cY,cX,di,dh,cW,cV,c4;var cB=new aH.Vector3(),cS=new aH.Vector3();function cZ(dp,dn,dq){cA=cE[dp*3];db=cE[dp*3+1];cP=cE[dp*3+2];cz=cE[dn*3];da=cE[dn*3+1];cO=cE[dn*3+2];cy=cE[dq*3];c8=cE[dq*3+1];cM=cE[dq*3+2];cx=c0[dp*2];c7=c0[dp*2+1];cv=c0[dn*2];c5=c0[dn*2+1];cu=c0[dq*2];c3=c0[dq*2+1];cG=cz-cA;cF=cy-cA;dm=da-db;dl=c8-db;cY=cO-cP;cX=cM-cP;di=cv-cx;dh=cu-cx;cW=c5-c7;cV=c3-c7;c4=1/(di*cV-dh*cW);cB.set((cV*cG-cW*cF)*c4,(cV*dm-cW*dl)*c4,(cV*cY-cW*cX)*c4);cS.set((di*cF-dh*cG)*c4,(di*dl-dh*dm)*c4,(di*cX-dh*cY)*c4);dk[dp].add(cB);dk[dn].add(cB);dk[dq].add(cB);dj[dp].add(cS);dj[dn].add(cS);dj[dq].add(cS)}var df,cT;var de,cD;var ct,cs,e;var cL=this.offsets;for(de=0,cD=cL.length;de<cD;++de){var cN=cL[de].start;var c6=cL[de].count;var cU=cL[de].index;for(df=cN,cT=cN+c6;df<cT;df+=3){ct=cU+cw[df];cs=cU+cw[df+1];e=cU+cw[df+2];cZ(ct,cs,e)}}var c9=new aH.Vector3(),dg=new aH.Vector3();var dc=new aH.Vector3(),cR=new aH.Vector3();var c1,c2,cC;function cK(dn){dc.x=cI[dn*3];dc.y=cI[dn*3+1];dc.z=cI[dn*3+2];cR.copy(dc);c2=dk[dn];c9.copy(c2);c9.sub(dc.multiplyScalar(dc.dot(c2))).normalize();dg.crossVectors(cR,c2);cC=dg.dot(dj[dn]);c1=(cC<0)?-1:1;cQ[dn*4]=c9.x;cQ[dn*4+1]=c9.y;cQ[dn*4+2]=c9.z;cQ[dn*4+3]=c1}for(de=0,cD=cL.length;de<cD;++de){var cN=cL[de].start;var c6=cL[de].count;var cU=cL[de].index;for(df=cN,cT=cN+c6;df<cT;df+=3){ct=cU+cw[df];cs=cU+cw[df+1];e=cU+cw[df+2];cK(ct);cK(cs);cK(e)}}this.hasTangents=true;this.tangentsNeedUpdate=true},dispose:function(){this.dispatchEvent({type:"dispose"})}};aH.Camera=function(){aH.Object3D.call(this);this.matrixWorldInverse=new aH.Matrix4();this.projectionMatrix=new aH.Matrix4();this.projectionMatrixInverse=new aH.Matrix4()};aH.Camera.prototype=Object.create(aH.Object3D.prototype);aH.Camera.prototype.lookAt=function(){var e=new aH.Matrix4();return function(cs){e.lookAt(this.position,cs,this.up);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(e)}else{this.rotation.setEulerFromRotationMatrix(e,this.eulerOrder)}}}();aH.OrthographicCamera=function(cw,ct,cv,cs,cu,e){aH.Camera.call(this);this.left=cw;this.right=ct;this.top=cv;this.bottom=cs;this.near=(cu!==undefined)?cu:0.1;this.far=(e!==undefined)?e:2000;this.updateProjectionMatrix()};aH.OrthographicCamera.prototype=Object.create(aH.Camera.prototype);aH.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};aH.Material=function(){this.id=aH.MaterialIdCount++;this.name="";this.side=aH.FrontSide;this.opacity=1;this.transparent=false;this.blending=aH.NormalBlending;this.blendSrc=aH.SrcAlphaFactor;this.blendDst=aH.OneMinusSrcAlphaFactor;this.blendEquation=aH.AddEquation;this.depthTest=true;this.depthWrite=true;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.alphaTest=0;this.overdraw=false;this.visible=true;this.needsUpdate=true};aH.Material.prototype={constructor:aH.Material,addEventListener:aH.EventDispatcher.prototype.addEventListener,hasEventListener:aH.EventDispatcher.prototype.hasEventListener,removeEventListener:aH.EventDispatcher.prototype.removeEventListener,dispatchEvent:aH.EventDispatcher.prototype.dispatchEvent,setValues:function(e){if(e===undefined){return}for(var cs in e){var cu=e[cs];if(cu===undefined){console.warn("THREE.Material: '"+cs+"' parameter is undefined.");continue}if(cs in this){var ct=this[cs];if(ct instanceof aH.Color){ct.set(cu)}else{if(ct instanceof aH.Vector3&&cu instanceof aH.Vector3){ct.copy(cu)}else{this[cs]=cu}}}}},clone:function(e){if(e===undefined){e=new aH.Material()}e.name=this.name;e.side=this.side;e.opacity=this.opacity;e.transparent=this.transparent;e.blending=this.blending;e.blendSrc=this.blendSrc;e.blendDst=this.blendDst;e.blendEquation=this.blendEquation;e.depthTest=this.depthTest;e.depthWrite=this.depthWrite;e.polygonOffset=this.polygonOffset;e.polygonOffsetFactor=this.polygonOffsetFactor;e.polygonOffsetUnits=this.polygonOffsetUnits;e.alphaTest=this.alphaTest;e.overdraw=this.overdraw;e.visible=this.visible;return e},dispose:function(){this.dispatchEvent({type:"dispose"})}};aH.MaterialIdCount=0;aH.MeshBasicMaterial=function(e){aH.Material.call(this);this.color=new aH.Color(16777215);this.map=null;this.lightMap=null;this.specularMap=null;this.envMap=null;this.combine=aH.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=aH.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=aH.NoColors;this.skinning=false;this.morphTargets=false;this.setValues(e)};aH.MeshBasicMaterial.prototype=Object.create(aH.Material.prototype);aH.MeshBasicMaterial.prototype.clone=function(){var e=new aH.MeshBasicMaterial();aH.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.map=this.map;e.lightMap=this.lightMap;e.specularMap=this.specularMap;e.envMap=this.envMap;e.combine=this.combine;e.reflectivity=this.reflectivity;e.refractionRatio=this.refractionRatio;e.fog=this.fog;e.shading=this.shading;e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;e.wireframeLinecap=this.wireframeLinecap;e.wireframeLinejoin=this.wireframeLinejoin;e.vertexColors=this.vertexColors;e.skinning=this.skinning;e.morphTargets=this.morphTargets;return e};aH.Line=function(ct,cs,e){aH.Object3D.call(this);this.geometry=ct;this.material=(cs!==undefined)?cs:new aH.LineBasicMaterial({color:Math.random()*16777215});this.type=(e!==undefined)?e:aH.LineStrip;if(this.geometry){if(!this.geometry.boundingSphere){this.geometry.computeBoundingSphere()}}};aH.LineStrip=0;aH.LinePieces=1;aH.Line.prototype=Object.create(aH.Object3D.prototype);aH.Line.prototype.clone=function(e){if(e===undefined){e=new aH.Line(this.geometry,this.material,this.type)}aH.Object3D.prototype.clone.call(this,e);return e};aH.Mesh=function(cs,e){aH.Object3D.call(this);this.geometry=null;this.material=null;this.setGeometry(cs);this.setMaterial(e)};aH.Mesh.prototype=Object.create(aH.Object3D.prototype);aH.Mesh.prototype.setGeometry=function(e){if(e!==undefined){this.geometry=e;if(this.geometry.boundingSphere===null){this.geometry.computeBoundingSphere()}this.updateMorphTargets()}};aH.Mesh.prototype.setMaterial=function(e){if(e!==undefined){this.material=e}else{this.material=new aH.MeshBasicMaterial({color:Math.random()*16777215,wireframe:true})}};aH.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets.length>0){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var e=0,cs=this.geometry.morphTargets.length;e<cs;e++){this.morphTargetInfluences.push(0);this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}}};aH.Mesh.prototype.getMorphTargetIndexByName=function(e){if(this.morphTargetDictionary[e]!==undefined){return this.morphTargetDictionary[e]}console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0.");return 0};aH.Mesh.prototype.clone=function(e){if(e===undefined){e=new aH.Mesh(this.geometry,this.material)}aH.Object3D.prototype.clone.call(this,e);return e};aH.Scene=function(){aH.Object3D.call(this);this.fog=null;this.overrideMaterial=null;this.autoUpdate=true;this.matrixAutoUpdate=false;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};aH.Scene.prototype=Object.create(aH.Object3D.prototype);aH.Scene.prototype.__addObject=function(e){if(!(e instanceof aH.Camera)){if(this.__objects.indexOf(e)===-1){this.__objects.push(e);this.__objectsAdded.push(e);var cs=this.__objectsRemoved.indexOf(e);if(cs!==-1){this.__objectsRemoved.splice(cs,1)}}}for(var ct=0;ct<e.children.length;ct++){this.__addObject(e.children[ct])}};aH.Scene.prototype.__removeObject=function(cs){if(!(cs instanceof aH.Camera)){var ct=this.__objects.indexOf(cs);if(ct!==-1){this.__objects.splice(ct,1);this.__objectsRemoved.push(cs);var e=this.__objectsAdded.indexOf(cs);if(e!==-1){this.__objectsAdded.splice(e,1)}}}for(var cu=0;cu<cs.children.length;cu++){this.__removeObject(cs.children[cu])}};aH.CanvasRenderer=function(cR){console.log("THREE.CanvasRenderer",aH.REVISION);var dC=aH.Math.smoothstep;cR=cR||{};var cK=this,cO,cS,cB,e=new aH.Projector(),cw=cR.canvas!==undefined?cR.canvas:document.createElement("canvas"),cM,dB,dm,cV,cu=cw.getContext("2d"),cT=new aH.Color(0),dx=0,dD=1,dz=0,cL=null,dy=null,cY=null,cz=null,du=null,cW=null,dq=0,dl,dj,dh,dg,df=new aH.RenderableVertex(),dd=new aH.RenderableVertex(),cJ,cI,ct,cs,dK,dH,dw,dv,c9,c7,c1,c0,cv=new aH.Color(),cF=new aH.Color(),cE=new aH.Color(),cD=new aH.Color(),cC=new aH.Color(),db=new aH.Color(),cG=new aH.Color(),ds=new aH.Color(),cU={},c5={},c4,dN,dc,cy,dJ,dF,dt,dr,c8,c6,dM=new aH.Box2(),cH=new aH.Box2(),cN=new aH.Box2(),dE=new aH.Color(),cQ=new aH.Color(),di=new aH.Color(),cA=new aH.Vector3(),dI,cx,dL,c3,cZ,c2,dk=16;dI=document.createElement("canvas");dI.width=dI.height=2;cx=dI.getContext("2d");cx.fillStyle="rgba(0,0,0,1)";cx.fillRect(0,0,2,2);dL=cx.getImageData(0,0,2,2);c3=dL.data;cZ=document.createElement("canvas");cZ.width=cZ.height=dk;c2=cZ.getContext("2d");c2.translate(-dk/2,-dk/2);c2.scale(dk,dk);dk--;if(cu.setLineDash===undefined){if(cu.mozDash!==undefined){cu.setLineDash=function(dO){cu.mozDash=dO[0]!==null?dO:null}}else{cu.setLineDash=function(){}}}this.domElement=cw;this.devicePixelRatio=cR.devicePixelRatio!==undefined?cR.devicePixelRatio:window.devicePixelRatio!==undefined?window.devicePixelRatio:1;this.autoClear=true;this.sortObjects=true;this.sortElements=true;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=function(dP,dO,dQ){cM=dP*this.devicePixelRatio;dB=dO*this.devicePixelRatio;dm=Math.floor(cM/2);cV=Math.floor(dB/2);cw.width=cM;cw.height=dB;if(this.devicePixelRatio!==1&&dQ!==false){cw.style.width=dP+"px";cw.style.height=dO+"px"}dM.set(new aH.Vector2(-dm,-cV),new aH.Vector2(dm,cV));cH.set(new aH.Vector2(-dm,-cV),new aH.Vector2(dm,cV));dD=1;dz=0;cL=null;dy=null;cY=null;cz=null;du=null};this.setClearColor=function(dO,dP){cT.set(dO);dx=dP!==undefined?dP:1;cH.set(new aH.Vector2(-dm,-cV),new aH.Vector2(dm,cV))};this.setClearColorHex=function(dO,dP){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(dO,dP)};this.getMaxAnisotropy=function(){return 0};this.clear=function(){cu.setTransform(1,0,0,-1,dm,cV);if(cH.empty()===false){cH.intersect(dM);cH.expandByScalar(2);if(dx<1){cu.clearRect(cH.min.x|0,cH.min.y|0,(cH.max.x-cH.min.x)|0,(cH.max.y-cH.min.y)|0)}if(dx>0){dp(aH.NormalBlending);cP(1);dn("rgba("+Math.floor(cT.r*255)+","+Math.floor(cT.g*255)+","+Math.floor(cT.b*255)+","+dx+")");cu.fillRect(cH.min.x|0,cH.min.y|0,(cH.max.x-cH.min.x)|0,(cH.max.y-cH.min.y)|0)}cH.makeEmpty()}};this.render=function(d4,d1){if(d1 instanceof aH.Camera===false){console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");return}if(this.autoClear===true){this.clear()}cu.setTransform(1,0,0,-1,dm,cV);cK.info.render.vertices=0;cK.info.render.faces=0;cO=e.projectScene(d4,d1,this.sortObjects,this.sortElements);cS=cO.elements;cB=cO.lights;dU();for(var d3=0,dR=cS.length;d3<dR;d3++){var dS=cS[d3];var dX=dS.material;if(dX===undefined||dX.visible===false){continue}cN.makeEmpty();if(dS instanceof aH.RenderableParticle){dl=dS;dl.x*=dm;dl.y*=cV;dW(dl,dS,dX)}else{if(dS instanceof aH.RenderableLine){dl=dS.v1;dj=dS.v2;dl.positionScreen.x*=dm;dl.positionScreen.y*=cV;dj.positionScreen.x*=dm;dj.positionScreen.y*=cV;cN.setFromPoints([dl.positionScreen,dj.positionScreen]);if(dM.isIntersectionBox(cN)===true){dQ(dl,dj,dS,dX)}}else{if(dS instanceof aH.RenderableFace3){dl=dS.v1;dj=dS.v2;dh=dS.v3;if(dl.positionScreen.z<-1||dl.positionScreen.z>1){continue}if(dj.positionScreen.z<-1||dj.positionScreen.z>1){continue}if(dh.positionScreen.z<-1||dh.positionScreen.z>1){continue}dl.positionScreen.x*=dm;dl.positionScreen.y*=cV;dj.positionScreen.x*=dm;dj.positionScreen.y*=cV;dh.positionScreen.x*=dm;dh.positionScreen.y*=cV;if(dX.overdraw===true){dO(dl.positionScreen,dj.positionScreen);dO(dj.positionScreen,dh.positionScreen);dO(dh.positionScreen,dl.positionScreen)}cN.setFromPoints([dl.positionScreen,dj.positionScreen,dh.positionScreen]);if(dM.isIntersectionBox(cN)===true){dV(dl,dj,dh,0,1,2,dS,dX)}}else{if(dS instanceof aH.RenderableFace4){dl=dS.v1;dj=dS.v2;dh=dS.v3;dg=dS.v4;if(dl.positionScreen.z<-1||dl.positionScreen.z>1){continue}if(dj.positionScreen.z<-1||dj.positionScreen.z>1){continue}if(dh.positionScreen.z<-1||dh.positionScreen.z>1){continue}if(dg.positionScreen.z<-1||dg.positionScreen.z>1){continue}dl.positionScreen.x*=dm;dl.positionScreen.y*=cV;dj.positionScreen.x*=dm;dj.positionScreen.y*=cV;dh.positionScreen.x*=dm;dh.positionScreen.y*=cV;dg.positionScreen.x*=dm;dg.positionScreen.y*=cV;df.positionScreen.copy(dj.positionScreen);dd.positionScreen.copy(dg.positionScreen);if(dX.overdraw===true){dO(dl.positionScreen,dj.positionScreen);dO(dj.positionScreen,dg.positionScreen);dO(dg.positionScreen,dl.positionScreen);dO(dh.positionScreen,df.positionScreen);dO(dh.positionScreen,dd.positionScreen)}cN.setFromPoints([dl.positionScreen,dj.positionScreen,dh.positionScreen,dg.positionScreen]);if(dM.isIntersectionBox(cN)===true){dT(dl,dj,dh,dg,df,dd,dS,dX)}}}}}cH.union(cN)}cu.setTransform(1,0,0,1,0,0);function dU(){dE.setRGB(0,0,0);cQ.setRGB(0,0,0);di.setRGB(0,0,0);for(var ea=0,eb=cB.length;ea<eb;ea++){var d9=cB[ea];var d8=d9.color;if(d9 instanceof aH.AmbientLight){dE.add(d8)}else{if(d9 instanceof aH.DirectionalLight){cQ.add(d8)}else{if(d9 instanceof aH.PointLight){di.add(d8)}}}}}function dZ(d8,ef,ec){for(var eb=0,ee=cB.length;eb<ee;eb++){var ea=cB[eb];ds.copy(ea.color);if(ea instanceof aH.DirectionalLight){var d9=cA.getPositionFromMatrix(ea.matrixWorld).normalize();var ed=ef.dot(d9);if(ed<=0){continue}ed*=ea.intensity;ec.add(ds.multiplyScalar(ed))}else{if(ea instanceof aH.PointLight){var d9=cA.getPositionFromMatrix(ea.matrixWorld);var ed=ef.dot(cA.subVectors(d9,d8).normalize());if(ed<=0){continue}ed*=ea.distance==0?1:1-Math.min(d8.distanceTo(d9)/ea.distance,1);if(ed==0){continue}ed*=ea.intensity;ec.add(ds.multiplyScalar(ed))}}}}function dW(ed,ea,eb){cP(eb.opacity);dp(eb.blending);var d8,eh,ef,ee,ec,eg,d9;if(eb instanceof aH.ParticleBasicMaterial){if(eb.map===null){ef=ea.object.scale.x;ee=ea.object.scale.y;ef*=ea.scale.x*dm;ee*=ea.scale.y*cV;cN.min.set(ed.x-ef,ed.y-ee);cN.max.set(ed.x+ef,ed.y+ee);if(dM.isIntersectionBox(cN)===false){cN.makeEmpty();return}dn(eb.color.getStyle());cu.save();cu.translate(ed.x,ed.y);cu.rotate(-ea.rotation);cu.scale(ef,ee);cu.fillRect(-1,-1,2,2);cu.restore()}else{ec=eb.map.image;eg=ec.width>>1;d9=ec.height>>1;ef=ea.scale.x*dm;ee=ea.scale.y*cV;d8=ef*eg;eh=ee*d9;cN.min.set(ed.x-d8,ed.y-eh);cN.max.set(ed.x+d8,ed.y+eh);if(dM.isIntersectionBox(cN)===false){cN.makeEmpty();return}cu.save();cu.translate(ed.x,ed.y);cu.rotate(-ea.rotation);cu.scale(ef,-ee);cu.translate(-eg,-d9);cu.drawImage(ec,0,0);cu.restore()}}else{if(eb instanceof aH.ParticleCanvasMaterial){d8=ea.scale.x*dm;eh=ea.scale.y*cV;cN.min.set(ed.x-d8,ed.y-eh);cN.max.set(ed.x+d8,ed.y+eh);if(dM.isIntersectionBox(cN)===false){cN.makeEmpty();return}dA(eb.color.getStyle());dn(eb.color.getStyle());cu.save();cu.translate(ed.x,ed.y);cu.rotate(-ea.rotation);cu.scale(d8,eh);eb.program(cu);cu.restore()}}}function dQ(ef,ed,eb,ec){cP(ec.opacity);dp(ec.blending);cu.beginPath();cu.moveTo(ef.positionScreen.x,ef.positionScreen.y);cu.lineTo(ed.positionScreen.x,ed.positionScreen.y);if(ec instanceof aH.LineBasicMaterial){cX(ec.linewidth);de(ec.linecap);dG(ec.linejoin);if(ec.vertexColors!==aH.VertexColors){dA(ec.color.getStyle())}else{var ea=eb.vertexColors[0].getStyle();var d8=eb.vertexColors[1].getStyle();if(ea===d8){dA(ea)}else{try{var ee=cu.createLinearGradient(ef.positionScreen.x,ef.positionScreen.y,ed.positionScreen.x,ed.positionScreen.y);ee.addColorStop(0,ea);ee.addColorStop(1,d8)}catch(d9){ee=ea}dA(ee)}}cu.stroke();cN.expandByScalar(ec.linewidth*2)}else{if(ec instanceof aH.LineDashedMaterial){cX(ec.linewidth);de(ec.linecap);dG(ec.linejoin);dA(ec.color.getStyle());da(ec.dashSize,ec.gapSize);cu.stroke();cN.expandByScalar(ec.linewidth*2);da(null,null)}}}function dV(eg,ef,ee,ea,d9,d8,eb,ed){cK.info.render.vertices+=3;cK.info.render.faces++;cP(ed.opacity);dp(ed.blending);cJ=eg.positionScreen.x;cI=eg.positionScreen.y;ct=ef.positionScreen.x;cs=ef.positionScreen.y;dK=ee.positionScreen.x;dH=ee.positionScreen.y;d0(cJ,cI,ct,cs,dK,dH);if((ed instanceof aH.MeshLambertMaterial||ed instanceof aH.MeshPhongMaterial)&&ed.map===null){db.copy(ed.color);cG.copy(ed.emissive);if(ed.vertexColors===aH.FaceColors){db.multiply(eb.color)}if(ed.wireframe===false&&ed.shading==aH.SmoothShading&&eb.vertexNormalsLength==3){cF.copy(dE);cE.copy(dE);cD.copy(dE);dZ(eb.v1.positionWorld,eb.vertexNormalsModel[0],cF);dZ(eb.v2.positionWorld,eb.vertexNormalsModel[1],cE);dZ(eb.v3.positionWorld,eb.vertexNormalsModel[2],cD);cF.multiply(db).add(cG);cE.multiply(db).add(cG);cD.multiply(db).add(cG);cC.addColors(cE,cD).multiplyScalar(0.5);dc=d7(cF,cE,cD,cC);d2(cJ,cI,ct,cs,dK,dH,0,0,1,0,0,1,dc)}else{cv.copy(dE);dZ(eb.centroidModel,eb.normalModel,cv);cv.multiply(db).add(cG);ed.wireframe===true?d6(cv,ed.wireframeLinewidth,ed.wireframeLinecap,ed.wireframeLinejoin):d5(cv)}}else{if(ed instanceof aH.MeshBasicMaterial||ed instanceof aH.MeshLambertMaterial||ed instanceof aH.MeshPhongMaterial){if(ed.map!==null){if(ed.map.mapping instanceof aH.UVMapping){cy=eb.uvs[0];dP(cJ,cI,ct,cs,dK,dH,cy[ea].x,cy[ea].y,cy[d9].x,cy[d9].y,cy[d8].x,cy[d8].y,ed.map)}}else{if(ed.envMap!==null){if(ed.envMap.mapping instanceof aH.SphericalReflectionMapping){cA.copy(eb.vertexNormalsModelView[ea]);dJ=0.5*cA.x+0.5;dF=0.5*cA.y+0.5;cA.copy(eb.vertexNormalsModelView[d9]);dt=0.5*cA.x+0.5;dr=0.5*cA.y+0.5;cA.copy(eb.vertexNormalsModelView[d8]);c8=0.5*cA.x+0.5;c6=0.5*cA.y+0.5;dP(cJ,cI,ct,cs,dK,dH,dJ,dF,dt,dr,c8,c6,ed.envMap)}}else{cv.copy(ed.color);if(ed.vertexColors===aH.FaceColors){cv.multiply(eb.color)}ed.wireframe===true?d6(cv,ed.wireframeLinewidth,ed.wireframeLinecap,ed.wireframeLinejoin):d5(cv)}}}else{if(ed instanceof aH.MeshDepthMaterial){c4=d1.near;dN=d1.far;cF.r=cF.g=cF.b=1-dC(eg.positionScreen.z*eg.positionScreen.w,c4,dN);cE.r=cE.g=cE.b=1-dC(ef.positionScreen.z*ef.positionScreen.w,c4,dN);cD.r=cD.g=cD.b=1-dC(ee.positionScreen.z*ee.positionScreen.w,c4,dN);cC.addColors(cE,cD).multiplyScalar(0.5);dc=d7(cF,cE,cD,cC);d2(cJ,cI,ct,cs,dK,dH,0,0,1,0,0,1,dc)}else{if(ed instanceof aH.MeshNormalMaterial){var ec;if(ed.shading==aH.FlatShading){ec=eb.normalModelView;cv.setRGB(ec.x,ec.y,ec.z).multiplyScalar(0.5).addScalar(0.5);ed.wireframe===true?d6(cv,ed.wireframeLinewidth,ed.wireframeLinecap,ed.wireframeLinejoin):d5(cv)}else{if(ed.shading==aH.SmoothShading){ec=eb.vertexNormalsModelView[ea];cF.setRGB(ec.x,ec.y,ec.z).multiplyScalar(0.5).addScalar(0.5);ec=eb.vertexNormalsModelView[d9];cE.setRGB(ec.x,ec.y,ec.z).multiplyScalar(0.5).addScalar(0.5);ec=eb.vertexNormalsModelView[d8];cD.setRGB(ec.x,ec.y,ec.z).multiplyScalar(0.5).addScalar(0.5);cC.addColors(cE,cD).multiplyScalar(0.5);dc=d7(cF,cE,cD,cC);d2(cJ,cI,ct,cs,dK,dH,0,0,1,0,0,1,dc)}}}}}}}function dT(eg,ef,ee,ed,ec,ea,d8,eb){cK.info.render.vertices+=4;cK.info.render.faces++;cP(eb.opacity);dp(eb.blending);if((eb.map!==undefined&&eb.map!==null)||(eb.envMap!==undefined&&eb.envMap!==null)){dV(eg,ef,ed,0,1,3,d8,eb);dV(ec,ee,ea,1,2,3,d8,eb);return}cJ=eg.positionScreen.x;cI=eg.positionScreen.y;ct=ef.positionScreen.x;cs=ef.positionScreen.y;dK=ee.positionScreen.x;dH=ee.positionScreen.y;dw=ed.positionScreen.x;dv=ed.positionScreen.y;c9=ec.positionScreen.x;c7=ec.positionScreen.y;c1=ea.positionScreen.x;c0=ea.positionScreen.y;if(eb instanceof aH.MeshLambertMaterial||eb instanceof aH.MeshPhongMaterial){db.copy(eb.color);cG.copy(eb.emissive);if(eb.vertexColors===aH.FaceColors){db.multiply(d8.color)}if(eb.wireframe===false&&eb.shading==aH.SmoothShading&&d8.vertexNormalsLength==4){cF.copy(dE);cE.copy(dE);cD.copy(dE);cC.copy(dE);dZ(d8.v1.positionWorld,d8.vertexNormalsModel[0],cF);dZ(d8.v2.positionWorld,d8.vertexNormalsModel[1],cE);dZ(d8.v4.positionWorld,d8.vertexNormalsModel[3],cD);dZ(d8.v3.positionWorld,d8.vertexNormalsModel[2],cC);cF.multiply(db).add(cG);cE.multiply(db).add(cG);cD.multiply(db).add(cG);cC.multiply(db).add(cG);dc=d7(cF,cE,cD,cC);d0(cJ,cI,ct,cs,dw,dv);d2(cJ,cI,ct,cs,dw,dv,0,0,1,0,0,1,dc);d0(c9,c7,dK,dH,c1,c0);d2(c9,c7,dK,dH,c1,c0,1,0,1,1,0,1,dc)}else{cv.copy(dE);dZ(d8.centroidModel,d8.normalModel,cv);cv.multiply(db).add(cG);dY(cJ,cI,ct,cs,dK,dH,dw,dv);eb.wireframe===true?d6(cv,eb.wireframeLinewidth,eb.wireframeLinecap,eb.wireframeLinejoin):d5(cv)}}else{if(eb instanceof aH.MeshBasicMaterial){cv.copy(eb.color);if(eb.vertexColors===aH.FaceColors){cv.multiply(d8.color)}dY(cJ,cI,ct,cs,dK,dH,dw,dv);eb.wireframe===true?d6(cv,eb.wireframeLinewidth,eb.wireframeLinecap,eb.wireframeLinejoin):d5(cv)}else{if(eb instanceof aH.MeshNormalMaterial){var d9;if(eb.shading==aH.FlatShading){d9=d8.normalModelView;cv.setRGB(d9.x,d9.y,d9.z).multiplyScalar(0.5).addScalar(0.5);dY(cJ,cI,ct,cs,dK,dH,dw,dv);eb.wireframe===true?d6(cv,eb.wireframeLinewidth,eb.wireframeLinecap,eb.wireframeLinejoin):d5(cv)}else{if(eb.shading==aH.SmoothShading){d9=d8.vertexNormalsModelView[0];cF.setRGB(d9.x,d9.y,d9.z).multiplyScalar(0.5).addScalar(0.5);d9=d8.vertexNormalsModelView[1];cE.setRGB(d9.x,d9.y,d9.z).multiplyScalar(0.5).addScalar(0.5);d9=d8.vertexNormalsModelView[3];cD.setRGB(d9.x,d9.y,d9.z).multiplyScalar(0.5).addScalar(0.5);d9=d8.vertexNormalsModelView[2];cC.setRGB(d9.x,d9.y,d9.z).multiplyScalar(0.5).addScalar(0.5);dc=d7(cF,cE,cD,cC);d0(cJ,cI,ct,cs,dw,dv);d2(cJ,cI,ct,cs,dw,dv,0,0,1,0,0,1,dc);d0(c9,c7,dK,dH,c1,c0);d2(c9,c7,dK,dH,c1,c0,1,0,1,1,0,1,dc)}}}else{if(eb instanceof aH.MeshDepthMaterial){c4=d1.near;dN=d1.far;cF.r=cF.g=cF.b=1-dC(eg.positionScreen.z*eg.positionScreen.w,c4,dN);cE.r=cE.g=cE.b=1-dC(ef.positionScreen.z*ef.positionScreen.w,c4,dN);cD.r=cD.g=cD.b=1-dC(ed.positionScreen.z*ed.positionScreen.w,c4,dN);cC.r=cC.g=cC.b=1-dC(ee.positionScreen.z*ee.positionScreen.w,c4,dN);dc=d7(cF,cE,cD,cC);d0(cJ,cI,ct,cs,dw,dv);d2(cJ,cI,ct,cs,dw,dv,0,0,1,0,0,1,dc);d0(c9,c7,dK,dH,c1,c0);d2(c9,c7,dK,dH,c1,c0,1,0,1,1,0,1,dc)}}}}}function d0(eb,ed,d9,ec,d8,ea){cu.beginPath();cu.moveTo(eb,ed);cu.lineTo(d9,ec);cu.lineTo(d8,ea);cu.closePath()}function dY(ed,ef,eb,ee,d9,ec,d8,ea){cu.beginPath();cu.moveTo(ed,ef);cu.lineTo(eb,ee);cu.lineTo(d9,ec);cu.lineTo(d8,ea);cu.closePath()}function d6(d8,eb,ea,d9){cX(eb);de(ea);dG(d9);dA(d8.getStyle());cu.stroke();cN.expandByScalar(eb*2)}function d5(d8){dn(d8.getStyle());cu.fill()}function dP(es,ef,ep,ed,en,eb,eo,ec,em,ea,el,d8,ei){if(ei instanceof aH.DataTexture||ei.image===undefined||ei.image.width==0){return}if(ei.needsUpdate===true){var eA=ei.wrapS==aH.RepeatWrapping;var ey=ei.wrapT==aH.RepeatWrapping;cU[ei.id]=cu.createPattern(ei.image,eA===true&&ey===true?"repeat":eA===true&&ey===false?"repeat-x":eA===false&&ey===true?"repeat-y":"no-repeat");ei.needsUpdate=false}cU[ei.id]===undefined?dn("rgba(0,0,0,1)"):dn(cU[ei.id]);var eB,ez,ex,ew,eu,er,eg,ev,et=ei.offset.x/ei.repeat.x,eq=ei.offset.y/ei.repeat.y,ek=ei.image.width*ei.repeat.x,ej=ei.image.height*ei.repeat.y;eo=(eo+et)*ek;ec=(1-ec+eq)*ej;em=(em+et)*ek;ea=(1-ea+eq)*ej;el=(el+et)*ek;d8=(1-d8+eq)*ej;ep-=es;ed-=ef;en-=es;eb-=ef;em-=eo;ea-=ec;el-=eo;d8-=ec;eg=em*d8-el*ea;if(eg===0){if(c5[ei.id]===undefined){var ee=document.createElement("canvas");ee.width=ei.image.width;ee.height=ei.image.height;var d9=ee.getContext("2d");d9.drawImage(ei.image,0,0);c5[ei.id]=d9.getImageData(0,0,ei.image.width,ei.image.height).data}var eC=c5[ei.id];var eh=(Math.floor(eo)+Math.floor(ec)*ei.image.width)*4;cv.setRGB(eC[eh]/255,eC[eh+1]/255,eC[eh+2]/255);d5(cv);return}ev=1/eg;eB=(d8*ep-ea*en)*ev;ez=(d8*ed-ea*eb)*ev;ex=(em*en-el*ep)*ev;ew=(em*eb-el*ed)*ev;eu=es-eB*eo-ex*ec;er=ef-ez*eo-ew*ec;cu.save();cu.transform(eB,ez,ex,ew,eu,er);cu.fill();cu.restore()}function d2(eo,ed,em,ec,ek,ea,el,eb,ej,d9,ei,d8,eg){var eu,et,es,er,ep,en,ee,eq,eh=eg.width-1,ef=eg.height-1;el*=eh;eb*=ef;ej*=eh;d9*=ef;ei*=eh;d8*=ef;em-=eo;ec-=ed;ek-=eo;ea-=ed;ej-=el;d9-=eb;ei-=el;d8-=eb;ee=ej*d8-ei*d9;eq=1/ee;eu=(d8*em-d9*ek)*eq;et=(d8*ec-d9*ea)*eq;es=(ej*ek-ei*em)*eq;er=(ej*ea-ei*ec)*eq;ep=eo-eu*el-es*eb;en=ed-et*el-er*eb;cu.save();cu.transform(eu,et,es,er,ep,en);cu.clip();cu.drawImage(eg,0,0);cu.restore()}function d7(d9,d8,eb,ea){c3[0]=(d9.r*255)|0;c3[1]=(d9.g*255)|0;c3[2]=(d9.b*255)|0;c3[4]=(d8.r*255)|0;c3[5]=(d8.g*255)|0;c3[6]=(d8.b*255)|0;c3[8]=(eb.r*255)|0;c3[9]=(eb.g*255)|0;c3[10]=(eb.b*255)|0;c3[12]=(ea.r*255)|0;c3[13]=(ea.g*255)|0;c3[14]=(ea.b*255)|0;cx.putImageData(dL,0,0);c2.drawImage(dI,0,0);return cZ}function dO(ed,eb){var d8=eb.x-ed.x,ec=eb.y-ed.y,d9=d8*d8+ec*ec,ea;if(d9===0){return}ea=1/Math.sqrt(d9);d8*=ea;ec*=ea;eb.x+=d8;eb.y+=ec;ed.x-=d8;ed.y-=ec}};function cP(dO){if(dD!==dO){cu.globalAlpha=dO;dD=dO}}function dp(dO){if(dz!==dO){if(dO===aH.NormalBlending){cu.globalCompositeOperation="source-over"}else{if(dO===aH.AdditiveBlending){cu.globalCompositeOperation="lighter"}else{if(dO===aH.SubtractiveBlending){cu.globalCompositeOperation="darker"}}}dz=dO}}function cX(dO){if(cY!==dO){cu.lineWidth=dO;cY=dO}}function de(dO){if(cz!==dO){cu.lineCap=dO;cz=dO}}function dG(dO){if(du!==dO){cu.lineJoin=dO;du=dO}}function dA(dO){if(cL!==dO){cu.strokeStyle=dO;cL=dO}}function dn(dO){if(dy!==dO){cu.fillStyle=dO;dy=dO}}function da(dO,dP){if(cW!==dO||dq!==dP){cu.setLineDash([dO,dP]);cW=dO;dq=dP}}};aH.RenderableVertex=function(){this.positionWorld=new aH.Vector3();this.positionScreen=new aH.Vector4();this.visible=true};aH.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld);this.positionScreen.copy(e.positionScreen)};aH.RenderableFace3=function(){this.v1=new aH.RenderableVertex();this.v2=new aH.RenderableVertex();this.v3=new aH.RenderableVertex();this.centroidModel=new aH.Vector3();this.normalModel=new aH.Vector3();this.normalModelView=new aH.Vector3();this.vertexNormalsLength=0;this.vertexNormalsModel=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3()];this.vertexNormalsModelView=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3()];this.color=null;this.material=null;this.uvs=[[]];this.z=null};aH.RenderableFace4=function(){this.v1=new aH.RenderableVertex();this.v2=new aH.RenderableVertex();this.v3=new aH.RenderableVertex();this.v4=new aH.RenderableVertex();this.centroidModel=new aH.Vector3();this.normalModel=new aH.Vector3();this.normalModelView=new aH.Vector3();this.vertexNormalsLength=0;this.vertexNormalsModel=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3()];this.vertexNormalsModelView=[new aH.Vector3(),new aH.Vector3(),new aH.Vector3(),new aH.Vector3()];this.color=null;this.material=null;this.uvs=[[]];this.z=null};aH.RenderableObject=function(){this.object=null;this.z=null};aH.RenderableParticle=function(){this.object=null;this.x=null;this.y=null;this.z=null;this.rotation=null;this.scale=new aH.Vector2();this.material=null};aH.RenderableLine=function(){this.z=null;this.v1=new aH.RenderableVertex();this.v2=new aH.RenderableVertex();this.vertexColors=[new aH.Color(),new aH.Color()];this.material=null};aH.CubeGeometry=function(e,cz,cv,cs,cy,cu){aH.Geometry.call(this);var cB=this;this.width=e;this.height=cz;this.depth=cv;this.widthSegments=cs||1;this.heightSegments=cy||1;this.depthSegments=cu||1;var cA=this.width/2;var cx=this.height/2;var ct=this.depth/2;cw("z","y",-1,-1,this.depth,this.height,cA,0);cw("z","y",1,-1,this.depth,this.height,-cA,1);cw("x","z",1,1,this.width,this.depth,cx,2);cw("x","z",1,-1,this.width,this.depth,-cx,3);cw("x","y",1,-1,this.width,this.height,ct,4);cw("x","y",-1,-1,this.width,this.height,-ct,5);function cw(cP,cO,cC,cJ,cR,cQ,c2,cL){var cN,cH,cG,cT=cB.widthSegments,cS=cB.heightSegments,cI=cR/2,cF=cQ/2,cK=cB.vertices.length;if((cP==="x"&&cO==="y")||(cP==="y"&&cO==="x")){cN="z"}else{if((cP==="x"&&cO==="z")||(cP==="z"&&cO==="x")){cN="y";cS=cB.depthSegments}else{if((cP==="z"&&cO==="y")||(cP==="y"&&cO==="z")){cN="x";cT=cB.depthSegments}}}var cU=cT+1,cE=cS+1,c1=cR/cT,cW=cQ/cS,c0=new aH.Vector3();c0[cN]=c2>0?1:-1;for(cG=0;cG<cE;cG++){for(cH=0;cH<cU;cH++){var cD=new aH.Vector3();cD[cP]=(cH*c1-cI)*cC;cD[cO]=(cG*cW-cF)*cJ;cD[cN]=c2;cB.vertices.push(cD)}}for(cG=0;cG<cS;cG++){for(cH=0;cH<cT;cH++){var cZ=cH+cU*cG;var cY=cH+cU*(cG+1);var cX=(cH+1)+cU*(cG+1);var cV=(cH+1)+cU*cG;var cM=new aH.Face4(cZ+cK,cY+cK,cX+cK,cV+cK);cM.normal.copy(c0);cM.vertexNormals.push(c0.clone(),c0.clone(),c0.clone(),c0.clone());cM.materialIndex=cL;cB.faces.push(cM);cB.faceVertexUvs[0].push([new aH.Vector2(cH/cT,1-cG/cS),new aH.Vector2(cH/cT,1-(cG+1)/cS),new aH.Vector2((cH+1)/cT,1-(cG+1)/cS),new aH.Vector2((cH+1)/cT,1-cG/cS)])}}}this.computeCentroids();this.mergeVertices()};aH.CubeGeometry.prototype=Object.create(aH.Geometry.prototype);aH.CircleGeometry=function(cA,cx,cu,cs){aH.Geometry.call(this);cA=cA||50;cu=cu!==undefined?cu:0;cs=cs!==undefined?cs:Math.PI*2;cx=cx!==undefined?Math.max(3,cx):8;var cw,cv=[],e=new aH.Vector3(),cD=new aH.Vector2(0.5,0.5);this.vertices.push(e);cv.push(cD);for(cw=0;cw<=cx;cw++){var cz=new aH.Vector3();var cy=cu+cw/cx*cs;cz.x=cA*Math.cos(cy);cz.y=cA*Math.sin(cy);this.vertices.push(cz);cv.push(new aH.Vector2((cz.x/cA+1)/2,(cz.y/cA+1)/2))}var ct=new aH.Vector3(0,0,1);for(cw=1;cw<=cx;cw++){var cE=cw;var cC=cw+1;var cB=0;this.faces.push(new aH.Face3(cE,cC,cB,[ct,ct,ct]));this.faceVertexUvs[0].push([cv[cw],cv[cw+1],cD])}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new aH.Sphere(new aH.Vector3(),cA)};aH.CircleGeometry.prototype=Object.create(aH.Geometry.prototype);aH.PlaneGeometry=function(cC,cB,e,cA){aH.Geometry.call(this);this.width=cC;this.height=cB;this.widthSegments=e||1;this.heightSegments=cA||1;var cu,cs;var cv=cC/2;var ct=cB/2;var cE=this.widthSegments;var cD=this.heightSegments;var cF=cE+1;var cz=cD+1;var cM=this.width/cE;var cH=this.height/cD;var cL=new aH.Vector3(0,0,1);for(cs=0;cs<cz;cs++){for(cu=0;cu<cF;cu++){var cy=cu*cM-cv;var cx=cs*cH-ct;this.vertices.push(new aH.Vector3(cy,-cx,0))}}for(cs=0;cs<cD;cs++){for(cu=0;cu<cE;cu++){var cK=cu+cF*cs;var cJ=cu+cF*(cs+1);var cI=(cu+1)+cF*(cs+1);var cG=(cu+1)+cF*cs;var cw=new aH.Face4(cK,cJ,cI,cG);cw.normal.copy(cL);cw.vertexNormals.push(cL.clone(),cL.clone(),cL.clone(),cL.clone());this.faces.push(cw);this.faceVertexUvs[0].push([new aH.Vector2(cu/cE,1-cs/cD),new aH.Vector2(cu/cE,1-(cs+1)/cD),new aH.Vector2((cu+1)/cE,1-(cs+1)/cD),new aH.Vector2((cu+1)/cE,1-cs/cD)])}}this.computeCentroids()};aH.PlaneGeometry.prototype=Object.create(aH.Geometry.prototype);aH.RingGeometry=function(cA,cF,cx,cG,cy,cD){aH.Geometry.call(this);cA=cA||0;cF=cF||50;cy=cy!==undefined?cy:0;cD=cD!==undefined?cD:Math.PI*2;cx=cx!==undefined?Math.max(3,cx):8;cG=cG!==undefined?Math.max(3,cG):8;var cH,cC,cB=[],cw=cA,cz=((cF-cA)/cG);for(cH=0;cH<=cG;cH++){for(cC=0;cC<=cx;cC++){var cI=new aH.Vector3();var ct=cy+cC/cx*cD;cI.x=cw*Math.cos(ct);cI.y=cw*Math.sin(ct);this.vertices.push(cI);cB.push(new aH.Vector2((cI.x/cw+1)/2,-(cI.y/cw+1)/2+1))}cw+=cz}var cE=new aH.Vector3(0,0,1);for(cH=0;cH<cG;cH++){var e=cH*cx;for(cC=0;cC<=cx;cC++){var ct=cC+e;var cv=ct+cH;var cu=ct+cx+cH;var cs=ct+cx+1+cH;this.faces.push(new aH.Face3(cv,cu,cs,[cE,cE,cE]));this.faceVertexUvs[0].push([cB[cv],cB[cu],cB[cs]]);cv=ct+cH;cu=ct+cx+1+cH;cs=ct+1+cH;this.faces.push(new aH.Face3(cv,cu,cs,[cE,cE,cE]));this.faceVertexUvs[0].push([cB[cv],cB[cu],cB[cs]])}}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new aH.Sphere(new aH.Vector3(),cw)};aH.RingGeometry.prototype=Object.create(aH.Geometry.prototype);var P={};P.HGRAPH_VERSION="0.01";var ay={};ay.HGRAPH_WIDTH=960;ay.HGRAPH_HEIGHT=720;ay.HGRAPH_RANGE_MINIMUM=60;ay.HGRAPH_RANGE_MAXIMUM=240;ay.HGRAPH_POINT_RADIUS=10;ay.HGRAPH_SUBPOINT_RADIUS=8;ay.HGRAPH_CANVAS_TEXTALIGN="center";ay.HGRAPH_CANVAS_TEXT="10px Arial";ay.HGRAPH_POINT_COLOR_HEALTHY="#616363";ay.HGRAPH_POINT_COLOR_UNHEALTHY="#e1604f";ay.HGRAPH_APP_BOOTSTRAPS=["[data-hgraph-app]","[hgraph-app]"];ay.HGRAPH_GRAPH_BOOTSTRAPS=["[data-hgraph-graph]","[hgraph-graph]"];ay.HGRAPH_PAYLOAD_TRIGGERS=["[data-hgraph-payload]","[hgraph-payload]"];ay.HGRAPH_RING_FILL_COLOR="#97be8c";var aa=Math.ceil;var bZ=Math.floor;var aE=Math.abs;var ck=function(e){return parseInt(e,10)};var cq=function(e){return parseFloat(e)};var aY=function(e){return e*(Math.PI/180)};var V=[].slice;var x=[].push;var bx=[].splice;var T={}.hasOwnProperty;var aG={}.toString;var N=(function(){var cs=["",true,12,/^$/,[],function(){},{},null],ct,e={};while(cs.length>0){ct=aG.call(cs.pop());e[ct]=ct.replace(/^\[object\s(.*)\]$/,"$1").toLowerCase()}return(function(cu){return e[aG.call(cu)]})})();var br=function(e){return N(e)==="array"};var b5=function(e){return N(e)==="object"};var aB=function(e){return N(e)==="string"};var bY=function(e){return N(e)==="number"};var Z=function(e){return N(e)==="function"};var Y=function(e){return N(e)!==undefined};var bT=function(e){return !Y(e)};var l=(function(){var e=0,cs=function(){return Math.floor(Math.random()*100000).toString(32).slice(0,3)};return(function(){return"uid-"+cs()+"-"+cs()+"-"+(++e)})})();var ah=function(ct,cu,e){if(!br(cu)||!Z(ct)){return function(){}}var cs=e?e:{};return function(){if(arguments.length>0){return ct.apply(cs,cu.concat(V.call(arguments,0)))}ct.apply(cs,cu)}};var aR=function(cu,ct,cs){var e;if(cu){if(Z(cu)){for(e in cu){if(e!="prototype"&&e!="length"&&e!="name"&&cu.hasOwnProperty(e)){ct.call(cs,cu[e],e)}}}else{if(cu.forEach&&cu.forEach!==aR){cu.forEach(ct,cs)}else{if(br(cu)){for(e=0;e<cu.length;e++){ct.call(cs,cu[e],e)}}else{for(e in cu){if(cu.hasOwnProperty(e)){ct.call(cs,cu[e],e)}}}}}}return cu};var bz=function(e){if(!b5(e)||arguments.length<2){return e}aR(bx.call(arguments,1),function(cs){aR(cs,function(cu,ct){e[ct]=cu})})};bE.Error=function(e){return new Error(e)};var c={};c.string=function(cs){var ct;try{ct=JSON.parse(cs)}catch(cu){throw bE.Erorr("unable to parse the data string")}return c.object(ct)};c.object=function(e){e.formatted=true;return e};bE.Data=function(){};bE.Data.Parse=function(e){var cs=false;if(aB(e)){cs=c.string(e)}else{if(b5(e)){cs=c.object(e)}else{return false}}return cs};bE.Graph=(function(cv){var cs={},cC={},cD={},e=null;function cu(){aR(cD,function(cE){if(Z(cE)){cE()}});if(cu.looping){e=requestAnimationFrame(cu)}else{cu.Stop()}}cu.looping=false;cu.Begin=function(){cu.looping=true;return cu()};cu.Stop=function(){cu.looping=false;cancelAnimationFrame(e)};function cz(cF){var cH=[],cG=ay.HGRAPH_PAYLOAD_TRIGGERS.join(",");function cE(){if(this.value){cH.push(bE.Data.Parse(this.value))}}bJ.select(cF).selectAll(cG).each(cE);return cH.length>0?cH[0]:{}}function cx(){var cH=cs[this.uid],cE=cH.camera,cG=cH.scene,cF=cH.renderer;cF.render(cG,cE)}function cA(){var cI=cs[this.uid],cG=cI.camera,cE=cI.mouse,cH=cI.components;if(cE.isDown){cE.downCount+=0.15}for(var cF=0;cF<cH.length;cF++){cH[cF].Update(cE)}cC[this.uid].Render()}function cw(){var cE=cs[this.uid],cI=cE.scene,cJ=cE.components,cK=cE.payload,cM=br(cK.points)?cK.points:[],cF=new bE.Graph.Ring(),cH=new aH.Vector3(0,360,0),cL=new bE.Graph.PointManager(cM,false,cH);cJ.push(cF);cJ.push(cL);for(var cG=0;cG<cJ.length;cG++){cJ[cG].Initialize(cI)}return cC[this.uid].Resize()}function cy(){var cJ=cs[this.uid],cF=cJ.canvas,cG=cJ.camera,cI=cJ.renderer,cH=cJ.dimensions;cH.x=window.innerWidth;cH.y=window.innerHeight;var cK=cH.x*0.5,cE=cH.y*0.5;cG.left=-cK;cG.right=cK;cG.top=cE;cG.bottom=-cE;cG.updateProjectionMatrix();cI.setSize(cH.x,cH.y);if(!cD[this.uid]){cD[this.uid]=cC[this.uid].Update}}function ct(){var cE;while(cE=this.invokeQueue.pop()){if(Z(cE)){cE()}}}function cB(cH){this.ready=false;if(!cH){throw new bE.Error("Graphs must be created with a configuration parameter")}var cI={},cG=document.createElement("canvas");this.uid=aB(cH.uid)?cH.uid:l();cI.container=cH.container||document.createElement("div");cI.payload=cz(cI.container);cI.renderer=new aH.CanvasRenderer({canvas:cG});cI.dimensions=new aH.Vector2(window.innerWidth,window.innerHeight);var cL=cI.dimensions.x*0.5,cF=cI.dimensions.y*0.5;cI.camera=new aH.OrthographicCamera(-cL,cL,cF,-cF,-50,1000);try{cI.container.innerHTML="";cI.container.appendChild(cI.renderer.domElement)}catch(cJ){throw new bE.Error("Attempted to use an invalid container for graph: "+cI.uid)}cI.scene=new aH.Scene();cI.components=[];cI.mouse={isDown:false,downCount:0};cs[this.uid]=cI;cC[this.uid]={Update:ah(cA,[],this),Render:ah(cx,[],this),Resize:ah(cy,[],this)};function cE(cM){return(function(){var cN=cM.mouse;cN.isDown=true;cN.downCount=0})}function cK(cM){return(function(){var cN=cM.mouse;cN.isDown=false;cN.downCount=0})}bJ.select(cI.container).on("mousedown",cE(cI)).on("mouseup",cK(cI)).on("touchstart",cE(cI)).on("touchend",cK(cI));t.push(cC[this.uid].Resize);this.ready=true;this.invokeQueue=[ah(cw,[],this)]}cB.prototype={constructor:cB,version:P.GRAPH_VERSION,Initialize:function(){if(this.uid&&this.ready){ct.call(this)}if(!cu.looping){cu.Begin()}}};return cB;window.ShutDown=cu.Stop})();bE.Graph.RingGeometry=(function(){function e(cC,cH){var cJ,cE,cD=[],cC=this.innerRadius,cH=this.outerRadius,cy=this.outerRadius,cz=this.thetaSegments,cA=this.thetaStart,cF=this.thetaLength,cI=1,cB=((cH-cC)/cI);this.vertices=[];for(cJ=0;cJ<=cI;cJ++){for(cE=0;cE<=cz;cE++){var cK=new aH.Vector3();var cv=cA+cE/cz*cF;cK.x=cy*Math.cos(cv);cK.y=cy*Math.sin(cv);this.vertices.push(cK);cD.push(new aH.Vector2((cK.x/cy+1)/2,-(cK.y/cy+1)/2+1))}cy+=cB}var cG=new aH.Vector3(0,0,1);this.faces=[];for(cJ=0;cJ<cI;cJ++){var ct=cJ*cz;for(cE=0;cE<=cz;cE++){var cv=cE+ct;var cx=cv+cJ;var cw=cv+cz+cJ;var cu=cv+cz+1+cJ;this.faces.push(new aH.Face3(cx,cw,cu,[cG,cG,cG]));this.faceVertexUvs[0].push([cD[cx],cD[cw],cD[cu]]);cx=cv+cJ;cw=cv+cz+1+cJ;cu=cv+1+cJ;this.faces.push(new aH.Face3(cx,cw,cu,[cG,cG,cG]));this.faceVertexUvs[0].push([cD[cx],cD[cw],cD[cu]])}}this.computeCentroids();this.computeFaceNormals()}function cs(cw,cv,cu,ct,cx){aH.Geometry.call(this);this.innerRadius=cw||0;this.outerRadius=cv||50;this.thetaStart=ct!==undefined?ct:0;this.thetaLength=cx!==undefined?cx:Math.PI*2;this.thetaSegments=cu!==undefined?Math.max(3,cu):8;e.call(this);this.boundingSphere=new aH.Sphere(new aH.Vector3(),cv)}cs.prototype=Object.create(aH.Geometry.prototype);cs.prototype.SetRadius=function(ct,cu){this.innerRadius=ct||this.innerRadius;this.outerRadius=cu||this.outerRadius;e.call(this);return true};cs.prototype.Render=function(){alert("hi")};return cs})();function b1(e){var cs={};e(cs);var ct=(function(cu){return function(){cu.apply(this,bx.call(arguments,0))}})(T.call(e,"constructor")?e.constructor:function(){});ct.prototype={Initialize:function(){},Update:function(){}};bz(ct.prototype,cs);return ct}bE.Graph.Ring=(function(){var cs={};function e(ct){ct.Update=function(cv){var cw=cs[this.uid],cu=cw.object};ct.Initialize=function(cw){var cv=cs[this.uid],cu=cv.object;cw.add(cu)}}e.constructor=function(){this.uid=l();var ct={};ct.geometry=new bE.Graph.RingGeometry(150,200,25);ct.material=new aH.MeshBasicMaterial({color:9944716,wireframe:false});ct.object=new aH.Mesh(ct.geometry,ct.material);cs[this.uid]=ct};return b1(e)})();bE.Graph.PointManager=(function(){var e={};function cs(ct){ct.Update=function(cu){var cw=e[this.uid],cx=cw.points;for(var cv=0;cv<cx.length;cv++){cx[cv].Update(cu)}};ct.Initialize=function(cx){var cv=e[this.uid],cw=cv.points;for(var cu=0;cu<cw.length;cu++){cw[cu].Initialize(cx)}};ct.SetDegreeRange=function(cv,cA){var cz=e[this.uid],cC=cz.points,cx=cz.degreeRange,cy=cv,cu=cA,cB=cu-cy,cw=cB/(cC.length+1);cx.x=cy+(cw);cx.y=cu-(cw);cx.z=cw};ct.GetDegreeRange=function(){var cv=e[this.uid],cu=cv.degreeRange;return cu};ct.GetPointCount=function(){var cu=e[this.uid],cv=cu.points;return cv.length}}cs.constructor=function(cx,cC,cv){this.uid=l();this.subFlag=cC;var cA={points:[]},cD=br(cx)?cx:[],cB,cy=new aH.Vector3(0,360,10),cw=cv.x,cz=cv.y,cu=cz-cw;cy.x=cv.x;cy.y=cv.y;cy.z=cu/cD.length;cA.degreeRange=cy;e[this.uid]=cA;while(cB=cD.pop()){var ct=new bE.Graph.Point(cB,this,cD.length);cA.points.push(ct)}};return b1(cs)})();bE.Graph.Point=(function(){var e={};function cs(ct){ct.Update=function(cx){var cy=e[this.uid],cw=cy.object,cv=cy.position,cu=cy.subManager;cu.Update(cx)};ct.Initialize=function(cB){var cE=e[this.uid],cx=cE.object,cC=cE.position,cv=cE.subManager,cw=cE.manager,cD=cE.index,cF=cw.GetDegreeRange(),cA=cF.x,cz=cF.z;var cH=cA+(cz*cD),cG=cH+cz;cv.SetDegreeRange(cH,cG);var cy=Math.cos(aY(cA+(cz*cD)))*150,cu=Math.sin(aY(cA+(cz*cD)))*150;cC.x=cx.position.x=cy;cC.y=cx.position.y=cu;cB.add(cE.object);cv.Initialize(cB)}}cs.constructor=function(cx,cw,cu){this.uid=l();var cv={},ct;color=cw.subFlag?3355443:3355443,opacity=cw.subFlag?0:1;cv.index=cu;cv.geometry=new aH.CircleGeometry(15,10);cv.material=new aH.MeshBasicMaterial({color:color,opacity:opacity,wireframe:false});cv.object=new aH.Mesh(cv.geometry,cv.material);cv.position=new aH.Vector2(0,0);cv.manager=cw;this.name=cx.name;this.value=cx.value;this.score=cx.score;this.healthyRange=cx.healthyRange;cv.dependencies=cx.dependencies||[];ct=new bE.Graph.PointManager(cv.dependencies,true,cw.GetDegreeRange());cv.subManager=ct;e[this.uid]=cv};return b1(cs)})();function aS(){aR(t,function(e){return Z(e)&&e()})}function af(e){var cs=l();n[cs]=new bE.Graph({uid:cs,container:e})}function D(){bJ.select(ay.HGRAPH_GRAPH_BOOTSTRAPS.join(",")).each(function(){af(this)});for(var e in n){n[e].Initialize()}}function a2(){var e=[];bJ.select(ay.HGRAPH_APP_BOOTSTRAPS.join(",")).each(function(){e.push(this)});if(e.length>1){throw new bE.Error("Too many root elements found on the page")}bU=e[0];if(bU){return D()}}bJ.select(document).on("DOMContentLoaded",a2);bJ.select(window).on("resize",aS);v.hGraph=bE})(window);